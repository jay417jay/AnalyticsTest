var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.Analytics.AnalyticsControl{constructor(e,t,i){super(e,t,i),this.__radialGrad="radialGradProductivity",this.__linearGrad="linearGradProductivity",this.__onResized=()=>(e,t)=>{let i=super.__getScaleFactor();0!=this.__hasLicense&&(this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),!0===this.__showTitle?(this.__elementSvg.css("height",270*i),this.__elementSvg.css("width",300*i),this.__elementSvg.css("margin-top",5*i),this.__elementSvg.css("margin-left",0*i)):(this.__elementSvg.css("height",290*i),this.__elementSvg.css("width",300*i),this.__elementSvg.css("margin-top",20*i),this.__elementSvg.css("margin-left",10*i)))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=310,this.__defaultHeight=310,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-productivity-interval-svg"),this.__elementSvgDefs=this.__elementTemplateRoot.find(".tchmi-productivity-interval-defs"),this.__elementCircleLabel=this.__elementTemplateRoot.find(".tchmi-productivity-interval-label-circle"),this.__elementElapsedCircle=this.__elementTemplateRoot.find(".tchmi-productivity-interval-elapsed-circle"),this.__elementRemainingCircle=this.__elementTemplateRoot.find(".tchmi-productivity-interval-remaining-circle"),this.__elementSvgWholeCircle=this.__elementTemplateRoot.find(".tchmi-productivity-interval-whole-circle"),this.__elementNeedle=this.__elementTemplateRoot.find(".tchmi-productivity-interval-needle"),this.__elementRectLabel=this.__elementTemplateRoot.find(".tchmi-productivity-interval-label-rect"),this.__elementElapsedRect=this.__elementTemplateRoot.find(".tchmi-productivity-interval-elapsed-pieces"),this.__elementRemainingRect=this.__elementTemplateRoot.find(".tchmi-productivity-interval-remaining-pieces"),this.__elementSvgWholeRect=this.__elementTemplateRoot.find(".tchmi-productivity-interval-outer-rect"),this.__elementPiecesText=this.__elementTemplateRoot.find(".tchmi-productivity-interval-pieces-text"),this.__elementLegendRectElapsed=this.__elementTemplateRoot.find(".tchmi-productivity-interval-legend-rect-elapsed"),this.__elementLegendRectRemaining=this.__elementTemplateRoot.find(".tchmi-productivity-interval-legend-rect-remaining"),this.__elementLegendTextElapsed=this.__elementTemplateRoot.find(".tchmi-productivity-interval-legend-text-elapsed"),this.__elementLegendTextRemaining=this.__elementTemplateRoot.find(".tchmi-productivity-interval-legend-text-remaining"),this.__elementCurrentProductivityLabel=this.__elementTemplateRoot.find(".tchmi-productivity-interval-current-productivity-text-label"),this.__elementCurrentProductivity=this.__elementTemplateRoot.find(".tchmi-productivity-interval-current-productivity-text"),this.__elementExpectedProductivityLabel=this.__elementTemplateRoot.find(".tchmi-productivity-interval-expected-productivity-text-label"),this.__elementExpectedProductivity=this.__elementTemplateRoot.find(".tchmi-productivity-interval-expected-productivity-text"),this.__elementLegendText=this.__elementTemplateRoot.find(".tchmi-productivity-interval-text"))}__init(){super.setEditableProperties([]),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setElapsedColor(t){var i=e.ValueConverter.toString(t.color);null===i&&(i=this.getAttributeDefaultValueInternal("ElapsedColor")),i!==this.__elapsedColor&&(this.__elapsedColor=this.rgbaToHex(i),e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getElapsedColor"]),this.__processElapsedColor())}getElapsedColor(){return this.__elapsedColor}__processElapsedColor(){this.__processColor()}setRemainingColor(t){var i=e.ValueConverter.toString(t.color);null===i&&(i=this.getAttributeDefaultValueInternal("RemainingColor")),i!==this.__remainingColor&&(this.__remainingColor=this.rgbaToHex(i),e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRemainingColor"]),this.__processRemainingColor())}getRemainingColor(){return this.__remainingColor}__processRemainingColor(){this.__processColor()}setElapsedTime(t){var i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("ElapsedTime")),JSON.stringify(i)!==JSON.stringify(this.__elapsedTime)&&(this.__elapsedTime=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getElapsedTime"]),this.__processElapsedTime())}getElapsedTime(){return this.__elapsedTime}__processElapsedTime(){this.__processTimes()}setRemainingTime(t){var i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("remaining")),JSON.stringify(i)!==JSON.stringify(this.__remainingTime)&&(this.__remainingTime=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRemainingTime"]),this.__processRemainingTime())}getRemainingTime(){return this.__remainingTime}__processRemainingTime(){this.__processTimes()}__processTimes(){var e=0;void 0!==this.__remainingTime&&void 0!==this.__elapsedTime&&(e=this.convertTimeSpan(this.__elapsedTime)/(this.convertTimeSpan(this.__elapsedTime)+this.convertTimeSpan(this.__remainingTime)),this.DrawChart(this.__elementElapsedCircle,e))}DrawChart(e,t){var i="M85,85 m-65 0 a65,65 0 1, 0 130,0 a65,65 0 1, 0 -130,0";if(t<1){i=this.describeArc(85,85,64,0,360*t);var s=this.polarToCartesian(85,85,70,360*t);this.__elementNeedle[0].setAttribute("x2",s.x.toString()),this.__elementNeedle[0].setAttribute("y2",s.y.toString())}e[0].setAttribute("d",i+"L85,85z")}setRemainingAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("RemainingAlias")),i!==this.__remainingAlias&&(this.__remainingAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRemainingAlias"]),this.__processRemainingAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getRemainingAlias(){return this.__remainingAlias}__processRemainingAlias(){this.__elementLegendTextRemaining[0].innerHTML=this.__remainingAlias}setProducedAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ProducedAlias")),i!==this.__producedAlias&&(this.__producedAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProducedAlias"]),this.__processProducedAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getProducedAlias(){return this.__producedAlias}__processProducedAlias(){this.__elementLegendTextElapsed[0].innerHTML=this.__producedAlias}setProducedPiecesAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ProducedPiecesAlias")),i!==this.__producedPiecesAlias&&(this.__producedPiecesAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProducedPiecesAlias"]),this.__processProducedPiecesAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getProducedPiecesAlias(){return this.__producedPiecesAlias}__processProducedPiecesAlias(){this.__elementRectLabel[0].innerHTML=this.__producedPiecesAlias}setIntervalTimeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("IntervalTimeAlias")),i!==this.__intervalTimeAlias&&(this.__intervalTimeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getIntervalTimeAlias"]),this.__processIntervalTimeAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getIntervalTimeAlias(){return this.__intervalTimeAlias}__processIntervalTimeAlias(){this.__elementCircleLabel[0].innerHTML=this.__intervalTimeAlias}setExpectedProductivityAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ExpectedProductivityAlias")),i!==this.__expectedProductivityAlias&&(this.__expectedProductivityAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getExpectedProductivityAlias"]),this.__processExpectedProductivityAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getExpectedProductivityAlias(){return this.__expectedProductivityAlias}__processExpectedProductivityAlias(){this.__elementExpectedProductivityLabel[0].innerHTML=this.__expectedProductivityAlias}setCurrentProductivityAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("CurrentProductivityAlias")),i!==this.__currentProductivityAlias&&(this.__currentProductivityAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCurrentProductivityAlias"]),this.__processCurrentProductivityAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getCurrentProductivityAlias(){return this.__currentProductivityAlias}__processCurrentProductivityAlias(){this.__elementCurrentProductivityLabel[0].innerHTML=this.__currentProductivityAlias}setElapsedPieces(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("ElapsedPieces")),JSON.stringify(i)!==JSON.stringify(this.__elapsedPieces)&&(this.__elapsedPieces=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getElapsedPieces"]),this.__processElapsedPieces())}getElapsedPieces(){return this.__elapsedPieces}__processElapsedPieces(){this.__processPieces()}setRemainingPieces(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("RemainingPieces")),JSON.stringify(i)!==JSON.stringify(this.__remainingPieces)&&(this.__remainingPieces=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRemainingPieces"]),this.__processRemainingPieces())}getRemainingPieces(){return this.__remainingPieces}__processRemainingPieces(){this.__processPieces()}__processPieces(){if(null!==this.__remainingPieces&&void 0!==this.__remainingPieces&&null!==this.__elapsedPieces&&void 0!==this.__elapsedPieces){var e=0;if(this.__elapsedPieces+this.__remainingPieces>0)e=this.__elapsedPieces/(this.__elapsedPieces+this.__remainingPieces)*280;this.__elementElapsedRect[0].setAttribute("width",e.toString()),this.__remainingPieces>0?this.__elementPiecesText[0].innerHTML=this.__elapsedPieces.toString()+"/"+(this.__elapsedPieces+this.__remainingPieces).toString():this.__elementPiecesText[0].innerHTML=this.__elapsedPieces.toString()}this.__processColor()}setCurrentProductivity(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("CurrentProductivity")),JSON.stringify(i)!==JSON.stringify(this.__currentProductivity)&&(this.__currentProductivity=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProductivity"]),this.__processCurrentProductivity())}getCurrentProductivity(){return this.__currentProductivity}__processCurrentProductivity(){this.__currentProductivity.toFixed(0).length<=4?this.__elementCurrentProductivity.css("font-size","45px"):this.__currentProductivity.toFixed(0).length<=5?this.__elementCurrentProductivity.css("font-size","40px"):this.__elementCurrentProductivity.css("font-size","30px"),this.__elementCurrentProductivity[0].innerHTML=this.__currentProductivity.toFixed(0)+"%"}setExpectedProductivity(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("ExpectedProductivity")),JSON.stringify(i)!==JSON.stringify(this.__expectedProductivity)&&(this.__expectedProductivity=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProductivity"]),this.__processExpectedProductivity())}getExpectedProductivity(){return this.__expectedProductivity}__processExpectedProductivity(){this.__expectedProductivity.toFixed(0).length<=4?this.__elementExpectedProductivity.css("font-size","45px"):this.__expectedProductivity.toFixed(0).length<=5?this.__elementExpectedProductivity.css("font-size","40px"):this.__elementExpectedProductivity.css("font-size","30px"),this.__elementExpectedProductivity[0].innerHTML=this.__expectedProductivity.toFixed(0)+"%"}__processColorGradient(){this.__processColor()}__processColor(){if(this.__elementSvgDefs[0].innerHTML="",void 0!==this.__colorGradient&&void 0!==this.__elapsedColor&&void 0!==this.__remainingColor){this.CreateLinearGradient(this.hexToRgbA(this.__elapsedColor),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId+"Elapsed"),this.CreateLinearGradient(this.hexToRgbA(this.__remainingColor),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId+"Remaining");for(var e=0;e<2;e++)this.__elementSvgDefs[0].children[e].setAttribute("x2","0%"),this.__elementSvgDefs[0].children[e].setAttribute("y2","100%"),this.__elementSvgDefs[0].children[e].children[1].setAttribute("offset","35%");this.CreateRadialGradient(this.hexToRgbA(this.__elapsedColor),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"Elapsed"),this.CreateRadialGradient(this.hexToRgbA(this.__remainingColor),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"Remaining"),0!==this.__colorGradient?(this.__elementExpectedProductivity.css("text-shadow",this.__controlColorDark+" -2px 2px 2px"),this.__elementCurrentProductivity.css("text-shadow",this.__controlColorDark+" -2px 2px 2px")):(this.__elementExpectedProductivity.css("text-shadow","none"),this.__elementCurrentProductivity.css("text-shadow","none")),this.__elementElapsedCircle.css("fill",this.__elapsedColor),this.__elementRemainingCircle.css("fill",this.__remainingColor),this.__elementRemainingRect.css("fill","url(#"+this.__linearGrad+this.__secureId+"Remaining)"),this.__elementElapsedRect.css("fill","url(#"+this.__linearGrad+this.__secureId+"Elapsed)"),this.__elementNeedle.css("stroke",this.__controlColorDark),this.__elementSvgWholeCircle.css("stroke",this.__controlColorDark),this.__elementSvgWholeCircle.css("fill","none"),this.__elementSvgWholeRect.css("stroke",this.__controlColorDark),this.__elementSvgWholeRect.css("fill","none"),this.__elementLegendRectElapsed.css("stroke",this.__controlColorDark),this.__elementLegendRectRemaining.css("stroke",this.__controlColorDark),this.__elementLegendRectElapsed.css("fill","url(#"+this.__radialGrad+this.__secureId+"Elapsed)"),this.__elementLegendRectRemaining.css("fill","url(#"+this.__radialGrad+this.__secureId+"Remaining)"),this.__elementLegendText.css("fill",this.__fontColor),this.__elementCurrentProductivity.css("fill",this.__fontColor),this.__elementPiecesText.css("fill",this.__fontColor)}var t=this.__colorGradient/100;t<0&&(t*=-1),t>1&&(t=1),this.CreateRadialGradient("rgba(255,255,255,1)",this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId,0,t,0),this.__elementSvgWholeCircle.css("fill","url(#"+this.__radialGrad+this.__secureId+")")}}t.ProductivityInterval=i}(i=t.Analytics||(t.Analytics={})),t.registerEx("ProductivityInterval","TcHmi.Controls.Analytics",i.ProductivityInterval)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));