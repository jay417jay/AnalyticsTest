var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.Analytics.AnalyticsControl{constructor(e,t,i){super(e,t,i),this.__onResized=()=>(e,t)=>{let i=super.__getScaleFactor();0!=this.__hasLicense&&(this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),this.__elementCanvas.css("width",300*i),this.__elementCanvas.css("left",5*i),!0===this.__showTitle?(this.__elementCanvas.css("height",120*i),this.__elementCanvas.css("padding-bottom",10*i),this.__elementContainer.css("height",270*i)):(this.__elementCanvas.css("height",140*i),this.__elementCanvas.css("padding-bottom",15*i),this.__elementContainer.css("height",290*i)),this.__elementImage.css("width",275*i),this.__elementImage.css("height",135*i),this.__elementImage.css("margin-left",10*i))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=310,this.__defaultHeight=310,this.__showTimes,this.__elementImage=this.__elementTemplateRoot.find(".tchmi-x-t-s-direction-image"),this.__elementCanvas=this.__elementTemplateRoot.find(".tchmi-x-t-s-direction-canvas"),this.__elementContainer=this.__elementTemplateRoot.find(".tchmi-x-t-s-direction-container"))}__init(){let e=[new t.Property(this,"ShowTimes","ShowTimes",t.E_DataType.BOOLEAN),new t.Property(this,"ShowMilliSeconds","Show Milliseconds",t.E_DataType.BOOLEAN),new t.Property(this,"ArrowColor","Arrow Color",t.E_DataType.SOLIDCOLOR)];super.setEditableProperties(e),super.__init()}__attach(){super.__attach(),this.__processDirection()}__detach(){super.__detach();var e=this.__elementCanvas[0];e.width=0,e.height=0}destroy(){this.__keepAlive||super.destroy()}setDirection(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("Direction")),i!==this.__direction&&(this.__direction=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDirection"]),this.__processDirection())}getDirection(){return this.__direction}setCountPositive(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("CountPositive")),i!==this.__countPositive&&(this.__countPositive=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCountPositive"]),this.__processDirection())}getCountPositive(){return this.__countPositive}setCountNegative(t){var i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("CountNegative")),i!==this.__countNegative&&(this.__countNegative=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCountNegative"]),this.__processDirection())}getCountNegative(){return this.__countNegative}setTimePositive(t){var i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("TimePositive")),JSON.stringify(i)!==JSON.stringify(this.__timePositive)&&(this.__timePositive=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTimePositive"]),this.__processDirection())}getTimePositive(){return this.__timePositive}setTimeNegative(t){var i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("TimeNegative")),JSON.stringify(i)!==JSON.stringify(this.__timeNegative)&&(this.__timeNegative=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTimeNegative"]),this.__processDirection())}getTimeNegative(){return this.__timeNegative}setShowTimes(t){var i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("ShowTimes")),i!==this.__showTimes&&(this.__showTimes=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowTimes"]),this.__processDirection())}getShowTimes(){return this.__showTimes}setArrowColor(t){let i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("ArrowColor")),i!==this.__arrowColor&&(this.__arrowColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getArrowColor"]),this.__processDirection())}getArrowColor(){return this.__arrowColor}setShowMilliSeconds(t){var i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("ShowMilliSeconds")),i!==this.__showMilliSeconds&&(this.__showMilliSeconds=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowMilliSeconds"]),this.__processShowMilliSeconds())}getShowMilliSeconds(){return this.__showMilliSeconds}setDayAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("DayAlias")),i!==this.__dayAlias&&(this.__dayAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDayAlias"]),this.__processDayAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getDayAlias(){return this.__dayAlias}__processDayAlias(){this.__processDirection()}__processShowMilliSeconds(){this.__processDirection()}__processColor(){this.__processDirection()}__processDirection(){this.__isAttached&&this.DrawDirection(this.__elementCanvas[0],this.__direction,this.__countPositive,this.__countNegative,this.__timePositive,this.__timeNegative,this.__showTimes,this.__arrowColor,this.__showMilliSeconds,this.__showTitle,this.__fontColor,this.__controlColorDark,this.__dayAlias)}DrawDirection(t,i,s,o,n,r,l,a,_,h,c,u,d){t.width=2900,t.height=!0===h?1200:1400;let g=.25*t.width,v=.75*t.height;l||(v=t.height);var m=t.getContext("2d");m.clearRect(0,0,t.width,t.height),m.strokeStyle=1===i||2===i?a.color:c,m.fillStyle=u,m.lineCap="round",m.lineWidth=60,m.beginPath(),m.moveTo(g+100,.5*v),m.lineTo(1400+g-100,.5*v),m.stroke(),m.closePath(),1===i&&(m.beginPath(),m.moveTo(1400+g-100,.5*v),m.lineTo(1400+g-300,.2*v),m.stroke(),m.closePath(),m.beginPath(),m.moveTo(1400+g-100,.5*v),m.lineTo(1400+g-300,.8*v),m.stroke(),m.closePath()),2===i&&(m.beginPath(),m.moveTo(g+100,.5*v),m.lineTo(g+300,.2*v),m.stroke(),m.closePath(),m.beginPath(),m.moveTo(g+100,.5*v),m.lineTo(g+300,.8*v),m.stroke(),m.closePath()),m.font="bold 300px sans-serif";let C=300,p=m.measureText(e.ValueConverter.toString(o)).width;for(;p>g;)C-=10,m.font="bold "+e.ValueConverter.toString(C)+"px sans-serif",p=m.measureText(e.ValueConverter.toString(o)).width;m.font="bold "+C+"px sans-serif",m.textAlign="end",m.textBaseline="middle",m.fillText(o,g,.5*v),l&&(m.font="bold 140px sans-serif",m.textBaseline="top",m.textAlign="center",m.fillText(this.TimeSpanConverter(r,_,d,!1),g,v-70,350+g)),m.font="bold 300px sans-serif";let T=300,w=m.measureText(e.ValueConverter.toString(s)).width;for(;w>g;)T-=10,m.font="bold "+e.ValueConverter.toString(T)+"px sans-serif",w=m.measureText(e.ValueConverter.toString(s)).width;m.font="bold "+T+"px sans-serif",m.textAlign="start",m.textBaseline="middle",m.fillText(s,1400+g,.5*v),m.fill(),!0===l&&(m.font="bold 140px sans-serif",m.textBaseline="top",m.textAlign="center",m.fillText(this.TimeSpanConverter(n,_,d,!1),1400+g,v-70,350+g))}}t.XTSDirection=i}(i=t.Analytics||(t.Analytics={})),t.registerEx("XTSDirection","TcHmi.Controls.Analytics",i.XTSDirection)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));