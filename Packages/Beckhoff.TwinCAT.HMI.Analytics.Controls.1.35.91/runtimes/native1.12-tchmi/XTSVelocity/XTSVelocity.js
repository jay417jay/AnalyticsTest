var TcHmi;!function(t){let e;!function(e){let i;!function(e){class i extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,i){super(t,e,i),this.__withRange=!1,this.__radialGrad="radialGradVelocity",this.__onResized=()=>(t,e)=>{let i=super.__getScaleFactor();0!=this.__hasLicense&&(this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),this.__elementSvgChart.css("margin-top",40*i),!0===this.__showTitle?(this.__elementSvgChart.css("height",200*i),this.__elementSvgChart.css("width",290*i),this.__elementSvgChart.css("margin-left",10*i)):(this.__elementSvgChart.css("height",200*i),this.__elementSvgChart.css("width",290*i),this.__elementSvgChart.css("margin-left",5*i)))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=310,this.__defaultHeight=310,this.__growOnly=!0,this.__maxVelocity=0,this.__minVelocity=0,this.__posAndNeg=!1,this.__elementSvgChart=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg"),this.__elementSvgChartDefs=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-defs"),this.__elementSvgChartBackgroundCircle=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-background-circle"),this.__elementSvgChartInnerCircle=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-inner-circle"),this.__elementSvgChartProcess=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-process"),this.__elementSvgChartPointer=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-needle"),this.__elementSvgChartScale=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-scale"),this.__elementSvgChartValue=this.__elementTemplateRoot.find(".tchmi-velocity-value"),this.__elementSvgChartValues=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-scale-text"))}__init(){let t=[new e.Property(this,"VelocityUnit","VelocityUnit",e.E_DataType.STRING),new e.Property(this,"Ticks","Ticks",e.E_DataType.UINTEGER),new e.Property(this,"ShowValues","ShowValues",e.E_DataType.BOOLEAN),new e.Property(this,"ShowVelocity","ShowVelocity",e.E_DataType.BOOLEAN)];super.setEditableProperties(t),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setVelocity(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("Velocity")),i!==this.__velocity&&(this.__velocity=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getVelocity"]),this.__processVelocity())}getVelocity(){return this.__velocity}setRange(e){var i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("Range")),i!==this.__range&&(this.__range=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRange"]),this.__processRange())}getRange(){return this.__range}__processRange(){void 0!==this.__range&&(this.__range.length>0&&(this.__withRange=!0),void 0!==this.__velocity&&this.__processVelocity())}setVelocityUnit(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("VelocityUnit")),i!==this.__velocityUnit&&(this.__velocityUnit=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getVelocityUnit"]),void 0!==this.__velocity&&this.__processVelocity())}getVelocityUnit(){return this.__velocityUnit}setVelocityColor(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("VelocityColor")),i!==this.__velocityColor&&(this.__velocityColor=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getVelocityColor"]),this.__processVelocityColor())}getVelocityColor(){return this.__velocityColor}__processVelocityColor(){this.__processColor()}setTicks(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("Ticks")),i!==this.__ticks&&(this.__ticks=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTicks"]),this.__processTicks())}getTicks(){return this.__ticks}__processTicks(){void 0!==this.__velocity&&this.__processVelocity()}setShowValues(e){var i=t.ValueConverter.toBoolean(e);null===i&&(i=this.getAttributeDefaultValueInternal("ShowValues")),i!==this.__showValues&&(this.__showValues=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowValues"]),this.__processShowValues())}getShowValues(){return this.__showValues}__processShowValues(){this.__elementSvgChartValues=this.__elementTemplateRoot.find(".tchmi-velocity-chart-svg-scale-text");for(var t=0;t<this.__elementSvgChartValues.length;t++)1==this.__showValues?this.__elementSvgChartValues[t].setAttribute("visibility","visible"):this.__elementSvgChartValues[t].setAttribute("visibility","hidden")}setShowVelocity(e){var i=t.ValueConverter.toBoolean(e);null===i&&(i=this.getAttributeDefaultValueInternal("ShowVelocity")),i!==this.__showVelocity&&(this.__showVelocity=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowVelocity"]),this.__processShowVelocity())}getShowVelocity(){return this.__showVelocity}__processShowVelocity(){1==this.__showVelocity?this.__elementSvgChartValue[0].setAttribute("visibility","visible"):this.__elementSvgChartValue[0].setAttribute("visibility","hidden")}setGrowOnly(e){var i=t.ValueConverter.toBoolean(e);null!==i?i!==this.__growOnly&&(this.__growOnly=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getGrowOnly"]),this.__processShowVelocity()):i=this.getAttributeDefaultValueInternal("GrowOnly")}getGrowOnly(){return this.__growOnly}__processColorGradient(){this.__processColor()}__processColor(){this.__elementSvgChartBackgroundCircle.css("stroke",this.__controlColorDark),this.__elementSvgChartBackgroundCircle.css("fill",this.__controlChartColor),this.__elementSvgChartInnerCircle.css("stroke",this.__controlColorDark),this.__elementSvgChartInnerCircle.css("fill",this.__controlChartColor),this.__elementSvgChartPointer.css("stroke",this.__controlColorMiddle),this.__elementSvgChartPointer.css("fill",this.__controlColorMiddle),this.__elementSvgChartScale.css("fill",this.__controlColorMiddle),this.__elementSvgChartScale.css("stroke",this.__controlColorMiddle),this.__elementSvgChartValue.css("fill",this.__controlColorDark),this.__elementSvgChartProcess.css("fill","none"),this.__elementSvgChartDefs[0].innerHTML="",void 0===this.__colorGradient||void 0===this.__velocityColor||this.__withRange||(this.CreateLinearGradient2(this.__velocityColor.color,this.__elementSvgChartDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId),this.__elementSvgChartProcess.css("stroke","url(#"+this.__radialGrad+this.__secureId))}__processVelocity(){const t=this.getTrimmedNumberWithUnit(this.__velocity,this.__velocityUnit);if(this.__elementSvgChartValue[0].innerHTML=t,void 0!==this.__range&&null!==this.__range&&void 0!==this.__maxVelocity&&null!==this.__maxVelocity&&void 0!==this.__velocity&&void 0!==this.__ticks&&null!==this.__velocity&&null!==this.__ticks&&null!==this.__growOnly&&void 0!==this.__growOnly){for(!1===this.__growOnly&&(0==this.__posAndNeg?(this.__maxVelocity=0,this.__minVelocity=0):(this.__maxVelocity=.1,this.__minVelocity=-.1));this.__maxVelocity<this.__velocity||this.__minVelocity>this.__velocity;)this.__minVelocity>this.__velocity&&(0==this.__minVelocity&&(this.__minVelocity=-.1),this.__minVelocity=10*this.__minVelocity),this.__maxVelocity<this.__velocity&&(0==this.__maxVelocity&&(this.__maxVelocity=.1),this.__maxVelocity=10*this.__maxVelocity);0!==this.__minVelocity&&0!==this.__maxVelocity?(this.__posAndNeg=!0,this.__maxVelocity>Math.abs(this.__minVelocity)&&(this.__minVelocity=-1*this.__maxVelocity),this.__maxVelocity<Math.abs(this.__minVelocity)&&(this.__maxVelocity=-1*this.__minVelocity)):this.__posAndNeg=!1,this.DrawVelocityChart(this.__velocity,this.__ticks,this.__maxVelocity,this.__minVelocity,this.__range,this.__withRange)}}DrawVelocityChart(t,e,i,s,_,r){if(0===t&&t===s)return;let l=i,o=s,h=0;var a=0;for(this.__elementSvgChartProcess=this.__elementSvgChart.find(".tchmi-velocity-chart-svg-process");this.__elementSvgChartProcess.length>0;)this.__elementSvgChartProcess[0].parentNode.removeChild(this.__elementSvgChartProcess[0]),this.__elementSvgChartProcess=this.__elementSvgChart.find(".tchmi-velocity-chart-svg-process");if(r)for(var n=25,c=150,v=0,g=_.length;v<g;v++){var m=this.__range[v].start;m<o&&(m=o),m>l&&(m=l);var u=this.__range[v].end;if(u<o&&(u=o),u>l&&(u=l),0==v&&m>o){var y=(Math.abs(m)+Math.abs(o))/(l+Math.abs(o));y<.5?a=270+180*y:y>.5&&(a=180*y-90);var d=(a-90)*Math.PI/180;n=145+120*Math.cos(d),c=150+120*Math.sin(d)}var C=(Math.abs(u)+Math.abs(o))/(l+Math.abs(o));C<.5?a=270+180*C:C>.5&&(a=180*C-90);d=(a-90)*Math.PI/180;var V=145+120*Math.cos(d),S=150+120*Math.sin(d);let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("stroke",this.rgbaToHex(this.__range[v].color.color)),t.setAttribute("class","tchmi-velocity-chart-svg-process");var p="M"+n+","+c+", A120,120 1 0,1 "+V+" "+S;t.setAttribute("d",p),this.__elementSvgChart[0].appendChild(t),n=V,c=S}else{let t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("class","tchmi-velocity-chart-svg-process"),this.__elementSvgChart[0].appendChild(t)}if(this.__elementSvgChartProcess=this.__elementSvgChart.find(".tchmi-velocity-chart-svg-process"),l>0&&0==o){h=t/l,h<.5?a=270+180*h:h>.5&&(a=180*h-90);d=(a-90)*Math.PI/180,V=145+120*Math.cos(d),S=150+120*Math.sin(d);r||this.__elementSvgChartProcess[0].setAttribute("d","M25,150, A120,120 1 0,1 "+V+" "+S),this.__elementSvgChartPointer[0].setAttribute("transform","rotate("+180*h+",145,150)"),this.__elementSvgChartPointer[0].setAttribute("y2",S.toString()+"px")}else if(o<0&&0==l){h=t/o,(h<.5||h>.5)&&(a=90-180*h);d=(a-90)*Math.PI/180,V=145+120*Math.cos(d),S=150+120*Math.sin(d);r||this.__elementSvgChartProcess[0].setAttribute("d","M265,150, A120,120 1 0,0 "+V+" "+S),this.__elementSvgChartPointer[0].setAttribute("transform","rotate("+(180-180*h)+",145,150)"),this.__elementSvgChartPointer[0].setAttribute("y2",S.toString()+"px")}else if(t>0){h=t/l;d=(a=270+90*h)*Math.PI/180,V=145+120*Math.cos(d),S=150+120*Math.sin(d);r||this.__elementSvgChartProcess[0].setAttribute("d","M145,30, A120,120 1 0,1 "+V+" "+S),this.__elementSvgChartPointer[0].setAttribute("transform","rotate("+(90+90*h)+",145,150)")}else{h=t/o;d=(a=270-90*h)*Math.PI/180,V=145+120*Math.cos(d),S=150+120*Math.sin(d);r||this.__elementSvgChartProcess[0].setAttribute("d","M145,30, A120,120 1 0,0 "+V+" "+S),this.__elementSvgChartPointer[0].setAttribute("transform","rotate("+(90-90*h)+",145,150)")}var w=this.__elementSvgChartPointer[0];this.__elementSvgChartPointer[0].parentNode.removeChild(this.__elementSvgChartPointer[0]),this.__elementSvgChart[0].appendChild(w),this.__elementSvgChartScale[0].innerHTML="";for(v=0;v<=e;v++){var b=document.createElementNS("http://www.w3.org/2000/svg","line");b.setAttribute("x1","46.5px"),b.setAttribute("x2","65px"),b.setAttribute("y1","150px"),b.setAttribute("y2","150px");var A=180/e*v;if(b.setAttribute("transform","rotate("+A+",145,150)"),this.__elementSvgChartScale[0].appendChild(b),0==v||v==e||e>1&&v==e/2&&e%2==0){var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.textContent=(o+(l+Math.abs(o))/e*v).toString(),f.classList.add("tchmi-velocity-chart-svg-scale-text"),0==v&&(f.setAttribute("x","67px"),f.setAttribute("y","146px"),f.setAttribute("text-anchor","start")),v==e&&(f.setAttribute("x","223.5px"),f.setAttribute("y","146px"),f.setAttribute("text-anchor","end")),v==e/2&&(f.textContent=(o+(l+Math.abs(o))/e*v).toString(),f.setAttribute("x","145px"),f.setAttribute("y","85px"),f.setAttribute("text-anchor","middle")),this.__elementSvgChartScale[0].appendChild(f)}}}}e.XTSVelocity=i}(i=e.Analytics||(e.Analytics={})),e.registerEx("XTSVelocity","TcHmi.Controls.Analytics",i.XTSVelocity)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));