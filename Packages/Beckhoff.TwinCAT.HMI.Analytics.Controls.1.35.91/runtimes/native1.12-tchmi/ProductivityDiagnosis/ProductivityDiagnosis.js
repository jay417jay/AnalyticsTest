var TcHmi;!function(t){let e;!function(e){let i;!function(e){class i extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,i){super(t,e,i),this.__radialGrad="radialGradProductivity",this.__linearGrad="linearGradProductivity",this.__onResized=()=>(t,e)=>{let i=super.__getScaleFactor();0!=this.__hasLicense&&(this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),!0===this.__showTitle?(this.__elementSvg.css("height",270*i),this.__elementSvg.css("width",270*i),this.__elementSvg.css("margin-top",5*i),this.__elementSvg.css("margin-left",5*i)):(this.__elementSvg.css("height",300*i),this.__elementSvg.css("width",280*i),this.__elementSvg.css("margin-top",5*i),this.__elementSvg.css("margin-left",-5*i)))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=310,this.__defaultHeight=150,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-svg"),this.__elementSvgDefs=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-defs"),this.__elementChart=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-outer-circle"),this.__elementProductivity=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-productivity-circle"),this.__elementLastProductivity=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-last-productivity-circle"),this.__elementInnerText=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-text"),this.__elementInnerText1=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-text-1"),this.__elementInnerText2=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-text-2"),this.__elementStrokeCircle=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-stroke-circle"),this.__elementStrokeCircleOuter=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-stroke-circle-outer"),this.__elementLegendRectProd=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-legend-rect-prod"),this.__elementLegendRectProdLast=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-legend-rect-prod-last"),this.__elementLegendText=this.__elementTemplateRoot.find(".tchmi-productivity-diagnosis-legend-text"))}__init(){let t=[new e.Property(this,"ShowProductivity","Show Productivity",e.E_DataType.COMBOBOX,{comboBoxOptions:[{value:"Productivity",displayName:"Productivity"},{value:"ProductivityLastCycle",displayName:"ProductivityLastCycle"},{value:"Both",displayName:"Both"},{value:"None",displayName:"None"}]})];super.setEditableProperties(t),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setProductivityColor(e){var i=t.ValueConverter.toString(e.color);null===i&&(i=this.getAttributeDefaultValueInternal("ProductivityColor")),i!==this.__productivityColor&&(this.__productivityColor=this.rgbaToHex(i),t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProductivityColor"]),this.__processProductivityColor())}getProductivityColor(){return this.__productivityColor}__processProductivityColor(){this.__processColor()}setProductivityColorLastCycle(e){var i=t.ValueConverter.toString(e.color);null===i&&(i=this.getAttributeDefaultValueInternal("ProductivityColorLastCycle")),i!==this.__productivityColorLastCycle&&(this.__productivityColorLastCycle=this.rgbaToHex(i),t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProductivityColorLastCycle"]),this.__processProductivityColorLastCycle())}getProductivityColorLastCycle(){return this.__productivityColorLastCycle}__processProductivityColorLastCycle(){this.__processColor()}setProductivity(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("Productivity")),i!==this.__productivity&&(this.__productivity=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProductivity"]),this.__processProductivity())}getProductivity(){return this.__productivity}__processProductivity(){this.__processChart()}setProductivityLastCycle(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("ProductivityLastCycle")),i!==this.__productivityLastCycle&&(this.__productivityLastCycle=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getProductivityLastCycle"]),this.__processProductivityLastCycle())}getProductivityLastCycle(){return this.__productivityLastCycle}__processProductivityLastCycle(){this.__processChart()}setShowProductivity(e){var i=t.ValueConverter.toString(e);null!==i?i!==this.__showProductivity&&(this.__showProductivity=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowProductivity"]),this.__processShowProductivity()):i=this.getAttributeDefaultValueInternal("ShowProductivity")}getShowProductivity(){return this.__showProductivity}__processShowProductivity(){this.__processChart(),this.__processColor()}setCurrentCycleAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("CurrentCycleAlias")),i!==this.__currentCycleAlias&&(this.__currentCycleAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCurrentCycleAlias"]),this.__processCurrentCycleAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getCurrentCycleAlias(){return this.__currentCycleAlias}__processCurrentCycleAlias(){this.__processLegend()}setLastCycleAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("LastCycleAlias")),i!==this.__lastCycleAlias&&(this.__lastCycleAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastCycleAlias"]),this.__processLastCycleAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getLastCycleAlias(){return this.__lastCycleAlias}__processLastCycleAlias(){this.__processLegend()}__processColorGradient(){this.__processColor()}__processColor(){this.__elementChart.css("fill",this.__controlChartColor),this.__elementLegendRectProd.css("stroke",this.__controlColorDark),this.__elementLegendRectProdLast.css("stroke",this.__controlColorDark),this.__elementStrokeCircle.css("stroke",this.__controlColorDark),this.__elementStrokeCircle.css("fill","none"),this.__elementStrokeCircleOuter.css("stroke",this.__controlColorDark),this.__elementLegendText.css("fill",this.__fontColor),"Productivity"===this.__showProductivity?this.__elementInnerText1.css("fill",this.__productivityColor):"ProductivityLastCycle"===this.__showProductivity?this.__elementInnerText1.css("fill",this.__productivityColorLastCycle):(this.__elementInnerText1.css("fill",this.__productivityColor),this.__elementInnerText2.css("fill",this.__productivityColorLastCycle)),this.__elementSvgDefs[0].innerHTML="",void 0!==this.__colorGradient&&void 0!==this.__productivityColor&&void 0!==this.__productivityColorLastCycle&&(this.CreateRadialGradient(this.hexToRgbA(this.__productivityColor),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"Prod"),this.CreateRadialGradient(this.hexToRgbA(this.__productivityColorLastCycle),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"ProdLast"),this.__elementProductivity.css("stroke",this.__productivityColor),this.__elementLastProductivity.css("stroke",this.__productivityColorLastCycle),this.__elementLegendRectProd.css("fill","url(#"+this.__radialGrad+this.__secureId+"Prod)"),this.__elementLegendRectProdLast.css("fill","url(#"+this.__radialGrad+this.__secureId+"ProdLast)"));var t=this.__colorGradient/100;t<0&&(t*=-1),t>1&&(t=1),this.CreateRadialGradient("rgba(255,255,255,1)",this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId,0,t,0),this.__elementStrokeCircleOuter.css("fill","url(#"+this.__radialGrad+this.__secureId+")")}__processChart(){null!==this.__showProductivity&&void 0!==this.__showProductivity&&void 0!==this.__productivity&&void 0!==this.__productivityLastCycle&&null!==this.__productivity&&null!==this.__productivityLastCycle&&this.DrawChartProductivity(this.__elementProductivity[0],this.__elementLastProductivity[0],this.__elementInnerText,this.__showProductivity,this.__productivity,this.__productivityLastCycle)}__processLegend(){this.__elementLegendText[0].innerHTML=this.__lastCycleAlias,this.__elementLegendText[1].innerHTML=this.__currentCycleAlias}DrawChartProductivity(t,e,i,s,r,o){if(r>100)t.setAttribute("d","M135,120 m-90,0 a90,90 0 1,0 180,0 a90,90 0 1,0 -180,0");else{var _=r/100*360;t.setAttribute("d",this.describeArc(135,120,90,0,_))}if(o>100)e.setAttribute("d","M135,120 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0");else{var l=o/100*360;e.setAttribute("d",this.describeArc(135,120,70,0,l))}var c="";i[0].setAttribute("y","120px"),i[0].style.visibility="Visible",i[1].style.visibility="Collapse","Productivity"===s?(c=r<10?r.toFixed(1)+"%":r.toFixed(0)+"%",i[0].innerHTML=c):"ProductivityLastCycle"===s?(c=o<10?o.toFixed(1)+"%":o.toFixed(0)+"%",i[0].innerHTML=c):"Both"===s?(c=o<10?o.toFixed(1)+"%":o.toFixed(0)+"%",i[1].innerHTML=c,c=r<10?r.toFixed(1)+"%":r.toFixed(0)+"%",i[0].setAttribute("y","110px"),i[1].style.visibility="Visible",i[0].innerHTML=c):i.css("visibility","Collapse");for(var n=55,a=20;n>55;){var d=document.createElement("canvas").getContext("2d");d.font="bold "+a.toString()+"px sans-serif",n=d.measureText(c).width,a-=2}i[0].style.fontSize=a,i[1].style.fontSize=a}}e.ProductivityDiagnosis=i}(i=e.Analytics||(e.Analytics={})),e.registerEx("ProductivityDiagnosis","TcHmi.Controls.Analytics",i.ProductivityDiagnosis)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));