var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.Analytics.AnalyticsControl{constructor(e,t,i){super(e,t,i),this.__areaColor="white",this.__componentColor="lightgray",this.__machineAreaWidth=200,this.__dataSources=null,this.__isMaximized=!0,this.__isMinOrMaximizing=!1,this.__resizeStack=0,this.__selectedMachineChanging=!1,this.__htmlCodeTv1='<li><span class="tchmi-ds-overview-tv-caret tchmi-analytics-text tchmi-analytics-component-1"><svg class="tchmi-ds-overview-tv-arrow tchmi-ds-overview-tv-arrow-active" height="8" width="4.5"><line x1="0.5" y1="0.5" x2="3.75" y2="3.75" style="stroke-width:1" /><line x1="3.75" y1="3.25" x2="0.5" y2="6.5" style="stroke-width:1" />></svg>',this.__htmlCodeTv2='</span><div class="tchmi-ds-overview-tv-box"><div class="tchmi-ds-overview-tv-collapsible-box tchmi-ds-overview-tv-collapsible-box-active">',this.__htmlCodeRecord1='<div class="tchmi-ds-overview-tv-record" data-record-id="',this.__htmlCodeRecord2='"><p class="tchmi-ds-overview-tv-record-title tchmi-analytics-text">',this.__htmlCodeRecord3='</p><p class="tchmi-ds-overview-tv-record-range tchmi-analytics-text">',this.__htmlCodeRecord4="</p></div>",this.__htmlCodeRecordSeparator='<hr style="width:auto;height:1px;border-width:0;color:gray;background-color:gray" />',this.__htmlCodeTv3=" </div></div></li>",this.__transDuration=.6,this.__onResized=()=>(e,t)=>{super.__getScaleFactor();if(0==this.__hasLicense)return;let i=0;this.__isMinOrMaximizing&&(i=1e3*this.__transDuration),++this.__resizeStack;let s=this.__resizeStack;setTimeout(()=>{if(s<this.__resizeStack&&this.__resizeStack<10)return;let e=this.__elThis[0].getBoundingClientRect(),t=e.width;e.height;if(this.__isMaximized&&(t>830?(this.__elContent.css("flex-direction","row"),this.__elMachineArea.css("width",this.__machineAreaWidth),this.__elMachineArea.css("margin-bottom","0px"),this.__elMainContent.css("padding-left","10px"),this.__elMachineArea.css("width",this.__machineAreaWidth+"px"),this.__elTreeViewArea.css("width","300px"),this.__elHistData.css("flex-flow","row")):(this.__elContent.css("flex-direction","column"),this.__elMachineArea.css("margin-bottom","10px"),this.__elMainContent.css("padding-left","0px"),this.__elMachineArea.css("width","100%"),t<600?(this.__elHistData.css("flex-flow","column"),t<400?this.__elTreeViewArea.css("width",t-30+"px"):this.__elTreeViewArea.css("width","370px")):(this.__elHistData.css("flex-flow","row"),this.__elTreeViewArea.css("width","300px")))),t<400){let e=1-.00275*(400-t);this.__elBox.css("transform","scale("+e+")")}else this.__elBox.css("transform","scale(1)")},i)},this.__onCalendarClosed=()=>(e,t)=>{this.__drawSlider(void 0,void 0,this.__selectedRecord)},this.__ongoingTVRefreshes=0}__previnit(){if(super.__previnit(),0==this.__hasLicense)return;this.__defaultWidth=630,this.__defaultHeight=630,this.__elAreas=this.__elementTemplateRoot.find(".tchmi-ds-overview-area"),this.__elContent=this.__elementTemplateRoot.find(".tchmi-ds-overview-content"),this.__elMainContent=this.__elementTemplateRoot.find(".tchmi-ds-overview-main-content"),this.__elMinimize=this.__elementTemplateRoot.find(".tchmi-ds-overview-minimize"),this.__elMaximize=this.__elementTemplateRoot.find(".tchmi-ds-overview-maximize"),this.__elWrongConfig=this.__elementTemplateRoot.find(".tchmi-ds-overview-wrong-config"),this.__elMachineSwitched=this.__elementTemplateRoot.find(".tchmi-ds-overview-machine-switched"),this.__elMachineArea=this.__elementTemplateRoot.find(".tchmi-ds-overview-machines-area"),this.__elMachineBox=this.__elementTemplateRoot.find(".tchmi-ds-overview-machine-box"),this.__elSelectedMachine=this.__elementTemplateRoot.find(".tchmi-ds-overview-selected-machine"),this.__elActivateChangesButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-activate-changes"),this.__liveHistContainer=this.__elementTemplateRoot.find(".tchmi-ds-overview-live-historical"),this.__elLiveCheckboxContainer=this.__elementTemplateRoot.find(".tchmi-ds-overview-switch"),this.__elLiveCheckbox=this.__elementTemplateRoot.find(".tchmi-ds-overview-switch-checkbox"),this.__elHistData=this.__elementTemplateRoot.find(".tchmi-ds-overview-historical-data"),this.__elLiveHistSliderText=this.__elementTemplateRoot.find(".tchmi-ds-overview-slider-text"),this.__elTreeViewArea=this.__elementTemplateRoot.find(".tchmi-ds-overview-tv-records-area"),this.__elTreeView=this.__elementTemplateRoot.find(".tchmi-ds-overview-tv-ul"),this.__elTvCarets=$([]),this.__elRecords=$([]),this.__elRefreshRecords=this.__elementTemplateRoot.find(".tchmi-ds-overview-refresh-records"),this.__elBox=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-box"),this.__elRecordName=this.__elBox.find(".tchmi-ds-overview-record-name"),this.__elSlider=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider"),this.__elSliderContainer=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-container"),this.__elSelStart=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-sel-start"),this.__elHistCurrent=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-sel-cur"),this.__elSelEnd=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-sel-end"),this.__elTrack=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-track"),this.__elThumbs=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-thumb"),this.__elSliderControls=this.__elementTemplateRoot.find(".tchmi-analytics-slider-controls"),this.__elCancelButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-button-cancel"),this.__elStartButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-button-start"),this.__elResetButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-record-button-reset"),this.__elTimeMarker=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-marker"),this.__elTimeMarkerProgress=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-marker-progress"),this.__elTrackText=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-text"),this.__elIntervalTime=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-interval-text"),this.__elTimeNames=this.__elementTemplateRoot.find(".tchmi-ds-overview-time-name"),this.__elIntervalName=this.__elementTemplateRoot.find(".tchmi-analytics-range-slider-interval-label"),this.__elMinimizeName=this.__elementTemplateRoot.find(".tchmi-ds-overview-minimize-text"),this.__elMaximizeName=this.__elementTemplateRoot.find(".tchmi-ds-overview-maximize-text"),this.__elThis.addClass("tchmi-ds-overview-minmaximize-trans"),this.__initLiveHistSwitchEvent(),this.__initSlider();let e=document.createElement("div");e.classList.add("tchmi-ds-overview-selected-machine-global","tchmi-analytics-text"),document.body.appendChild(e),this.__elSelectedMachineGlobal=$(e),this.__config=new n(this.__elActivateChangesButton,this.__elSelectedMachine,this.__elSelectedMachineGlobal)}__init(){super.__init(),this.__drawSlider(),this.__initCalendar()}__initCalendar(){this.__ctrlCalendar=e.ControlFactory.createEx("TcHmi.Controls.Analytics.Calendar",this.__id+"_Calendar",null,this),void 0!==this.__ctrlCalendar?(this.__elementTemplateRoot.append(this.__ctrlCalendar.getElement()),this.__calendarClosedDestroyEvent=e.EventProvider.register(this.__id+"_Calendar.onClosed",this.__onCalendarClosed())):this.Log("Could not create Calendar Control.")}__attach(){super.__attach(),this.__elActivateChangesButton[0].addEventListener("click",this.__activateChanges()),this.__elMinimize[0].addEventListener("click",this.__minimizeClicked()),this.__elMaximize[0].addEventListener("click",this.__maximizeClicked()),this.__elSelStart[0].addEventListener("click",this.__openCalendarPopUp(!0)),this.__elSelEnd[0].addEventListener("click",this.__openCalendarPopUp(!1)),this.__elRefreshRecords[0].addEventListener("click",this.__refreshRecordsClicked())}__detach(){super.__detach(),this.__calendarClosedDestroyEvent&&(this.__calendarClosedDestroyEvent(),this.__calendarClosedDestroyEvent=void 0),this.__elActivateChangesButton[0].removeEventListener("click",this.__activateChanges()),this.__elMinimize[0].removeEventListener("click",this.__minimizeClicked()),this.__elMaximize[0].removeEventListener("click",this.__maximizeClicked()),this.__elLiveCheckbox.off("change")}destroy(){this.__keepAlive||(this.__ctrlCalendar.destroy(),super.destroy())}setSelectedStartTime(t){var i=t;null===i&&(i=this.getAttributeDefaultValueInternal("SelectedStartTime")),JSON.stringify(i)!==JSON.stringify(this.__selectedStartTime)&&(this.__selectedStartTime=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getSelectedStartTime"]),this.__processSelectedStartTime())}getSelectedStartTime(){return this.__selectedStartTime}__processSelectedStartTime(){}setSelectedEndTime(t){var i=t;null===i&&(i=this.getAttributeDefaultValueInternal("SelectedEndTime")),JSON.stringify(i)!==JSON.stringify(this.__selectedEndTime)&&(this.__selectedEndTime=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getSelectedEndTime"]),this.__processSelectedEndTime())}getSelectedEndTime(){return this.__selectedEndTime}__processSelectedEndTime(){}setStart(t){var i=t;null===i&&(i=this.getAttributeDefaultValueInternal("Start")),i!==this.__start&&(this.__start=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStart"]),this.__processStart())}getStart(){return this.__start}__processStart(){}setPause(t){var i=t;null===i&&(i=this.getAttributeDefaultValueInternal("Pause")),i!==this.__pause&&(this.__pause=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getPause"]),this.__processPause())}getPause(){return this.__pause}__processPause(){}setStop(t){var i=t;null===i&&(i=this.getAttributeDefaultValueInternal("Stop")),i!==this.__stop&&(this.__stop=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStop"]),this.__processStop())}getStop(){return this.__stop}__processStop(){}setRefreshRecords(t){var i=t;null===i&&(i=this.getAttributeDefaultValueInternal("RefreshRecords")),i!==this.__refreshRecords&&(this.__refreshRecords=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRefreshRecords"]),this.__processRefreshRecords())}getRefreshRecords(){return this.__refreshRecords}__processRefreshRecords(){}setActiveMachineIndex(i){var s=i;if(null===s&&(s=this.getAttributeDefaultValueInternal("ActiveMachineIndex")),s===this.__config.symbolActiveMachineIndex)return;this.__config.symbolActiveMachineIndex=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActiveMachineIndex"]);let a=-1,r=-1;this.__config.symbolActiveMachineIndex.watch(i=>{if(i.error!==e.Errors.NONE){var s=t.Utilities.format(this.__notReadPropAlias,["ActiveMachineIndex",this.__id]);console.error(s)}else a==i.value?this.__config.symbolActiveMachineIndex.readEx(t=>{i.error===e.Errors.NONE&&i.value===t.value&&this.__processActiveMachineIndex(i.value)}):this.__processActiveMachineIndex(i.value),a=r,r=i.value})}getActiveMachineIndex(){return this.__config.symbolActiveMachineIndex}__processActiveMachineIndex(e){this.setSelectedMachineIndex(e,!1)}setActiveStreamIndex(i){var s=i;if(null===s&&(s=this.getAttributeDefaultValueInternal("ActiveStreamIndex")),s===this.__config.symbolActiveStreamIndex)return;this.__config.symbolActiveStreamIndex=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActiveStreamIndex"]);let a=-1,r=-1;this.__config.symbolActiveStreamIndex.watch(i=>{if(i.error!==e.Errors.NONE){var s=t.Utilities.format(this.__notReadPropAlias,["ActiveStreamIndex",this.__id]);console.error(s)}else a==i.value?this.__config.symbolActiveStreamIndex.readEx(t=>{i.error===e.Errors.NONE&&i.value===t.value&&this.__processActiveStreamIndex(i.value)}):this.__processActiveStreamIndex(i.value),a=r,r=i.value})}getActiveStreamIndex(){return this.__config.symbolActiveStreamIndex}__processActiveStreamIndex(e){this.__config.setActiveStreamIndex(e,!1)}setActiveRecordIndex(i){var s=i;if(null===s&&(s=this.getAttributeDefaultValueInternal("ActiveRecordIndex")),s===this.__config.symbolActiveRecordIndex)return;this.__config.symbolActiveRecordIndex=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActiveRecordIndex"]);let a=-1,r=-1;this.__config.symbolActiveRecordIndex.watch(i=>{if(i.error!==e.Errors.NONE){var s=t.Utilities.format(this.__notReadPropAlias,["ActiveRecordIndex",this.__id]);console.error(s)}else a==i.value?this.__config.symbolActiveRecordIndex.readEx(t=>{i.error===e.Errors.NONE&&i.value===t.value&&this.__processActiveRecordIndex(i.value)}):this.__processActiveRecordIndex(i.value),a=r,r=i.value})}getActiveRecordIndex(){return this.__config.symbolActiveRecordIndex}__processActiveRecordIndex(e){this.setSelectedRecordIndex(e,!1)}setHistData(i){var s=i;null===s&&(s=this.getAttributeDefaultValueInternal("HistData")),s!==this.__config.symbolHistorical&&(this.__config.symbolHistorical=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getHistData"]),this.__config.symbolHistorical.watch(i=>{if(i.error!==e.Errors.NONE){var s=t.Utilities.format(this.__notReadPropAlias,["HistData",this.__id]);console.error(s)}else this.__config.symbolHistorical.readEx(t=>{i.error===e.Errors.NONE&&i.value===t.value&&this.__processHistData(i.value)})}))}getHistData(){return this.__config.symbolHistorical}__processHistData(e){this.setIsLive(!e,!1)}setMinimizedWidth(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedWidth")),i!==this.__minimizedWidth&&(this.__minimizedWidth=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinimizedWidth"]),this.__processMinimizedWidth())}getMinimizedWidth(){return this.__minimizedWidth}__processMinimizedWidth(){this.__isMaximized||this.setWidthInternal(this.__minimizedWidth)}setMinimizedWidthUnit(t){let i=e.ValueConverter.toDimensionUnit(t);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedWidthUnit")),i!==this.__minimizedWidthUnit&&(this.__minimizedWidthUnit=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinimizedWidthUnit"]),this.__processMinimizedWidthUnit())}getMinimizedWidthUnit(){return this.__minimizedWidthUnit}__processMinimizedWidthUnit(){this.__isMaximized||this.setWidthUnitInternal(this.__minimizedWidthUnit)}setMinimizedHeight(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedHeight")),i!==this.__minimizedHeight&&(this.__minimizedHeight=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinimizedHeight"]),this.__processMinimizedHeight())}getMinimizedHeight(){return this.__minimizedHeight}__processMinimizedHeight(){this.__isMaximized||this.setHeightInternal(this.__minimizedHeight)}setMinimizedHeightUnit(t){let i=e.ValueConverter.toDimensionUnit(t);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedHeightUnit")),i!==this.__minimizedHeightUnit&&(this.__minimizedHeightUnit=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinimizedHeightUnit"]),this.__processMinimizedHeightUnit())}getMinimizedHeightUnit(){return this.__minimizedHeightUnit}__processMinimizedHeightUnit(){this.__isMaximized||this.setHeightUnitInternal(this.__minimizedHeightUnit)}setDataSources(t){var i=e.ValueConverter.toObject(t);if(null===i&&(i=this.getAttributeDefaultValueInternal("DataSources")),i===this.__dataSources)return;let s=this.__dataSources;this.__dataSources=this.__assignDataSourcesTypes(i),e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDataSources"]),this.__processDataSources(s)}getDataSources(){return this.__dataSources}__processDataSources(e){null==this.__dataSources||0===this.__dataSources.length?(this.__elContent.css("display","none"),this.__elWrongConfig.css("display","flex")):(this.__elWrongConfig.css("display","none"),this.__elContent.css("display","flex"),this.__processMachineAreaLength(),this.__significantMachineDataChanged(e)&&(this.__reinitElements(),this.__initTreeViewRecords()),this.setSelectedMachineIndex(this.__config.getActiveMachineIndex()),this.setSelectedRecordIndex(this.__config.getActiveRecordIndex()),null!=this.__selectedMachine&&this.__updateIsHistAnalysing(),this.__config.setDataSources(this.__dataSources))}__processHistCurrentTime(){let e=this.__selectedRecord;if(e.nID!==this.__selectedMachine.aStreams[0].stHist.nCurrentRecordID)return void this.__elHistCurrent.html("-");let t=this.__selectedMachine.aStreams[0].stHist.dtCurrentTimestamp,i=e.dtRecordStart.getTime(),s=e.dtRecordEnd.getTime(),a=t.getTime();i-1728e5>a||s+1728e5<a?this.__elHistCurrent.html("-"):this.__elHistCurrent.html(t.toString(!0,!1));var r=e.getMarkerProgress(this.__selectedMachine.aStreams[0].stHist.dtCurrentTimestamp);let n=r.progress;var l;n<0?(n=0,l="< 0%"):n>100?(n=100,l="> 100%"):l=n.toFixed(0)+"%",this.__elTimeMarkerProgress.html(l),this.__elTimeMarker.css("left",r.left)}__processShowTitle(){}__processColor(){super.__processColor(),this.__elementsText=this.__elementTemplateRoot.find(".tchmi-analytics-text"),this.__elAreas=this.__elementTemplateRoot.find(".tchmi-ds-overview-area"),this.__elSelectedMachineGlobal.css("color",this.__fontColor),this.__elAreas.css("background-color",this.__areaColor),this.__isDarkTheme?(this.__elRefreshRecords.addClass("tchmi-ds-overview-refresh-records-dark-theme"),this.__elAreas.css("background-color",this.__colorDarkArea),null==this.__borderWidth&&this.__elThis.css("border","1px solid rgba(255,255,255,0.4)")):(this.__elRefreshRecords.removeClass("tchmi-ds-overview-refresh-records-dark-theme"),this.__elAreas.css("background-color",this.__controlChartColor),null==this.__borderWidth&&this.__elThis.css("border","none")),this.__elRecords.css("border-left-color",this.__controlColorLightPlus),this.__elMaximize.css("stroke",this.__fontColor),this.__elMinimize.css("stroke",this.__fontColor),this.__elTvCarets.css("stroke",this.__fontColor),this.__elTimeMarker.css("stroke",this.__fontColor),this.__elementsText.css("color",this.__fontColor)}setWidthInternal(e){this.__widthInternal=e,super.setWidth(e)}__processWidth(e){super.__processWidth(e),this.__width!==this.__widthInternal&&(this.__maximizedWidth=this.__width,this.__isMaximized?this.setWidthInternal(this.__maximizedWidth):this.setWidthInternal(this.__minimizedWidth))}setWidthUnitInternal(e){this.__widthUnitInternal=e,super.setWidthUnit(e)}__processWidthUnit(){super.__processWidthUnit(),this.__widthUnit!==this.__widthUnitInternal&&(this.__maximizedWidthUnit=this.__widthUnit,this.__isMaximized?this.setWidthUnitInternal(this.__maximizedWidthUnit):this.setWidthUnitInternal(this.__minimizedWidthUnit))}setHeightInternal(e){this.__heightInternal=e,super.setHeight(e)}__processHeight(e){super.__processHeight(e),this.__height!==this.__heightInternal&&(this.__maximizedHeight=this.__height,this.__isMaximized?this.setHeightInternal(this.__maximizedHeight):this.setHeightInternal(this.__minimizedHeight))}setHeightUnitInternal(e){this.__heightUnitInternal=e,super.setHeightUnit(e)}__processHeightUnit(){super.__processHeightUnit(),this.__heightUnit!==this.__heightUnitInternal&&(this.__maximizedHeightUnit=this.__heightUnit,this.__isMaximized?this.setHeightUnitInternal(this.__maximizedHeightUnit):this.setHeightUnitInternal(this.__minimizedHeightUnit))}setSelectedMachineIndex(e,t=!0){null!=this.__dataSources?(this.__elMachines.removeClass("tchmi-ds-overview-machine-selected"),$(this.__elMachines[e]).addClass("tchmi-ds-overview-machine-selected"),this.setSelectedMachine(this.__dataSources[e],t)):(this.__config.setActiveMachineIndex(e,t),this.setSelectedRecordIndex(this.__config.getActiveRecordIndex(),!1))}setSelectedMachine(e,t=!0){if(null==this.__selectedMachine||this.__selectedMachine.nID!=e.nID){if(this.__selectedMachine=e,null==e)return void this.__elSelectedMachine.html("No machine selected");this.__selectedMachineChanging=!0,this.__elSelectedMachine.html(this.__selectedMachine.sDisplayName),this.__config.setActiveMachineIndex(this.__dataSources.indexOf(e),t),this.__config.activeConfig.nActiveMachineIndex===this.__config.getActiveMachineIndex()&&this.setIsLive(!this.__config.activeConfig.bHistorical),0==this.__selectedMachine.aStreams[0].stHist.nRecordCount?(this.setIsLive(!0,!0,!0),this.__elLiveCheckbox.prop("disabled",!0),this.__elLiveCheckboxContainer.addClass("tchmi-ds-overview-disabled")):(this.__initTreeViewRecords(),0==this.__selectedMachine.aStreams[0].stLive.sDisplayName.length?(this.setIsLive(!1,!0,!0),this.__elLiveCheckbox.prop("disabled",!0),this.__elLiveCheckboxContainer.addClass("tchmi-ds-overview-disabled")):(this.__elLiveCheckbox.prop("disabled",!1),this.__elLiveCheckboxContainer.removeClass("tchmi-ds-overview-disabled")));let i=this.__selectedMachine.aStreams[0].stHist.nCurrentRecordID,s=this.__selectedMachine.aStreams[0].stHist.aRecords.find(e=>e.nID===i);null!=s&&this.__validRecord(s)?this.setSelectedRecordIndex(this.__selectedMachine.aStreams[0].stHist.aRecords.indexOf(s)):this.setSelectedRecordIndex(0),this.__processColor(),this.__selectedMachineChanging=!1}else this.__selectedMachine=e}setIsLive(e,t=!0,i=!1){if(!0===e&&0===this.__selectedMachine.aStreams[0].stLive.sDisplayName.length)return;if(!1===e&&0===this.__selectedMachine.aStreams[0].stHist.nRecordCount)return;this.__isLive=e,this.__elLiveCheckbox.is(":checked")!==this.__isLive&&this.__elLiveCheckbox.prop("checked",this.__isLive),this.__isLive?this.__elHistData.css("display","none"):(this.__elHistData.css("display","flex"),this.__updateIsHistAnalysing(!0)),this.__config.setHistorical(!e,t,i)}__updateIsHistAnalysing(e=!1){this.__selectedMachine.aStreams[0].stHist;if(this.__validRecord(this.__selectedRecord)){let t=this.__selectedRecord.getState(this.__selectedMachine.aStreams[0].stHist.dtCurrentTimestamp,this.__selectedMachine.aStreams[0].stHist.nCurrentRecordID);this.__isHistAnalysing===a.STARTING&&t!==a.RUNNING&&t!==a.ENDED&&(t=a.STARTING),this.__isHistAnalysing!==a.ENDING||t!==a.RUNNING&&t!==a.ENDED||(t=a.ENDING),this.setIsHistAnalysing(t,e),this.__processHistCurrentTime()}else this.setIsHistAnalysing(a.IDLE,e)}setIsHistAnalysing(e,t=!1){(e!=this.__isHistAnalysing||t)&&(this.__isHistAnalysing=e,this.__isHistAnalysing===a.STARTING||this.__isHistAnalysing===a.RUNNING?(this.__elResetButton.addClass("tchmi-ds-overview-record-button-reset-disabled"),this.__elThumbs.addClass("tchmi-analytics-range-slider-thumb-disabled"),this.__elSelStart.addClass("tchmi-ds-overview-record-textarea-disabled"),this.__elSelEnd.addClass("tchmi-ds-overview-record-textarea-disabled"),this.__isHistAnalysing===a.RUNNING&&(this.__elStartButton.addClass("tchmi-ds-overview-record-button-start-active"),this.__elStartButton.removeClass("tchmi-ds-overview-record-button-start-starting"),this.__elTimeMarker.css("display","block"),this.__getStreamState()!==r.eReceiveData_Pause?this.__elStartButton.addClass("tchmi-ds-overview-record-button-pause"):this.__elStartButton.removeClass("tchmi-ds-overview-record-button-pause"))):(this.__elResetButton.removeClass("tchmi-ds-overview-record-button-reset-disabled"),this.__elThumbs.removeClass("tchmi-analytics-range-slider-thumb-disabled"),this.__elSelStart.removeClass("tchmi-ds-overview-record-textarea-disabled"),this.__elSelEnd.removeClass("tchmi-ds-overview-record-textarea-disabled"),this.__elStartButton.removeClass("tchmi-ds-overview-record-button-start-active"),this.__elStartButton.removeClass("tchmi-ds-overview-record-button-pause"),this.__elStartButton.removeClass("tchmi-ds-overview-record-button-start-starting"),this.__isHistAnalysing===a.ENDED?this.__elTimeMarker.css("display","block"):this.__elTimeMarker.css("display","none")))}setSelectedRecordIndex(e,t=!0){if(this.__config.hasChangesExceptHistorical()&&!1===t)this.__config.setActiveRecordIndex(e,t);else if(null!=this.__selectedMachine){this.__elRecords.removeClass("tchmi-ds-overview-tv-record-active");let i=this.__selectedMachine.aStreams[0].stHist.aRecords[e].nID;$(this.__elRecords.toArray().find(e=>e.dataset.recordId===i.toString())).addClass("tchmi-ds-overview-tv-record-active"),this.setSelectedRecord(this.__selectedMachine.aStreams[0].stHist.aRecords[e],t)}else this.__config.setActiveRecordIndex(e,t)}setSelectedRecord(e,t=!0){if(t&&void 0!==this.__selectedRecord&&this.__selectedRecord.isEqual(e))return;let i=this.__selectedRecord;if(this.__isHistAnalysing===a.STARTING&&i.nID!=e.nID&&this.setIsHistAnalysing(a.IDLE),this.__selectedRecord=Object.assign(new s,e),this.__validRecord(this.__selectedRecord)){let t=this.__selectedRecord.dtRecordStart,s=this.__selectedRecord.dtRecordEnd;null!=i&&i.nID===this.__selectedRecord.nID&&i.dtSelectedRangeStart.isInBetween(t,s)&&i.dtSelectedRangeEnd.isInBetween(t,s)?(this.__selectedRecord.dtSelectedRangeStart=i.dtSelectedRangeStart,this.__selectedRecord.dtSelectedRangeEnd=i.dtSelectedRangeEnd):this.__selectedRecord.dtSelectedRangeStart.isInBetween(t,s)&&this.__selectedRecord.dtSelectedRangeEnd.isInBetween(t,s)||(this.__selectedRecord.dtSelectedRangeStart=e.dtRecordStart,this.__selectedRecord.dtSelectedRangeEnd=e.dtRecordEnd),this.__updateIsHistAnalysing(),this.__updateHistControl()}this.__config.setActiveRecordIndex(this.__selectedMachine.aStreams[0].stHist.aRecords.indexOf(e),t)}__getStreamState(){return this.__isLive?this.__selectedMachine.aStreams[0].stLive.eState:this.__selectedMachine.aStreams[0].stHist.eState}__assignDataSourcesTypes(e){for(let i=0;i<e.length;++i)for(let s=0;s<e[i].aStreams.length;++s){let a=e[i].aStreams[s];a.stHist.dtCurrentTimestamp=Object.assign(new t.DCTimestruct,a.stHist.dtCurrentTimestamp);for(let e=0;e<a.stHist.aRecords.length;++e){let i=a.stHist.aRecords[e];this.__validRecord(i)&&(i.dtRecordStart=Object.assign(new t.DCTimestruct,i.dtRecordStart),i.dtRecordEnd=Object.assign(new t.DCTimestruct,i.dtRecordEnd),i.dtSelectedRangeStart=Object.assign(new t.DCTimestruct,i.dtSelectedRangeStart),i.dtSelectedRangeEnd=Object.assign(new t.DCTimestruct,i.dtSelectedRangeEnd))}null!=a.stLive&&(a.stLive.dtLiveTimestamp=Object.assign(new t.DCTimestruct,a.stLive.dtLiveTimestamp))}return e}__significantMachineDataChanged(e){if(null==e||this.__dataSources.length!==e.length)return!0;for(let t=0;t<this.__dataSources.length;++t){let i=this.__dataSources[t],s=e[t];if(i.nID!==s.nID||i.aStreams.length!==s.aStreams.length)return!0;for(let e=0;e<i.aStreams.length&&!(e>0);++e){let t=i.aStreams[e],a=s.aStreams[e];if(t.sStreamSystemID.toString()!==a.sStreamSystemID.toString())return!0;for(let e=0;e<t.stHist.aRecords.length;++e){let i=t.stHist.aRecords[e],s=a.stHist.aRecords[e],r=this.__validRecord(i),n=this.__validRecord(s);if(!r&&!n)break;if(r!==n)return!0}}}return!1}__processMachineAreaLength(){let e=0;for(let t=0;t<this.__dataSources.length;++t)e<this.__dataSources[t].sDisplayName.length&&(e=this.__dataSources[t].sDisplayName.length);let t=100+240*e/36;t>340?t=340:t<200&&(t=200),t!=this.__machineAreaWidth&&(this.__machineAreaWidth=t,this.__isMaximized&&this.__elMachineArea.css("width",this.__machineAreaWidth+"px"))}__isToday(e,i){return t.DateExt.getTotalDays(i.getTime())==t.DateExt.getTotalDays(e.getTime())}__isYesterday(e,i){return t.DateExt.getTotalDays(i.getTime())-1==t.DateExt.getTotalDays(e.getTime())}__isThisWeek(e,i){let s=i.getDay();return 0==s&&(s=7),t.DateExt.getTotalDays(i.getTime())-t.DateExt.getTotalDays(e.getTime())<s}__isLastWeek(e,i){let s=i.getDay();return 0==s&&(s=7),t.DateExt.getTotalDays(i.getTime())-t.DateExt.getTotalDays(e.getTime())-7<s}__isThisMonth(e,t){return t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()}__isLastMonth(e,i){let s=i.getMonth();return 0==s&&(s=12),t.DateExt.getTotalDays(i.getTime())-t.DateExt.getTotalDays(e.getTime())<32&&s-1==e.getMonth()}__isLast6Months(e,t){return t.getMonth()-5<=e.getMonth()&&t.getFullYear()==e.getFullYear()}__isYearsAgo(e,t,i){return i.getFullYear()-e==t.getFullYear()}__addTreeCaretAndRecords(e){if(0==e.Records.length)return"";e.Records.sort((function(e,t){return t.dtRecordEnd.toDate().getTime()-e.dtRecordEnd.toDate().getTime()}));let t=this.__htmlCodeTv1+e.Title+this.__htmlCodeTv2;for(let i=0;i<e.Records.length;++i){0!=i&&(t+=this.__htmlCodeRecordSeparator);let s=e.Records[i],a=this.__htmlCodeRecord1+s.nID+this.__htmlCodeRecord2+s.sDisplayName+"("+this.__getRecRoundedIntervalTime(s)+")"+this.__htmlCodeRecord3;a+="["+s.dtRecordStart.toString()+", "+s.dtRecordEnd.toString()+"]"+this.__htmlCodeRecord4,t+=a}return t+=this.__htmlCodeTv3,t}__validRecord(e){return null!=e&&0!==e.nID}__getRecRoundedIntervalTime(e,i=!1){void 0!==e.nID&&(e=i?t.TimeSpan.fromDCTimestructs(e.dtSelectedRangeEnd,e.dtSelectedRangeStart):t.TimeSpan.fromDCTimestructs(e.dtRecordEnd,e.dtRecordStart));let s,a=e,r="";if(a.days>0)r=(a.days,"d"),s=a.days;else if(a.hours>0)r=(a.hours,"h"),s=a.hours;else if(a.minutes>0)r=(a.minutes,"m"),s=a.minutes;else{if(!(a.seconds>0))return"<1 s";r=(a.seconds,"s"),s=a.seconds}return">"+s.toString()+" "+r}__reinitElements(){this.__elMachineBox.html("");for(var e=0;e<this.__dataSources.length;++e)this.__elMachineBox.append('<hr style="width:auto;height:1px;border-width:0;background-color:rgba(190, 190, 190, 0.5)">'),this.__elMachineBox.append('<div class="tchmi-ds-overview-machine tchmi-analytics-component-1 tchmi-analytics-text">'+this.__dataSources[e].sDisplayName+"</div>");this.__elMachineBox.append('<hr style="width:auto;height:1px;border-width:0;background-color:rgba(190, 190, 190, 0.5)">'),this.__elMachines=this.__elementTemplateRoot.find(".tchmi-ds-overview-machine"),this.__config.setElMachines(this.__elMachines),this.__initMachineSideBarEvents(),this.setSelectedMachineIndex(this.__config.getActiveMachineIndex(),!1)}__initSlider(){var e=this,i={sliderWidth:300,range:[0,1e3],outputWidth:30,thumbWidth:24,thumbHeight:34,thumbBorderWidth:1,trackHeight:28,pos:[0,0],relPos:[0,1e3],xOffset:10},s=i.range[1]-i.range[0],n=i.sliderWidth/s,l=(i.sliderWidth,!1),_=!1;let h=-i.xOffset-i.thumbWidth;this.addEventListener(this.__elThumbs[0],"mousedown",(function(e){l=!0,t.Utilities.getPosition(this,e,h)}),!0);this.addEventListener(this.__elThumbs[1],"mousedown",(function(e){_=!0,t.Utilities.getPosition(this,e,h)}),!0);this.addEventListener(this.__elThumbs[0],"touchstart",(function(e){l=!0,t.Utilities.getPosition(this,e,h)}),!0);this.addEventListener(this.__elThumbs[1],"touchstart",(function(e){_=!0,t.Utilities.getPosition(this,e,h)}),!0);this.addEventListener(this.__elThumbs[0],"touchend",(function(e){l=!1}),!0);this.addEventListener(this.__elThumbs[1],"touchend",(function(e){_=!1}),!0);this.addEventListener(document,"mouseup",(function(e){l=!1,_=!1}),!1);this.addEventListener(this.__elBox[0],"mousemove",(function(i){if((l||_)&&e.__isHistAnalysing!==a.STARTING&&e.__isHistAnalysing!==a.RUNNING){if(e.__isHistAnalysing===a.ENDED){if(e.__config.hasChangesExceptHistorical())return e.__createPopup(e.__activateMachineAlertAlias),l=!1,void(_=!1);e.__stop.write(!0),e.setIsHistAnalysing(a.ENDING)}o(t.Utilities.getPosition(this,i,h),0)}}),!0);this.addEventListener(this.__elBox[0],"touchmove",(function(i){if((l||_)&&e.__isHistAnalysing!==a.STARTING&&e.__isHistAnalysing!==a.RUNNING){if(e.__isHistAnalysing===a.ENDED){if(e.__config.hasChangesExceptHistorical())return e.__createPopup(e.__activateMachineAlertAlias),l=!1,void(_=!1);e.__stop.write(!0),e.setIsHistAnalysing(a.ENDING)}o(t.Utilities.getPosition(this,i,h),0)}}),!0);this.addEventListener(this.__elStartButton[0],"click",(function(i){if(null==e.__start){let i=t.Utilities.format(e.__startNotMappedAlias,[e.__id]);console.error(i)}else{if(e.__config.hasChanges())return void e.__createPopup(e.__activateMachineAlertAlias);if(void 0===e.__selectedRecord)return void e.__createPopup(e.__noRecordsInitAlias);if(e.__isHistAnalysing===a.RUNNING){let t=e.__getStreamState();return void(e.__getStreamState()===r.eReceiveData?(e.__pause.write(!0),e.__elStartButton.removeClass("tchmi-ds-overview-record-button-pause")):t===r.eReceiveData_Pause&&(e.__start.write(!0),e.__elStartButton.addClass("tchmi-ds-overview-record-button-pause")))}e.__selectedStartTime.write(e.__selectedRecord.dtSelectedRangeStart),e.__selectedEndTime.write(e.__selectedRecord.dtSelectedRangeEnd),e.setIsHistAnalysing(a.STARTING),e.__start.write(!0),e.__elStartButton.addClass("tchmi-ds-overview-record-button-start-starting")}}),!1);this.addEventListener(this.__elCancelButton[0],"click",(function(t){e.__config.hasChanges()?e.__createPopup(e.__activateMachineAlertAlias):void 0!==e.__selectedRecord?(e.__isHistAnalysing===a.STARTING&&e.setIsHistAnalysing(a.IDLE),e.__stop.write(!0)):e.__createPopup(e.__noRecordsInitAlias)}),!1);function o(t,s){e.__elTimeMarker.css("display","none");var a=l?Math.round((t.x-s)/n)+i.range[0]:i.pos[0],r=_?Math.round((t.x-s)/n)+i.range[0]:i.pos[1];i.pos[0]=a,i.pos[1]=r,e.__drawSlider()}this.addEventListener(this.__elResetButton[0],"click",(function(t){e.__isHistAnalysing!==a.STARTING&&e.__isHistAnalysing!==a.RUNNING&&(e.__isHistAnalysing===a.ENDED&&e.__config.hasChangesExceptHistorical()?e.__createPopup(e.__activateMachineAlertAlias):e.__drawSlider(i.range[0],i.range[1]))}),!1);this.__drawSlider=function(a,r,h){let o,c;if(null==a&&null==r&&null==h)a=i.pos[0],r=i.pos[1],o=a+i.thumbWidth/2/n,c=r-i.thumbWidth/2/n;else{if(null!=h){let e=h,t=e.dtRecordEnd.getTime()-e.dtRecordStart.getTime();o=(e.dtSelectedRangeStart.getTime()-e.dtRecordStart.getTime())/t*s,c=(e.dtSelectedRangeEnd.getTime()-e.dtRecordStart.getTime())/t*s}else o=a,c=r;a=o-i.thumbWidth/2*n,r=c+i.thumbWidth/2*n}_||(o>=c?o=c:o<i.range[0]&&(o=i.range[0]),a=i.pos[0]=o-i.thumbWidth/2/n,e.__elThumbs[0].style.left=(a-i.range[0])*n-i.thumbWidth/2+"px"),l||(c<=o?c=o:c>i.range[1]&&(c=i.range[1]),r=i.pos[1]=c+i.thumbWidth/2/n,e.__elThumbs[1].style.left=(r-i.range[0])*n-i.thumbWidth/2+"px");let d=(c-o)*n,u=e.__selectedRecord;if(null!=u){let a=u.dtRecordEnd.getTime()-u.dtRecordStart.getTime(),r=u.dtRecordStart.getTime()+a*(o-i.range[0])/s,n=u.dtRecordStart.getTime()+a*(c-i.range[0])/s,l=e.__selectedRecord.dtSelectedRangeStart=t.DCTimestruct.fromTime(r),_=e.__selectedRecord.dtSelectedRangeEnd=t.DCTimestruct.fromTime(n),h=new t.TimeSpan(n-r);this.__elSelStart.val(l.toString(!0,!1)),this.__elSelEnd.val(_.toString(!0,!1)),this.__elIntervalTime.html(h.toString(!0,this.__dayAlias,!1)),e.__elTrackText.html(e.__getRecRoundedIntervalTime(e.__selectedRecord,!0))}e.__elTrackText[0].getBoundingClientRect().width>d-i.thumbWidth-5?e.__elTrackText.css("visibility","hidden"):e.__elTrackText.css("visibility","visible"),e.__elSlider.css("paddingLeft",(o-i.range[0])*n+"px"),e.__elSlider.css("paddingRight",(i.range[1]-c)*n+"px"),e.__elTrack.css("width",d+"px")},e.__elSliderContainer.css("margin-top",44-i.trackHeight/2),e.__elSlider.css("height",i.trackHeight+"px"),e.__elSlider.css("width",i.sliderWidth+"px"),e.__elSlider.css("margin","0px "+i.thumbWidth+"px"),e.__elThumbs.css("width",i.thumbWidth+"px"),e.__elThumbs.css("height",i.thumbHeight+"px"),e.__elThumbs.css("borderWidth",i.thumbBorderWidth+"px"),e.__elThumbs.css("top",-(i.thumbHeight/2-i.trackHeight/2)+"px"),e.__elThumbs[0].style.left=(i.pos[0]-i.range[0])*n-i.thumbWidth/2+"px",e.__elThumbs[1].style.left=(i.pos[1]-i.range[0])*n-i.thumbWidth/2+"px",this.__drawSlider(i.relPos[0],i.relPos[1])}__initTreeViewRecords(){if(null==this.__selectedMachine)return;let e=new Date;for(var t=e.getFullYear(),i={Title:this.__todayAlias,Records:[]},s={Title:this.__yesterdayAlias,Records:[]},a={Title:this.__thisWeekAlias,Records:[]},r={Title:this.__lastWeekAlias,Records:[]},n={Title:this.__thisMonthAlias,Records:[]},l={Title:this.__lastMonthAlias,Records:[]},_={Title:this.__lastSixMonthsAlias,Records:[]},h={Title:t.toString(),Records:[]},o={Title:(t-1).toString(),Records:[]},c={Title:(t-2).toString(),Records:[]},d={Title:(t-3).toString(),Records:[]},u={Title:(t-4).toString(),Records:[]},m={Title:(t-5).toString(),Records:[]},v={Title:"Before",Records:[]},g=this.__selectedMachine.aStreams[0].stHist.aRecords,A=0;A<g.length&&this.__validRecord(g[A]);A++){var R=g[A].dtRecordEnd.toDate();this.__isToday(R,e)?i.Records.push(g[A]):this.__isYesterday(R,e)?s.Records.push(g[A]):this.__isThisWeek(R,e)?a.Records.push(g[A]):this.__isLastWeek(R,e)?r.Records.push(g[A]):this.__isThisMonth(R,e)?n.Records.push(g[A]):this.__isLastMonth(R,e)?l.Records.push(g[A]):this.__isLast6Months(R,e)?_.Records.push(g[A]):this.__isYearsAgo(0,R,e)?h.Records.push(g[A]):this.__isYearsAgo(1,R,e)?o.Records.push(g[A]):this.__isYearsAgo(2,R,e)?c.Records.push(g[A]):this.__isYearsAgo(3,R,e)?d.Records.push(g[A]):this.__isYearsAgo(4,R,e)?u.Records.push(g[A]):this.__isYearsAgo(5,R,e)?m.Records.push(g[A]):v.Records.push(g[A])}let p=[];p.push(this.__addTreeCaretAndRecords(i)),p.push(this.__addTreeCaretAndRecords(s)),p.push(this.__addTreeCaretAndRecords(a)),p.push(this.__addTreeCaretAndRecords(r)),p.push(this.__addTreeCaretAndRecords(n)),p.push(this.__addTreeCaretAndRecords(l)),p.push(this.__addTreeCaretAndRecords(_)),p.push(this.__addTreeCaretAndRecords(h)),p.push(this.__addTreeCaretAndRecords(o)),p.push(this.__addTreeCaretAndRecords(c)),p.push(this.__addTreeCaretAndRecords(d)),p.push(this.__addTreeCaretAndRecords(u)),p.push(this.__addTreeCaretAndRecords(m)),p.push(this.__addTreeCaretAndRecords(v));let S="";for(let e=0;e<p.length;++e)""!==p[e]&&(S+=p[e]);this.__elTreeView.html(S),this.__initTreeViewEvents(),this.__processColor()}__initMachineSideBarEvents(){var e=this;this.__elMachines.click((function(){var t=$(this);if(!t.hasClass("tchmi-ds-overview-machine-selected")){let i=e.__elMachines.index(t);e.setSelectedMachineIndex(i)}}))}__initLiveHistSwitchEvent(){var e=this;this.__elLiveCheckbox.change((function(){$(this).is(":checked")?e.__selectedMachine.aStreams[0].stHist.nRecordCount>0&&e.__selectedMachine.aStreams[0].stLive.sDisplayName.length>0&&e.setIsLive(!0,!0,!0):e.__selectedMachine.aStreams[0].stHist.nRecordCount>0&&e.setIsLive(!1,!0,!0)}))}__initLiveHistSwitch(){null==this.__selectedMachine.aStreams[0].stLive&&"none"===this.__elLiveCheckbox.css("display")?this.__elHistData.css("display","inline-block"):null==this.__selectedMachine.aStreams[0].stHist&&this.__elLiveCheckbox.css("display")}__initTreeViewEvents(){let e=this;this.__elRecords=this.__elTreeView.find(".tchmi-ds-overview-tv-record"),this.__elRecords.click((function(){if(!t&&!e.__hasFullLicense)return void e.__createPopup(e.__recordTrialAlias);if(!(t||e.__selectedMachineChanging||e.__isHistAnalysing!==a.STARTING&&e.__isHistAnalysing!==a.RUNNING))return void e.__createPopup(e.__changeRecordAlertAlias);let i=this,s=e.__selectedMachine.aStreams[0].stHist.aRecords.find(e=>e.nID===parseInt(i.dataset.recordId));e.setSelectedRecordIndex(e.__selectedMachine.aStreams[0].stHist.aRecords.indexOf(s))}));let t=!0;if(this.__elRecords.length>0)if(this.__elRecords.length>this.__config.getActiveRecordIndex()){let e=this.__selectedMachine.aStreams[0].stHist.aRecords[this.__config.getActiveRecordIndex()].nID;this.__elRecords.filter((function(){return this.dataset.recordId===e.toString()})).trigger("click")}else $(this.__elRecords[0]).trigger("click");this.__elTvCarets=this.__elementTemplateRoot.find(".tchmi-ds-overview-tv-caret"),this.__elTvCarets.click((function(){$(this.parentElement).find(".tchmi-ds-overview-tv-arrow")[0].classList.toggle("tchmi-ds-overview-tv-arrow-active");let e=$(this.parentElement).find(".tchmi-ds-overview-tv-box"),t=$(this.parentElement).find(".tchmi-ds-overview-tv-collapsible-box");t.toggleClass("tchmi-ds-overview-tv-collapsible-box-active"),t[0].classList.contains("tchmi-ds-overview-tv-collapsible-box-active")?t.css("margin-top",0):t.css("margin-top",-e[0].getBoundingClientRect().height)})),t=!1}__updateHistControl(){null!=this.__selectedRecord?(this.__elRecordName.html(this.__selectedRecord.sDisplayName),this.__drawSlider(void 0,void 0,this.__selectedRecord),this.__processHistCurrentTime()):this.__elRecordName.html(this.__getRecordAlertAlias)}__minimizeClicked(){return()=>{this.__isMaximized=!1,this.__isMinOrMaximizing=!0,this.__hasFullLicense&&this.__activateChanges()(),this.__elThis.find(".tchmi-ds-overview-minmaximize-trans").addBack().css("transition-duration",this.__transDuration+"s"),this.__elementTemplateRoot.css("padding","0px"),this.__liveHistContainer.addClass("tchmi-ds-overview-transparent"),this.__elHistData.addClass("tchmi-ds-overview-transparent"),this.__elMachineArea.addClass("tchmi-ds-overview-transparent"),this.__elActivateChangesButton.css("opacity","0"),this.__elMinimize.css("opacity","0"),this.__elMinimize.css("visibility","collapse"),this.__elMaximize.css("opacity","1"),this.__elMaximize.css("visibility","visible"),this.__elMachineArea.css("width","0px"),this.__elMainContent.css("padding-left","0px"),this.__elTreeViewArea.css("width","0px"),this.__elTreeViewArea.css("height","0px"),this.__elTreeViewArea.css("border-right-width","0px"),this.__elRefreshRecords.css("opacity","0"),this.__elHistData.css("margin-top","0px"),this.setWidthInternal(this.__minimizedWidth),this.setWidthUnitInternal(this.__minimizedWidthUnit),this.setHeightInternal(this.__minimizedHeight),this.setHeightUnitInternal(this.__minimizedHeightUnit),setTimeout(()=>this.__isMinOrMaximizing=!1,1e3*this.__transDuration)}}__maximizeClicked(){return()=>{this.__isMaximized=!0,this.__isMinOrMaximizing=!0,this.__elTreeViewArea.css("visibility","visible"),this.__elThis.find(".tchmi-ds-overview-minmaximize-trans").addBack().css("transition-duration",this.__transDuration+"s"),this.__elementTemplateRoot.css("padding","5px"),this.__liveHistContainer.removeClass("tchmi-ds-overview-transparent"),this.__elHistData.removeClass("tchmi-ds-overview-transparent"),this.__elMachineArea.removeClass("tchmi-ds-overview-transparent"),this.__elActivateChangesButton.css("opacity",""),this.__elMinimize.css("opacity","1"),this.__elMinimize.css("visibility","visible"),this.__elMaximize.css("opacity","0"),this.__elMaximize.css("visibility","collapse"),this.__elMachineArea.css("width",this.__machineAreaWidth+"px"),this.__elMainContent.css("padding-left","10px"),this.__elTreeViewArea.css("width","300px"),this.__elTreeViewArea.css("height","100%"),this.__elTreeViewArea.css("border-right-width","1px"),this.__elRefreshRecords.css("opacity","1"),this.__elHistData.css("margin-top","10px"),this.setWidthInternal(this.__maximizedWidth),this.setWidthUnitInternal(this.__maximizedWidthUnit),this.setHeightInternal(this.__maximizedHeight),this.setHeightUnitInternal(this.__maximizedHeightUnit),setTimeout(()=>this.__isMinOrMaximizing=!1,1e3*this.__transDuration)}}__refreshRecordsClicked(){return()=>{this.__config.hasChanges()?this.__createPopup(this.__recListAlertAlias):this.__isHistAnalysing===a.STARTING||this.__isHistAnalysing===a.RUNNING?this.__createPopup(this.__refreshAlertAlias):this.__refreshRecords.write(!0)}}__activateChanges(){let e=this;return()=>{e.__hasFullLicense?e.__config.activateConfig():this.__createPopup(this.__activateTrialAlias)}}__openCalendarPopUp(e){return()=>{this.__isHistAnalysing!==a.STARTING&&this.__isHistAnalysing!==a.RUNNING&&this.__ctrlCalendar.openCalendar(e,this.__selectedRecord)}}setActivateMachineAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ActivateMachineAlias")),i!==this.__activateMachineAlias&&(this.__activateMachineAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActivateMachineAlias"]),this.__processActivateMachineAlias())}getActivateMachineAlias(){return this.__activateMachineAlias}__processActivateMachineAlias(){this.__elActivateChangesButton.html(this.__activateMachineAlias)}setActivateMachineAlertAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ActivateMachineAlertAlias")),i!==this.__activateMachineAlertAlias&&(this.__activateMachineAlertAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActivateMachineAlertAlias"]))}getActivateMachineAlertAlias(){return this.__activateMachineAlertAlias}setNoRecordsInitAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("NoRecordsInitAlias")),i!==this.__noRecordsInitAlias&&(this.__noRecordsInitAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getNoRecordsInitAlias"]))}getNoRecordsInitAlias(){return this.__noRecordsInitAlias}setStartNotMappedAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("StartNotMappedAlias")),i!==this.__startNotMappedAlias&&(this.__startNotMappedAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStartNotMappedAlias"]))}getStartNotMappedAlias(){return this.__startNotMappedAlias}setTodayAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("TodayAlias")),i!==this.__todayAlias&&(this.__todayAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTodayAlias"]),this.__processTreeViewLocalizations())}getTodayAlias(){return this.__todayAlias}setYesterdayAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("YesterdayAlias")),i!==this.__yesterdayAlias&&(this.__yesterdayAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getYesterdayAlias"]))}getYesterdayAlias(){return this.__yesterdayAlias}setThisWeekAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ThisWeekAlias")),i!==this.__thisWeekAlias&&(this.__thisWeekAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getThisWeekAlias"]))}getThisWeekAlias(){return this.__thisWeekAlias}setLastWeekAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("LastWeekAlias")),i!==this.__lastWeekAlias&&(this.__lastWeekAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastWeekAlias"]))}getLastWeekAlias(){return this.__lastWeekAlias}setThisMonthAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ThisMonthAlias")),i!==this.__thisMonthAlias&&(this.__thisMonthAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getThisMonthAlias"]))}getThisMonthAlias(){return this.__thisMonthAlias}setLastMonthAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("LastMonthAlias")),i!==this.__lastMonthAlias&&(this.__lastMonthAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastMonthAlias"]))}getLastMonthAlias(){return this.__lastMonthAlias}setLastSixMonthsAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("LastSixMonthsAlias")),i!==this.__lastSixMonthsAlias&&(this.__lastSixMonthsAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastSixMonthsAlias"]))}getLastSixMonthsAlias(){return this.__lastSixMonthsAlias}setBeforeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("BeforeAlias")),i!==this.__beforeAlias&&(this.__beforeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getBeforeAlias"]))}getBeforeAlias(){return this.__beforeAlias}__processTreeViewLocalizations(){++this.__ongoingTVRefreshes;let e=this;setTimeout((function(){e.__ongoingTVRefreshes>0&&(e.__ongoingTVRefreshes=0,e.__initTreeViewRecords())}),500)}setRecordTrialAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("RecordTrialAlias")),i!==this.__recordTrialAlias&&(this.__recordTrialAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRecordTrialAlias"]))}getRecordTrialAlias(){return this.__recordTrialAlias}setChangeRecordAlertAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ChangeRecordAlertAlias")),i!==this.__changeRecordAlertAlias&&(this.__changeRecordAlertAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getChangeRecordAlertAlias"]))}getChangeRecordAlertAlias(){return this.__changeRecordAlertAlias}setGetRecordAlertAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("GetRecordAlertAlias")),i!==this.__getRecordAlertAlias&&(this.__getRecordAlertAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getGetRecordAlertAlias"]))}getGetRecordAlertAlias(){return this.__getRecordAlertAlias}setRecListAlertAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("RecListAlertAlias")),i!==this.__recListAlertAlias&&(this.__recListAlertAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRecListAlertAlias"]))}getRecListAlertAlias(){return this.__recListAlertAlias}setRefreshAlertAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("RefreshAlertAlias")),i!==this.__refreshAlertAlias&&(this.__refreshAlertAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRefreshAlertAlias"]))}getRefreshAlertAlias(){return this.__refreshAlertAlias}setActivateTrialAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ActivateTrialAlias")),i!==this.__activateTrialAlias&&(this.__activateTrialAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActivateTrialAlias"]))}getActivateTrialAlias(){return this.__activateTrialAlias}setNotReadPropAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("NotReadPropAlias")),i!==this.__notReadPropAlias&&(this.__notReadPropAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getNotReadPropAlias"]))}getNotReadPropAlias(){return this.__notReadPropAlias}setFullMonthsAlias(i){var s=t.Utilities.splitLocals(i);null!==s&&12==s.length||(s=t.Utilities.splitLocals(this.getAttributeDefaultValueInternal("FullMonthsAlias"))),s!==this.__fullMonthsAlias&&(this.__fullMonthsAlias=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getFullMonthsAlias"]))}getFullMonthsAlias(){return this.__fullMonthsAlias}setStartTimeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("StartTimeAlias")),i!==this.__startTimeAlias&&(this.__startTimeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStartTimeAlias"]),this.__processStartTimeAlias())}getStartTimeAlias(){return this.__startTimeAlias}__processStartTimeAlias(){3==this.__elTimeNames.length&&(this.__elTimeNames[0].innerHTML=this.__startTimeAlias),this.__ctrlCalendar.setStartTimeAlias(this.__startTimeAlias)}setStopTimeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("StopTimeAlias")),i!==this.__stopTimeAlias&&(this.__stopTimeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStopTimeAlias"]),this.__processStopTimeAlias())}getStopTimeAlias(){return this.__stopTimeAlias}__processStopTimeAlias(){3==this.__elTimeNames.length&&(this.__elTimeNames[2].innerHTML=this.__stopTimeAlias)}setCurrentTimeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("CurrentTimeAlias")),i!==this.__currentTimeAlias&&(this.__currentTimeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCurrentTimeAlias"]),this.__processCurrentTimeAlias())}getCurrentTimeAlias(){return this.__currentTimeAlias}__processCurrentTimeAlias(){3==this.__elTimeNames.length&&(this.__elTimeNames[1].innerHTML=this.__currentTimeAlias)}setMaximizeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("MaximizeAlias")),i!==this.__maximizeAlias&&(this.__maximizeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMaximizeAlias"]),this.__processMaximizeAlias())}getMaximizeAlias(){return this.__maximizeAlias}__processMaximizeAlias(){this.__elMaximizeName.html(this.__maximizeAlias)}setMinimizeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizeAlias")),i!==this.__minimizeAlias&&(this.__minimizeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinimizeAlias"]),this.__processMinimizeAlias())}getMinimizeAlias(){return this.__minimizeAlias}__processMinimizeAlias(){this.__elMinimizeName.html(this.__minimizeAlias)}setNotFoundAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("NotFoundAlias")),i!==this.__notFoundAlias&&(this.__notFoundAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getNotFoundAlias"]))}getNotFoundAlias(){return this.__notFoundAlias}setHistAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("HistAlias")),i!==this.__histAlias&&(this.__histAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getHistAlias"]),this.__processHistAlias())}getHistAlias(){return this.__histAlias}__processHistAlias(){2==this.__elLiveHistSliderText.length&&(this.__elLiveHistSliderText[1].innerHTML=this.__histAlias)}setLiveAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("LiveAlias")),i!==this.__liveAlias&&(this.__liveAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLiveAlias"]),this.__processLiveAlias())}getLiveAlias(){return this.__liveAlias}__processLiveAlias(){2==this.__elLiveHistSliderText.length&&(this.__elLiveHistSliderText[0].innerHTML=this.__liveAlias)}setDaysOfWeekAlias(i){var s=t.Utilities.splitLocals(i);null!==s&&7==s.length||(s=t.Utilities.splitLocals(this.getAttributeDefaultValueInternal("DaysOfWeekAlias"))),s!==this.__daysOfWeekAlias&&(this.__daysOfWeekAlias=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDaysOfWeekAlias"]),this.__processDaysOfWeekAlias())}getDaysOfWeekAlias(){return this.__daysOfWeekAlias}__processDaysOfWeekAlias(){void 0!==this.__ctrlCalendar&&this.__ctrlCalendar.setDaysOfWeekAlias(this.__daysOfWeekAlias)}setIntervalTimeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("IntervalTimeAlias")),i!==this.__intervalTimeAlias&&(this.__intervalTimeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getIntervalTimeAlias"]),this.__processIntervalTimeAlias())}getIntervalTimeAlias(){return this.__intervalTimeAlias}__processIntervalTimeAlias(){this.__elIntervalName.html(this.__intervalTimeAlias+":")}setStartAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("StartAlias")),i!==this.__startAlias&&(this.__startAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStartAlias"]),this.__processStartAlias())}getStartAlias(){return this.__startAlias}__processStartAlias(){this.__elStartButton[0].title=this.__startAlias}setPauseAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("PauseAlias")),i!==this.__pauseAlias&&(this.__pauseAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getPauseAlias"]),this.__processPauseAlias())}getPauseAlias(){return this.__pauseAlias}__processPauseAlias(){}setCancelAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("CancelAlias")),i!==this.__cancelAlias&&(this.__cancelAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCancelAlias"]),this.__processCancelAlias())}getCancelAlias(){return this.__cancelAlias}__processCancelAlias(){this.__elCancelButton[0].title=this.__cancelAlias,void 0!==this.__ctrlCalendar&&this.__ctrlCalendar.setCancelAlias(this.__cancelAlias)}setResetAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("ResetAlias")),i!==this.__resetAlias&&(this.__resetAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getResetAlias"]),this.__processResetAlias())}getResetAlias(){return this.__resetAlias}__processResetAlias(){this.__elResetButton[0].title=this.__resetAlias}setRefreshRecordsAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("RefreshRecordsAlias")),i!==this.__refreshRecordsAlias&&(this.__refreshRecordsAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRefreshRecordsAlias"]),this.__processRefreshRecordsAlias())}getRefreshRecordsAlias(){return this.__refreshRecordsAlias}__processRefreshRecordsAlias(){}setSetTimeAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("SetTimeAlias")),i!==this.__setTimeAlias&&(this.__setTimeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getSetTimeAlias"]),this.__processSetTimeAlias())}getSetTimeAlias(){return this.__setTimeAlias}__processSetTimeAlias(){this.__ctrlCalendar.setSetTimeAlias(this.__setTimeAlias)}setDayAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("DayAlias")),i!==this.__dayAlias&&(this.__dayAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDayAlias"]),this.__processDayAlias(),e.EventProvider.raise(`${this.__id}.onResized`,null))}getDayAlias(){return this.__dayAlias}__processDayAlias(){}setMonthAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("MonthAlias")),i!==this.__monthAlias&&(this.__monthAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){t.DCTimestruct.monthAlias=this.__monthAlias,this.__drawSlider();let e=t.Utilities.splitLocals(this.__monthAlias),i=this.__elementTemplateRoot.find(".tchmi-analytics-month");for(let t=0;t<i.length;++t){let s=parseInt(i[t].dataset.monthIndex);isNaN(s)||(i[t].innerHTML=e[s])}}setCancelRestartAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("CancelRestartAlias")),i!==this.__cancelRestartAlias&&(this.__cancelRestartAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCancelRestartAlias"]))}getCancelRestartAlias(){return this.__cancelRestartAlias}}t.DatasourceOverview=i;class s{constructor(e,t,i,s,a,r,n){this.nID=e,this.sName=t,this.sDisplayName=i,this.dtRecordStart=s,this.dtRecordEnd=a,this.dtSelectedRangeStart=r,this.dtSelectedRangeEnd=n}getMarkerProgress(e){let t={progress:0,left:-11};if(null==e)return t;let i=this.dtRecordStart.getTime(),s=this.dtRecordEnd.getTime(),a=this.dtSelectedRangeStart.getTime(),r=this.dtSelectedRangeEnd.getTime(),n=e.getTime();if(n<a)return t.progress=-1,t;if(n>r)return t.progress=101,t.left=289,t;t.progress=100*(n-a)/(r-a);let l=300*(r-a)/(s-i);return t.left=300*(a-i)/(s-i)-11+l*(t.progress/100),t}getState(e,t){if(0===this.nID)return a.IDLE;if(this.nID!==t)return a.IDLE;let i=e.getTime(),s=this.dtSelectedRangeEnd.getTime();return this.dtSelectedRangeStart.getTime()<=i&&s>i+1e3?a.RUNNING:s<i+1e3&&s>i-1e3?a.ENDED:a.IDLE}isEqual(e){return this.nID==e.nID&&t.Utilities.isEqual(this.dtRecordStart,e.dtRecordStart)&&t.Utilities.isEqual(this.dtRecordEnd,e.dtRecordEnd)}}let a,r;t.ExecutingRecord=s,function(e){e[e.IDLE=0]="IDLE",e[e.NOT_CONNECTED=1]="NOT_CONNECTED",e[e.STARTING=2]="STARTING",e[e.RUNNING=3]="RUNNING",e[e.PAUSED=4]="PAUSED",e[e.CANCELED=5]="CANCELED",e[e.ENDED=6]="ENDED",e[e.ENDING=7]="ENDING"}(a=t.E_AnalysisState||(t.E_AnalysisState={})),function(e){e[e.eUnknown=0]="eUnknown",e[e.eNotConnected=1]="eNotConnected",e[e.eReceiveData=2]="eReceiveData",e[e.eReceiveData_Cancel=3]="eReceiveData_Cancel",e[e.eReceiveData_Pause=4]="eReceiveData_Pause",e[e.eError=5]="eError"}(r=t.E_DATASOURCESTATE||(t.E_DATASOURCESTATE={}));class n{constructor(e,t,i){this.nActiveMachineIndex=0,this.nActiveStreamIndex=0,this.bHistorical=!1,this.nActiveRecordIndex=0,this.symbolActiveMachineIndex=null,this.symbolActiveStreamIndex=null,this.symbolHistorical=null,this.symbolActiveRecordIndex=null,this.elActivateButton=e,this.elSelectedMachine=t,this.elSelectedMachineGlobal=i,this.activeConfig={nActiveMachineIndex:-1,nActiveStreamIndex:-1,bHistorical:!1,nActiveRecordIndex:-1}}hasChanges(){return this.nActiveMachineIndex!==this.activeConfig.nActiveMachineIndex||this.nActiveStreamIndex!==this.activeConfig.nActiveStreamIndex||this.bHistorical!==this.activeConfig.bHistorical||this.bHistorical&&this.nActiveRecordIndex!==this.activeConfig.nActiveRecordIndex}hasChangesExceptHistorical(){return this.nActiveMachineIndex!==this.activeConfig.nActiveMachineIndex||this.nActiveStreamIndex!==this.activeConfig.nActiveStreamIndex}isInitializing(){return-1==this.activeConfig.nActiveMachineIndex||-1==this.activeConfig.nActiveRecordIndex||-1==this.activeConfig.nActiveStreamIndex}setActiveMachineIndex(e,t=!0){if(!t){this.activeConfig.nActiveMachineIndex=e;let t=this.activeConfig.nActiveMachineIndex;this.elMachines.length>t&&(this.elMachines.removeClass("tchmi-ds-overview-machine-active"),$(this.elMachines[t]).addClass("tchmi-ds-overview-machine-active")),this.highlightGlobalMachine()}this.nActiveMachineIndex=e,this.processChanges()}getActiveMachineIndex(){return this.nActiveMachineIndex}setActiveStreamIndex(e,t=!0){t||(this.activeConfig.nActiveStreamIndex=e),this.nActiveStreamIndex=e,this.processChanges()}getActiveStreamIndex(){return this.nActiveStreamIndex}setHistorical(e,t=!0,i=!1){t||(this.activeConfig.bHistorical=e),this.hasChangesExceptHistorical()&&!this.isInitializing()||!i||(this.activeConfig.bHistorical=e,this.symbolHistorical.write(e)),this.bHistorical=e,this.processChanges()}getHistorical(){return this.bHistorical}setActiveRecordIndex(e,t=!0){t||(this.activeConfig.nActiveRecordIndex=e),this.hasChangesExceptHistorical()||(this.activeConfig.nActiveRecordIndex=e,this.symbolActiveRecordIndex.write(e)),this.nActiveRecordIndex=e,this.processChanges()}getActiveRecordIndex(){return this.nActiveRecordIndex}processChanges(){this.hasChanges()?this.elActivateButton.removeClass("tchmi-ds-overview-disabled"):this.elActivateButton.addClass("tchmi-ds-overview-disabled"),this.nActiveMachineIndex!==this.activeConfig.nActiveMachineIndex?this.elSelectedMachine.addClass("tchmi-ds-overview-not-activated"):this.elSelectedMachine.removeClass("tchmi-ds-overview-not-activated")}activateConfig(e=!0){if(null!=this.symbolActiveMachineIndex&&null!=this.symbolActiveStreamIndex&&null!=this.symbolHistorical&&null!=this.symbolActiveRecordIndex){this.setConfig(),this.symbolActiveMachineIndex.write(this.activeConfig.nActiveMachineIndex),this.symbolActiveStreamIndex.write(this.activeConfig.nActiveStreamIndex),this.symbolHistorical.write(this.activeConfig.bHistorical),this.symbolActiveRecordIndex.write(this.activeConfig.nActiveRecordIndex);let e=this.activeConfig.nActiveMachineIndex;this.elMachines.length>e&&(this.elMachines.removeClass("tchmi-ds-overview-machine-active"),$(this.elMachines[e]).addClass("tchmi-ds-overview-machine-active")),this.processChanges()}}setConfig(){this.activeConfig.nActiveMachineIndex=this.nActiveMachineIndex,this.activeConfig.nActiveStreamIndex=this.nActiveStreamIndex,this.activeConfig.bHistorical=this.bHistorical,this.activeConfig.nActiveRecordIndex=this.nActiveRecordIndex,this.highlightGlobalMachine()}setElMachines(e){this.elMachines=e;let t=this.activeConfig.nActiveMachineIndex;this.elMachines.length>t&&(this.elMachines.removeClass("tchmi-ds-overview-machine-active"),$(this.elMachines[t]).addClass("tchmi-ds-overview-machine-active"))}setDataSources(e){this.dataSources=e,this.highlightGlobalMachine()}highlightGlobalMachine(){if(null!=this.dataSources&&this.dataSources.length>this.activeConfig.nActiveMachineIndex){if(this.elSelectedMachineGlobal[0].innerText!==this.dataSources[this.activeConfig.nActiveMachineIndex].sDisplayName){this.elSelectedMachineGlobal.html(this.dataSources[this.activeConfig.nActiveMachineIndex].sDisplayName),this.elSelectedMachineGlobal.css("font-size","80px");let e=this.elSelectedMachineGlobal.css("color");this.elSelectedMachineGlobal.css("color","#2ab934");let t=this;setTimeout((function(){t.elSelectedMachineGlobal.css("font-size",""),t.elSelectedMachineGlobal.css("color",e)}),2e3)}}else this.elSelectedMachineGlobal.html("")}}t.DatasourceConfig=n}(i=t.Analytics||(t.Analytics={})),t.registerEx("DatasourceOverview","TcHmi.Controls.Analytics",i.DatasourceOverview)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));