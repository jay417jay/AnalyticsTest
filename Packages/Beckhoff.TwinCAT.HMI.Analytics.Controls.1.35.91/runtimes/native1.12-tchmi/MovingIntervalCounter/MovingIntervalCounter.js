var TcHmi;!function(t){let e;!function(e){let s;!function(e){class s extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,s){super(t,e,s),this.__linearGrad="linearGradMovingInterval",this.__onResized=()=>(t,e)=>{let s=super.__getScaleFactor();if(0!=this.__hasLicense){this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px");var i=this.getRenderedWidth()-20;if(!(i<0)){this.__elementSvg[0].setAttribute("width",i.toString()),this.__elementSvg[0].setAttribute("viewBox","0 0 "+i+" 90");var n="M5 52 L5 88 L"+.09*i+" 88 L"+.09*i+" 78 L"+.79*i+" 78 L"+.79*i+" 88 L"+.98*i+" 70 L"+.79*i+" 52 L"+.79*i+" 62 L"+.09*i+" 62 L"+.09*i+" 52z";this.__elementSvgArrow[0].setAttribute("d",n);for(var o=i+1,_=49,l=document.createElement("canvas").getContext("2d");o>i&&_>4;){l.font="bold "+_.toString()+"px sans-serif",o=l.measureText(this.__counts.toString()).width,_-=2}this.__elementSvgText[0].setAttribute("font-size",_+"px"),this.__elementSvgText[0].setAttribute("x",i/2+"px"),!0===this.__showTitle?(this.__elementSvg.css("margin-top",0*s),this.__elementSvg.css("height",90*s)):(this.__elementSvg.css("margin-top",5*s),this.__elementSvg.css("height",100*s)),this.__elementCounts.css("font-size",14*s)}}}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=310,this.__defaultHeight=150,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-moving-interval-svg"),this.__elementSvgText=this.__elementTemplateRoot.find(".tchmi-moving-interval-svg-text"),this.__elementFirstCount=this.__elementTemplateRoot.find(".tchmi-moving-interval-first-count"),this.__elementCounts=this.__elementTemplateRoot.find(".tchmi-moving-interval-counts"),this.__elementLastCount=this.__elementTemplateRoot.find(".tchmi-moving-interval-last-count"),this.__elementSvgArrow=this.__elementTemplateRoot.find(".tchmi-moving-interval-svg-arrow"),this.__elementSvgDefs=this.__elementTemplateRoot.find(".tchmi-moving-interval-defs"))}__init(){let t=[new e.Property(this,"ShowMilliSeconds","Show Milliseconds",e.E_DataType.BOOLEAN)];super.setEditableProperties(t),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setMonthAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("MonthAlias")),s!==this.__monthAlias&&(this.__monthAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){e.DCTimestruct.monthAlias=this.__monthAlias,this.__processFirstCount(),this.__processLastCount()}setCounts(e){var s=t.ValueConverter.toNumber(e);null===s&&(s=this.getAttributeDefaultValueInternal("Counts")),s!==this.__counts&&(this.__counts=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCounts"]),this.__processCounts())}getCounts(){return this.__counts}__processCounts(){this.__elementSvgText[0].innerHTML=this.__counts.toString()}setFirstCount(e){var s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("FirstCount")),JSON.stringify(s)!==JSON.stringify(this.__firstCount)&&(this.__firstCount=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getFirstCount"]),this.__processFirstCount())}getFirstCount(){return this.__firstCount}setLastCount(e){var s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("LastCount")),JSON.stringify(s)!==JSON.stringify(this.__lastCount)&&(this.__lastCount=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastCount"]),this.__processLastCount())}getLastCount(){return this.__lastCount}__processLastCount(){if(void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds&&void 0!==this.__monthAlias&&null!==this.__monthAlias){let t=this.DateTimeConverter(this.__lastCount,this.__monthAlias,this.__showMilliSeconds),e=t.split(" ");this.__elementLastCount[0].innerHTML=t.replace(e[e.length-1],"")+"<br />"+e[e.length-1]}}__processFirstCount(){if(void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds&&void 0!==this.__monthAlias&&null!==this.__monthAlias){let t=this.DateTimeConverter(this.__firstCount,this.__monthAlias,this.__showMilliSeconds),e=t.split(" ");this.__elementFirstCount[0].innerHTML=t.replace(e[e.length-1],"")+"<br />"+e[e.length-1]}}setShowMilliSeconds(e){var s=t.ValueConverter.toBoolean(e);null===s&&(s=this.getAttributeDefaultValueInternal("ShowMilliSeconds")),s!==this.__showMilliSeconds&&(this.__showMilliSeconds=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowMilliSeconds"]),this.__processShowMilliSeconds())}getShowMilliSeconds(){return this.__showMilliSeconds}__processShowMilliSeconds(){this.__processFirstCount(),this.__processLastCount()}__processColorGradient(){this.__processColor()}__processColor(){this.__elementSvgText.css("fill",this.__fontColor),this.__element,void 0!==this.__colorGradient&&(0!==this.__colorGradient?this.__elementSvgText.css("text-shadow",this.__controlColorDark+" -3px 3px 3px"):this.__elementSvgText.css("text-shadow","none")),this.__elementSvgDefs[0].innerHTML="",void 0!==this.__colorGradient&&void 0!==this.__controlColorDark&&(this.CreateLinearGradient(this.hexToRgbA(this.__controlColorDark),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId),this.__elementSvgDefs[0].children[0].setAttribute("x2","0%"),this.__elementSvgDefs[0].children[0].setAttribute("y2","100%"),this.__elementSvgDefs[0].children[0].children[1].setAttribute("offset","35%")),this.__elementSvgArrow.css("fill","url(#"+this.__linearGrad+this.__secureId+")")}}e.MovingIntervalCounter=s}(s=e.Analytics||(e.Analytics={})),e.registerEx("MovingIntervalCounter","TcHmi.Controls.Analytics",s.MovingIntervalCounter)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));