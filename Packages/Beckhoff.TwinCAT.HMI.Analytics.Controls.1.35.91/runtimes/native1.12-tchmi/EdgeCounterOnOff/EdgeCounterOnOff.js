var TcHmi;!function(t){let e;!function(e){let s;!function(e){class s extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,s){super(t,e,s),this.__fontSizeOn=0,this.__fontSizeOff=0,this.__scaleFactor=1,this.__onResized=()=>(t,e)=>{let s=super.__getScaleFactor(!0);if(0==this.__hasLicense)return;let i=this.__defaultHeight+18-this.__elementNameAlias[0].clientHeight;!1===this.__showLastEvent&&(i+=24);var n=i/this.__defaultHeight;let o;s=this.__getFontScaleFactor(void 0,i)*n,this.__elementNameAlias.css("padding-bottom",5*s),this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),!0===this.__showLastEvent?(this.__elementOuterContainer.css("height",130*s),this.__elementContainer.css("margin-top",0*s)):(this.__elementContainer.css("margin-top",10*s),this.__elementOuterContainer.css("height",140*s)),this.__elementContainer.css("height",85*s),this.__elementContainer.css("width",130*s),this.__elementStateOn.css("font-size",14*s),this.__elementStateOn.css("width",70*s),this.__elementStateOn.css("height",24*s),this.__elementStateOn.css("margin-top",10*s),this.__elementStateOn.css("left",10*s),this.__elementStateOff.css("font-size",12*s),this.__elementStateOff.css("width",40*s),this.__elementStateOff.css("height",20*s),this.__elementStateOff.css("margin-top",15*s),this.__elementStateOff.css("left",95*s),this.__elementState.css("padding-top",2*s),this.__elementOnValue.css("width",75*s),this.__elementOnValue.css("height",40*s),this.__elementOnValue.css("font-size",this.__fontSizeOn*s),this.__elementOnValue.css("margin-top",30*s),this.__elementOnValue.css("left",10*s),this.__elementOffValue.css("width",60*s),this.__elementOffValue.css("height",40*s),this.__elementOffValue.css("font-size",this.__fontSizeOff*s),this.__elementOffValue.css("margin-top",30*s),this.__elementOffValue.css("left",87*s),o=!0===this.__showMilliSeconds?10:12,this.__elementLastEvent.css("font-size",o*s),this.__scaleFactor=s}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=150,this.__defaultHeight=150,this.__elementState=this.__elementTemplateRoot.find(".tchmi-edge-counter-state"),this.__elementStateOn=this.__elementTemplateRoot.find(".tchmi-edge-counter-on-state"),this.__elementStateOff=this.__elementTemplateRoot.find(".tchmi-edge-counter-off-state"),this.__elementOnValue=this.__elementTemplateRoot.find(".tchmi-edge-counter-on-value"),this.__elementOffValue=this.__elementTemplateRoot.find(".tchmi-edge-counter-off-value"),this.__elementValue=this.__elementTemplateRoot.find(".tchmi-edge-counter-value"),this.__elementLastEvent=this.__elementTemplateRoot.find(".tchmi-edge-counter-last-event"),this.__elementContainer=this.__elementTemplateRoot.find(".tchmi-edge-counter-on-off-container"),this.__elementOuterContainer=this.__elementTemplateRoot.find(".tchmi-edge-counter-outer-container"))}__init(){let t=[new e.Property(this,"ShowLastEvent","Show Last Event",e.E_DataType.BOOLEAN),new e.Property(this,"ShowMilliSeconds","Show Milliseconds",e.E_DataType.BOOLEAN),new e.Property(this,"OnColor","On Color",e.E_DataType.SOLIDCOLOR),new e.Property(this,"OffColor","Off Color",e.E_DataType.SOLIDCOLOR)];super.setEditableProperties(t),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setMonthAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("MonthAlias")),s!==this.__monthAlias&&(this.__monthAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){e.DCTimestruct.monthAlias=this.__monthAlias,this.__processLastEvent()}setOffColor(e){let s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("OffColor")),s!==this.__offColor&&(this.__offColor=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOffColor"]),this.__processOffColor())}getOffColor(){return this.__offColor}__processOffColor(){this.__processState()}setOnColor(e){let s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("OnColor")),s!==this.__onColor&&(this.__onColor=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOnColor"]),this.__processOnColor())}getOnColor(){return this.__onColor}__processOnColor(){this.__processState()}setState(e){var s=t.ValueConverter.toBoolean(e);null===s&&(s=this.getAttributeDefaultValueInternal("State")),s!==this.__state&&(this.__state=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getState"]),this.__processState())}getState(){return this.__state}__processColorGradient(){this.__processState()}__processState(){if(null!=this.__offColor&&null!=this.__colorGradient&&null!=this.__onColor){const t=`radial-gradient(circle at 65% 35%, ${this.GetColorGradientLighter(this.__onColor.color,this.__colorGradient)}, ${this.GetColorGradientDarker(this.__onColor.color,this.__colorGradient)}70%)`,e=`radial-gradient(circle at 65% 35%, ${this.GetColorGradientLighter(this.__offColor.color,this.__colorGradient)}, ${this.GetColorGradientDarker(this.__offColor.color,this.__colorGradient)}70%)`;this.__state?(this.__elementStateOn.css("background",t),this.__elementStateOff.css("background",e)):(this.__elementStateOff.css("background",t),this.__elementStateOn.css("background",e))}}setOnValue(e){var s=t.ValueConverter.toNumber(e);null===s&&(s=this.getAttributeDefaultValueInternal("onValue")),s!==this.__onValue&&(this.__onValue=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOnValue"]),this.__processOnValue())}getOnValue(){return this.__onValue}__processColor(){this.__processOnValue(),this.__processOffValue(),this.__elementStateOn.css("border-color",this.__controlColorDark),this.__elementStateOff.css("border-color",this.__controlColorDark),this.__elementStateOn.css("color",this.__fontColor),this.__elementStateOff.css("color",this.__fontColor)}__processOnValue(){void 0!==this.__onValue&&null!==this.__onValue&&void 0!==this.__fontColor&&this.WriteOnValue(this.__elementOnValue,this.__onValue,this.__fontColor)}setOffValue(e){var s=t.ValueConverter.toNumber(e);null===s&&(s=this.getAttributeDefaultValueInternal("offValue")),s!==this.__offValue&&(this.__offValue=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOffValue"]),this.__processOffValue())}getOffValue(){return this.__offValue}__processOffValue(){void 0!==this.__offValue&&null!==this.__offValue&&void 0!==this.__fontColor&&this.WriteOffValue(this.__elementOffValue,this.__offValue,this.__fontColor)}setOnAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("OnAlias")),s!==this.__onAlias&&(this.__onAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOnAlias"]),this.__processOnAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getOnAlias(){return this.__onAlias}__processOnAlias(){void 0!==this.__onAlias&&null!==this.__onAlias&&this.__elementStateOn.text(this.__onAlias)}setOffAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("OffAlias")),s!==this.__offAlias&&(this.__offAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOffAlias"]),this.__processOffAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getOffAlias(){return this.__offAlias}__processOffAlias(){void 0!==this.__offAlias&&null!==this.__offAlias&&this.__elementStateOff.text(this.__offAlias)}setLastEventAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("LastEventAlias")),s!==this.__lastEventAlias&&(this.__lastEventAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastEventAlias"]),this.__processLastEventAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getLastEventAlias(){return this.__lastEventAlias}__processLastEventAlias(){this.__processLastEvent()}setShowLastEvent(e){var s=t.ValueConverter.toBoolean(e);null!==s?s!==this.__showLastEvent&&(this.__showLastEvent=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowLastEvent"]),this.__processShowLastEvent()):s=this.getAttributeDefaultValueInternal("ShowLastEvent")}getShowLastEvent(){return this.__showLastEvent}setShowMilliSeconds(e){var s=t.ValueConverter.toBoolean(e);null===s&&(s=this.getAttributeDefaultValueInternal("ShowMilliSeconds")),s!==this.__showMilliSeconds&&(this.__showMilliSeconds=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowMilliSeconds"]),this.__processShowMilliSeconds())}getShowMilliSeconds(){return this.__showMilliSeconds}__processShowMilliSeconds(){this.__processLastEvent(),t.EventProvider.raise(`${this.__id}.onResized`,null)}setLastEvent(e){var s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("LastEvent")),JSON.stringify(s)!==JSON.stringify(this.__lastEvent)&&(this.__lastEvent=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastEvent"]),this.__processLastEvent())}getLastEvent(){return this.__lastEvent}__processShowLastEvent(){!0===this.__showLastEvent?(this.__elementLastEvent.css("display","block"),this.__processLastEvent()):this.__elementLastEvent.css("display","none"),t.EventProvider.raise(`${this.__id}.onResized`,null)}__processLastEvent(){if(void 0!==this.__monthAlias&&null!==this.__monthAlias&&void 0!==this.__lastEventAlias&&null!==this.__lastEventAlias&&void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds){var t=this.DateTimeConverter(this.__lastEvent,this.__monthAlias,this.__showMilliSeconds);this.__elementLastEvent[0].innerHTML=this.__lastEventAlias+":<br />"+t}}WriteOnValue(t,e,s){for(var i=76,n=40,o=document.createElement("canvas").getContext("2d");i>75;){o.font="bold "+n.toString()+"px sans-serif",i=o.measureText(e.toString()).width,n-=2}t.css("color",s),t.css("font-size",this.__scaleFactor*n),this.__fontSizeOn=n,t[0].innerHTML=e.toString()}WriteOffValue(t,e,s){for(var i=61,n=40,o=document.createElement("canvas").getContext("2d");i>60;){o.font="bold "+n.toString()+"px sans-serif",i=o.measureText(e.toString()).width,n-=2}t.css("color",s),t.css("font-size",this.__scaleFactor*n),this.__fontSizeOff=n,t[0].innerHTML=e.toString()}}e.EdgeCounterOnOff=s}(s=e.Analytics||(e.Analytics={})),e.registerEx("EdgeCounterOnOff","TcHmi.Controls.Analytics",s.EdgeCounterOnOff)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));