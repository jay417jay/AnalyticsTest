var TcHmi;!function(t){let e;!function(e){let i;!function(e){class i extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,i){super(t,e,i),this.__linearGrad="linearGradEnergyMonitoring",this.__defaultControl=!1,this.__firstRun=!0,this.__defaultRange="",this.__minmaxButtonClicked=!0,this.__onResized=()=>(t,e)=>{let i=super.__getScaleFactor();0!=this.__hasLicense&&(this.__elementNameAlias.css("padding-bottom",5*i),this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),this.__elementSvg.css("width",this.getRenderedWidth()-10*i),this.__elementSvg.css("height",112*(this.getRenderedWidth()-10*i)/470),!0===this.__showTitle?this.__elementSvg.css("margin-top",0*i):this.__elementSvg.css("margin-top",15*i))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=470,this.__defaultHeight=150,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-svg"),this.__elementSvgDefs=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-defs-gradients"),this.__elementSvgError=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-error"),this.__elementSvgWarning=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-warning"),this.__elementSvgMinMax=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max"),this.__elementSvgMinMaxMarker=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-marker"),this.__elementSvgCurrentValue=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-current-value"),this.__elementSvgMean=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-mean"),this.__elementSvgLines=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-lines"),this.__elementSvgText=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text"),this.__elementSvgFillRect=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-rect-fill"),this.__elementSvgMinMaxButton=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-button"),this.__elementSvgMinMaxTimes=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text-timestamp"),this.__elementSvgMinMaxMarkerText=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-text"),this.__elementSvgTextCurrentValue=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text-current-value"))}__init(){let t=[new e.Property(this,"Unit","Unit",e.E_DataType.STRING),new e.Property(this,"AmountDecimals","Amount Decimals",e.E_DataType.UINTEGER),new e.Property(this,"ErrorColor","Error Color",e.E_DataType.SOLIDCOLOR),new e.Property(this,"WarningColor","Warning Color",e.E_DataType.SOLIDCOLOR),new e.Property(this,"MinMaxColor","Min-Max Color",e.E_DataType.SOLIDCOLOR),new e.Property(this,"MinMaxMarkerColor","Min-Max Marker Color",e.E_DataType.SOLIDCOLOR),new e.Property(this,"MeanColor","Mean Color",e.E_DataType.SOLIDCOLOR)];super.setEditableProperties(t),super.__init();var i=this;this.__elementSvgMinMaxButton.on("mouseover",(function(){i.__elementSvgMinMaxButton.css("stroke",i.__minmaxMarkerColorHex)})),this.__elementSvgMinMaxButton.on("mouseout",(function(){i.__minmaxButtonClicked||i.__elementSvgMinMaxButton.css("stroke",i.__fontColor)})),this.__elementSvgMinMaxButton.on("click",(function(){i.__elementSvgMinMaxMarker=i.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-marker"),i.__elementSvgMinMaxMarkerText=i.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-text"),i.__elementSvgMinMaxTimes=i.__elementTemplateRoot.find(".tchmi-energy-monitoring-text-timestamp"),i.__minmaxButtonClicked?(i.__minmaxButtonClicked=!1,i.__elementSvgMinMaxButton.css("stroke",i.__fontColor),i.__elementSvgMinMaxMarker.css("visibility","collapse"),i.__elementSvgMinMaxMarkerText.css("visibility","collapse"),i.__elementSvgMinMaxTimes.css("visibility","collapse")):(i.__minmaxButtonClicked=!0,i.__elementSvgMinMaxButton.css("stroke",i.__minmaxMarkerColorHex),i.__elementSvgMinMaxMarker.css("visibility","visible"),i.__elementSvgMinMaxMarkerText.css("visibility","visible"),i.__elementSvgMinMaxTimes.css("visibility","visible"))}))}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setCurrentValue(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("CurrentValue")),i!==this.__currentValue&&(this.__currentValue=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCurrentValue"]),this.__processCurrentValue())}getCurrentValue(){return this.__currentValue}__processCurrentValue(){this.__processEnergyControl()}setMean(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("Mean")),i!==this.__mean&&(this.__mean=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMean"]),this.__processMean())}getMean(){return this.__mean}__processMean(){this.__processEnergyControl()}setMin(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("Min")),i!==this.__min&&(this.__min=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMin"]),this.__processMin())}getMin(){return this.__min}__processMin(){this.__processEnergyControl()}setMax(e){var i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("Max")),i!==this.__max&&(this.__max=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMax"]),this.__processMax())}getMax(){return this.__max}__processMax(){this.__processEnergyControl()}setRanges(e){var i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("Ranges")),JSON.stringify(i)!==JSON.stringify(this.__ranges)&&(this.__ranges=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getRanges"]),this.__processRanges())}getRanges(){return this.__ranges}__processRanges(){this.__processEnergyControl()}setErrorColor(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("ErrorColor")),i!==this.__errorColor&&(this.__errorColor=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getErrorColor"]),this.__processErrorColor())}getErrorColor(){return this.__errorColor}__processErrorColor(){this.__errorColorHex=this.rgbaToHex(this.__errorColor.color),this.__processEnergyControl()}setWarningColor(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("WarningColor")),i!==this.__warningColor&&(this.__warningColor=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getWarningColor"]),this.__processWarningColor())}getWarningColor(){return this.__warningColor}__processWarningColor(){this.__warningColorHex=this.rgbaToHex(this.__warningColor.color),this.__processEnergyControl()}setMinMaxColor(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinMaxColor")),i!==this.__minMaxColor&&(this.__minMaxColor=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinMaxColor"]),this.__processMinMaxColor())}getMinMaxColor(){return this.__minMaxColor}__processMinMaxColor(){this.__minMaxColorHex=this.rgbaToHex(this.__minMaxColor.color),this.__processEnergyControl()}setMinMaxMarkerColor(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinMaxMarkerColor")),i!==this.__minmaxMarkerColor&&(this.__minmaxMarkerColor=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinMaxMarkerColor"]),this.__processMinMaxMarkerColor())}getMinMaxMarkerColor(){return this.__minmaxMarkerColor}__processMinMaxMarkerColor(){this.__minmaxMarkerColorHex=this.rgbaToHex(this.__minmaxMarkerColor.color),this.__processEnergyControl()}setMeanColor(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("meanColor")),i!==this.__meanColor&&(this.__meanColor=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getmeanColor"]),this.__processMeanColor())}getMeanColor(){return this.__meanColor}__processMeanColor(){this.__meanColorHex=this.rgbaToHex(this.__meanColor.color),this.__processColor()}setUnit(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("Unit")),i!==this.__unit&&(this.__unit=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getUnit"]),this.__processUnit(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getUnit(){return this.__unit}__processUnit(){this.__processEnergyControl()}setMessageAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MessageAlias")),i!==this.__messageAlias&&(this.__messageAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMessageAlias"]),this.__processMessageAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getMessageAlias(){return this.__messageAlias}__processMessageAlias(){this.__processEnergyControl()}setMinAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinAlias")),i!==this.__minAlias&&(this.__minAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinAlias"]),this.__processMinAlias())}getMinAlias(){return this.__minAlias}__processMinAlias(){this.__processEnergyControl()}setTargetAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("TargetAlias")),i!==this.__targetAlias&&(this.__targetAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["geTtargetAlias"]),this.__processTargetAlias())}getTargetAlias(){return this.__targetAlias}__processTargetAlias(){this.__processEnergyControl()}setMaxAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MaxAlias")),i!==this.__maxAlias&&(this.__maxAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMaxAlias"]),this.__processMaxAlias())}getMaxAlias(){return this.__maxAlias}__processMaxAlias(){this.__processEnergyControl()}setMinTimestamp(e){var i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinTimestamp")),JSON.stringify(i)!==JSON.stringify(this.__minTimestamp)&&(this.__minTimestamp=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinTimestamp"]),this.__processEnergyControl())}getMinTimestamp(){return this.__minTimestamp}setMaxTimestamp(e){var i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("MaxTimestamp")),JSON.stringify(i)!==JSON.stringify(this.__maxTimestamp)&&(this.__maxTimestamp=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMaxTimestamp"]),this.__processEnergyControl())}getMaxTimestamp(){return this.__maxTimestamp}setMonthAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MonthAlias")),i!==this.__monthAlias&&(this.__monthAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){e.DCTimestruct.monthAlias=this.__monthAlias,this.__processEnergyControl()}__processAmountDecimals(){super.__processAmountDecimals(),this.__processEnergyControl()}__processColor(){if(this.__elementSvgError=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-error"),this.__elementSvgWarning=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-warning"),this.__elementSvgMinMax=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max"),this.__elementSvgMean=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-mean"),this.__elementSvgMinMaxMarker=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-marker"),this.__elementSvgText=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text"),this.__elementSvgMean.css("stroke",this.__meanColorHex),this.__elementSvgFillRect.css("fill",this.__controlChartColor),this.__elementSvgText.css("fill",this.__fontColor),this.__elementSvgMean.css("fill",this.__meanColorHex),this.__minmaxButtonClicked?this.__elementSvgMinMaxButton.css("stroke",this.__minmaxMarkerColorHex):this.__elementSvgMinMaxButton.css("stroke",this.__fontColor),void 0!==this.__errorColor&&void 0!==this.__warningColor&&void 0!==this.__minMaxColor){this.__elementSvgDefs[0].innerHTML="",this.CreateLinearGradient(this.hexToRgbA(this.__errorColorHex),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId+"ErrorColor"),this.CreateLinearGradient(this.hexToRgbA(this.__warningColorHex),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId+"WarningColor"),this.CreateLinearGradient(this.hexToRgbA(this.__minMaxColorHex),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId+"MinMaxColor");for(var t=0;t<3;t++)this.__elementSvgDefs[0].children[t].setAttribute("x2","0%"),this.__elementSvgDefs[0].children[t].setAttribute("y2","100%"),this.__elementSvgDefs[0].children[t].children[1].setAttribute("offset","35%");this.__elementSvgError.css("fill","url(#"+this.__linearGrad+this.__secureId+"ErrorColor)"),this.__elementSvgWarning.css("fill","url(#"+this.__linearGrad+this.__secureId+"WarningColor)"),this.__elementSvgMinMax.css("fill","url(#"+this.__linearGrad+this.__secureId+"MinMaxColor)")}}__processShowTitle(){!0===this.__showTitle?(this.__elementNameAlias.css("display","block"),this.__elementTemplateRoot.css("padding-top","0px")):(this.__elementNameAlias.css("display","none"),this.__elementTemplateRoot.css("padding-top","5px")),this.__processEnergyControl(),t.EventProvider.raise(`${this.__id}.onResized`,null)}__processEnergyControl(){if(null!=this.__targetAlias&&null!=this.__monthAlias&&null!=this.__minTimestamp&&null!=this.__maxTimestamp&&null!=this.__min&&null!=this.__max&&void 0!==this.__ranges&&null!=this.__messageAlias&&null!=this.__unit&&null!=this.__minAlias&&null!=this.__maxAlias&&null!=this.__minMaxColor&&null!=this.__warningColor&&null!=this.__errorColor&&null!=this.__minmaxMarkerColor){var e=this.__messageAlias.split(","),i=e[3],n=e[2];if(null==this.__ranges||0===this.__ranges.length||this.__defaultRange==this.__ranges){var r=this.__max-this.__min,s=Math.floor(this.__min-.1*r),o=Math.ceil(this.__max+.1*r),_='[{"eRangeType":"Target","fMinValue":'+s.toString()+',"fMaxValue":'+o.toString()+"}]";this.__ranges=t.ValueConverter.toObject(_),this.__defaultControl=!0,this.__defaultRange=this.__ranges}else this.__defaultControl=!1;this.DrawEnergyControl(this.__defaultControl,this.__currentValue,this.__mean,this.__min,this.__max,this.__ranges,n,i,this.__minAlias,this.__maxAlias,this.__unit,this.__minTimestamp,this.__minTimestamp,this.__monthAlias,this.__targetAlias,this.__minMaxColorHex,this.__warningColorHex,this.__errorColorHex,this.__minmaxMarkerColorHex),this.__processColor()}}DrawEnergyControl(t,e,i,n,r,s,o,_,l,a,m,h,g,u,c,d,v,x,p){let M=52;var C=450;this.__elementSvgFillRect[0].setAttribute("width",C.toString()),this.__elementSvgFillRect[0].setAttribute("height",15..toString());for(var S=r,f=n,A=0;A<s.length;A++){var y=s[A].fMinValue;(null==f||f>y)&&(f=y);var T=s[A].fMaxValue;(null==S||S<T)&&(S=T)}var b=S-f;for(this.__elementSvgError=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-error");this.__elementSvgError.length>0;)this.__elementSvgError[0].parentNode.removeChild(this.__elementSvgError[0]),this.__elementSvgError=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-error");for(this.__elementSvgWarning=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-warning");this.__elementSvgWarning.length>0;)this.__elementSvgWarning[0].parentNode.removeChild(this.__elementSvgWarning[0]),this.__elementSvgWarning=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-warning");for(this.__elementSvgMinMax=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max");this.__elementSvgMinMax.length>0;)this.__elementSvgMinMax[0].parentNode.removeChild(this.__elementSvgMinMax[0]),this.__elementSvgMinMax=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max");for(this.__elementSvgMean=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-mean");this.__elementSvgMean.length>0;)this.__elementSvgMean[0].parentNode.removeChild(this.__elementSvgMean[0]),this.__elementSvgMean=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-mean");for(this.__elementSvgCurrentValue=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-current-value");this.__elementSvgCurrentValue.length>0;)this.__elementSvgCurrentValue[0].parentNode.removeChild(this.__elementSvgCurrentValue[0]),this.__elementSvgCurrentValue=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-current-value");for(this.__elementSvgLines=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-lines");this.__elementSvgLines.length>0;)this.__elementSvgLines[0].parentNode.removeChild(this.__elementSvgLines[0]),this.__elementSvgLines=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-lines");for(this.__elementSvgText=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text");this.__elementSvgText.length>0;)this.__elementSvgText[0].parentNode.removeChild(this.__elementSvgText[0]),this.__elementSvgText=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text");for(this.__elementSvgTextCurrentValue=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text-current-value");this.__elementSvgTextCurrentValue.length>0;)this.__elementSvgTextCurrentValue[0].parentNode.removeChild(this.__elementSvgTextCurrentValue[0]),this.__elementSvgTextCurrentValue=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text-current-value");for(this.__elementSvgMinMaxMarker=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-marker");this.__elementSvgMinMaxMarker.length>0;)this.__elementSvgMinMaxMarker[0].parentNode.removeChild(this.__elementSvgMinMaxMarker[0]),this.__elementSvgMinMaxMarker=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-marker");for(A=0;A<s.length;A++){var w=(s[A].fMaxValue-s[A].fMinValue)/b*C,R=(s[A].fMinValue-f)/b*C+5;if((E=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("height",15..toString()),E.setAttribute("y",M.toString()),"Error"==s[A].eRangeType)E.classList.add("tchmi-energy-monitoring-error"),E.setAttribute("x",R.toString()),E.setAttribute("width",w.toString()),(q=document.createElementNS("http://www.w3.org/2000/svg","title")).textContent=_+": "+s[A].fMinValue.toString()+"..."+s[A].fMaxValue.toString(),E.appendChild(q),this.__elementSvg[0].appendChild(E);if("Warning"==s[A].eRangeType)E.classList.add("tchmi-energy-monitoring-warning"),E.setAttribute("x",R.toString()),E.setAttribute("width",w.toString()),(q=document.createElementNS("http://www.w3.org/2000/svg","title")).textContent=o+": "+s[A].fMinValue.toString()+"..."+s[A].fMaxValue.toString(),E.appendChild(q),this.__elementSvg[0].appendChild(E)}for(let t=0;t<s.length;t++){var E;w=(s[t].fMaxValue-s[t].fMinValue)/b*C,R=(s[t].fMinValue-f)/b*C+5;if((E=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("height",15..toString()),E.setAttribute("y",M.toString()),"Target"==s[t].eRangeType)E.classList.add("tchmi-energy-monitoring-min-max"),E.setAttribute("x",R.toString()),E.setAttribute("width",w.toString()),E.setAttribute("opacity","1"),(q=document.createElementNS("http://www.w3.org/2000/svg","title")).textContent=c+": "+this.getTrimmedNumber(s[t].fMinValue,`fMinValue${t}`)+"..."+this.getTrimmedNumber(s[t].fMaxValue,`fMaxValue${t}`),E.appendChild(q),this.__elementSvg[0].appendChild(E)}if(null!=i){var V=(i-f)/b*C+5;if(V<20&&(V=20),V>440&&(V=440),V>=5&&V<=C+5){var k=document.createElementNS("http://www.w3.org/2000/svg","line");k.setAttribute("stroke-width","3"),k.setAttribute("x1",V.toString()),k.setAttribute("x2",V.toString()),k.setAttribute("y1",75..toString()),k.setAttribute("y2",78..toString()),k.classList.add("tchmi-energy-monitoring-mean"),this.__elementSvg[0].appendChild(k);var N=document.createElementNS("http://www.w3.org/2000/svg","circle");N.setAttribute("cx",V.toString()),N.setAttribute("r","3"),N.setAttribute("cy",(M+15+5).toString()),N.classList.add("tchmi-energy-monitoring-mean"),this.__elementSvg[0].appendChild(N);var D=document.createElementNS("http://www.w3.org/2000/svg","text");D.classList.add("tchmi-energy-monitoring-text","tchmi-energy-monitoring-mean"),D.setAttribute("x",V.toString()),D.setAttribute("y",92..toString()),D.textContent=this.getTrimmedNumberWithUnit(i,m,"mean"),this.__elementSvg[0].appendChild(D)}}if(null!=e){var L=(e-f)/b*C+5;L>C+5&&(L=C+5),L<5&&(L=5);var I=p;for(A=0;A<s.length;A++){e>=s[A].fMinValue&&e<s[A].fMaxValue&&(I=tt(s[A].eRangeType));var O=document.createElementNS("http://www.w3.org/2000/svg","line");O.classList.add("tchmi-energy-monitoring-current-value"),O.setAttribute("stroke-width","1"),O.setAttribute("x1",(L-1.5).toString()+"px"),O.setAttribute("y1",(M+15).toString()+"px"),O.setAttribute("x2",(L-1.5).toString()+"px"),O.setAttribute("y2",M.toString()+"px"),O.setAttribute("fill","none"),O.setAttribute("stroke",this.__fontColor),O.setAttribute("stroke-width","2px"),this.__elementSvg[0].appendChild(O);var P=document.createElementNS("http://www.w3.org/2000/svg","line");P.classList.add("tchmi-energy-monitoring-current-value"),P.setAttribute("stroke-width","1"),P.setAttribute("y1",(M+15).toString()+"px"),P.setAttribute("y2",M.toString()+"px"),P.setAttribute("fill","none"),P.setAttribute("stroke",this.__fontColor),P.setAttribute("stroke-width","2px"),P.setAttribute("x1",(L+1.5).toString()+"px"),P.setAttribute("x2",(L+1.5).toString()+"px"),this.__elementSvg[0].appendChild(P);var H=document.createElementNS("http://www.w3.org/2000/svg","text");H.classList.add("tchmi-energy-monitoring-text-current-value"),H.setAttribute("x","0px"),H.setAttribute("y",19..toString()),H.textContent=this.getTrimmedNumberWithUnit(e,m,"currentValue"),H.setAttribute("fill",I),H.setAttribute("stroke-width","0.05px"),H.setAttribute("stroke","grey"),this.__elementSvg[0].appendChild(H)}}var W=(this.__min-f)/b*C+5,F=(this.__max-f)/b*C+5,$=W,B=F;if($<20&&($=20),B>440&&(B=440),B-$<40)for(;B-$<40;)(B+=1)>440&&(B=440),($-=1)<20&&($=20);var G=document.createElementNS("http://www.w3.org/2000/svg","path");G.setAttribute("d","M"+(W-5).toString()+","+(M-10).toString()+" L"+(W+5).toString()+","+ +(M-10).toString()+" L"+W.toString()+","+(M-2).toString()+"Z"),G.classList.add("tchmi-energy-monitoring-min-max-value-marker");var U=p;for(A=0;A<s.length;A++)this.__min>=s[A].fMinValue&&this.__min<s[A].fMaxValue&&(U=tt(s[A].eRangeType));G.setAttribute("fill",U),G.setAttribute("stroke",this.generateColor(this.hexToRgbA(U),this.hexToRgbA(this.__fontColor),2)[1]),this.__elementSvg[0].appendChild(G);var j=document.createElementNS("http://www.w3.org/2000/svg","text");j.classList.add("tchmi-energy-monitoring-text","tchmi-energy-monitoring-min-max-value-text","tchmi-analytics-text"),j.setAttribute("x",$.toString()+"px"),j.setAttribute("y",(M-14).toString()),j.textContent=this.getTrimmedNumberWithUnit(n,m,"min"),this.__elementSvg[0].appendChild(j);var J=document.createElementNS("http://www.w3.org/2000/svg","path");J.setAttribute("d","M"+(F-5).toString()+","+(M-10).toString()+" L"+(F+5).toString()+","+ +(M-10).toString()+" L"+F.toString()+","+(M-2).toString()+"Z"),J.classList.add("tchmi-energy-monitoring-min-max-value-marker");var z=p;for(A=0;A<s.length;A++)this.__max>=s[A].fMinValue&&this.__max<s[A].fMaxValue&&(z=tt(s[A].eRangeType));J.setAttribute("fill",z),J.setAttribute("stroke",this.generateColor(this.hexToRgbA(z),this.hexToRgbA(this.__fontColor),2)[1]),this.__elementSvg[0].appendChild(J);var Z=document.createElementNS("http://www.w3.org/2000/svg","text");if(Z.classList.add("tchmi-energy-monitoring-text","tchmi-energy-monitoring-min-max-value-text","tchmi-analytics-text"),Z.setAttribute("x",B.toString()+"px"),Z.setAttribute("y",(M-14).toString()),Z.textContent=this.getTrimmedNumberWithUnit(r,m,"max"),this.__elementSvg[0].appendChild(Z),f<=0&&S>=0){var q,K=Math.abs(f)/b*C+5,Q=document.createElementNS("http://www.w3.org/2000/svg","line");Q.classList.add("tchmi-energy-monitoring-lines"),Q.setAttribute("stroke-width","1"),Q.setAttribute("stroke","white"),Q.setAttribute("x1",K.toString()+"px"),Q.setAttribute("y1",(M+15).toString()+"px"),Q.setAttribute("x2",K.toString()+"px"),Q.setAttribute("y2",M.toString()+"px"),(q=document.createElementNS("http://www.w3.org/2000/svg","title")).textContent="0 "+m,Q.appendChild(q),this.__elementSvg[0].appendChild(Q)}var X=document.createElementNS("http://www.w3.org/2000/svg","text");X.classList.add("tchmi-energy-monitoring-text","tchmi-energy-monitoring-text-timestamp","tchmi-analytics-text"),X.setAttribute("x","35px"),X.setAttribute("y",110..toString()),X.textContent=this.__minAlias+": "+this.DateTimeConverter(this.__minTimestamp,this.__monthAlias,!1),this.__elementSvg[0].appendChild(X);var Y=document.createElementNS("http://www.w3.org/2000/svg","text");function tt(t){return"Error"==t?x:"Warning"==t?v:"Min-Max"==t?d:p}Y.classList.add("tchmi-energy-monitoring-text","tchmi-energy-monitoring-text-timestamp","tchmi-analytics-text"),Y.setAttribute("x","235px"),Y.setAttribute("y",110..toString()),Y.textContent=this.__maxAlias+": "+this.DateTimeConverter(this.__maxTimestamp,this.__monthAlias,!1),this.__elementSvg[0].appendChild(Y),this.__minmaxButtonClicked||(this.__elementSvgMinMaxMarker=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-marker"),this.__elementSvgMinMaxMarkerText=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-min-max-value-text"),this.__elementSvgMinMaxTimes=this.__elementTemplateRoot.find(".tchmi-energy-monitoring-text-timestamp"),this.__elementSvgMinMaxTimes.css("visibility","collapse"),this.__elementSvgMinMaxMarker.css("visibility","collapse"),this.__elementSvgMinMaxMarkerText.css("visibility","collapse"))}}e.EnergyMonitoring=i}(i=e.Analytics||(e.Analytics={})),e.registerEx("EnergyMonitoring","TcHmi.Controls.Analytics",i.EnergyMonitoring)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));