var TcHmi;!function(e){let t;!function(t){let r;!function(t){class r extends e.Controls.Analytics.AnalyticsControl{constructor(e,t,r){super(e,t,r),this.__linearGrad="linearGradThermometer",this.__onResized=()=>(e,t)=>{let r=super.__getScaleFactor();if(0==this.__hasLicense)return;this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px");let i=this.getRenderedHeight()*r;this.__showValue&&(i-=30),this.__elementThermometerSvg.css("width",140*r),this.__elementThermometerSvg.css("height",i)}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=150,this.__defaultHeight=310,this.__elementThermometerSvg=this.__elementTemplateRoot.find(".tchmi-thermometer-template-svg"),this.__elementThermometerSvgDefs=this.__elementTemplateRoot.find(".tchmi-thermometer-defs"),this.__elementThermometerSvgOuterRect=this.__elementTemplateRoot.find(".tchmi-thermometer-outer-rect"),this.__elementThermometerSvgOuterCircle=this.__elementTemplateRoot.find(".tchmi-thermometer-outer-circle"),this.__elementThermometerSvgWhiteRect=this.__elementTemplateRoot.find(".tchmi-thermometer-white-rect"),this.__elementThermometerSvgWhiteCircle=this.__elementTemplateRoot.find(".tchmi-thermometer-white-circle"),this.__elementThermometerSvgInnerRect=this.__elementTemplateRoot.find(".tchmi-thermometer-inner-rect"),this.__elementThermometerTemperature=this.__elementTemplateRoot.find(".tchmi-thermometer-temperature-rect"),this.__elementThermometerUnit=this.__elementTemplateRoot.find(".tchmi-thermometer-unit-text"),this.__elementThermometerScala=this.__elementTemplateRoot.find(".tchmi-thermometer-scala"),this.__elementThermometerText=this.__elementTemplateRoot.find(".tchmi-thermometer-text"),this.__elValueAlias=this.__elementTemplateRoot.find(".tchmi-thermometer-value-alias"),this.__elValue=this.__elementTemplateRoot.find(".tchmi-thermometer-value"))}__init(){let e=[new t.Property(this,"ShowValue","Show Value",t.E_DataType.BOOLEAN),new t.Property(this,"Unit","Unit",t.E_DataType.STRING),new t.Property(this,"AmountDecimals","Amount Decimals",t.E_DataType.UINTEGER),new t.Property(this,"ThermometerColor","Thermometer Color",t.E_DataType.SOLIDCOLOR)];super.setEditableProperties(e),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setValue(t){var r=e.ValueConverter.toNumber(t);null===r&&(r=this.getAttributeDefaultValueInternal("Value")),r!==this.__value&&(this.__value=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getValue"]),this.__processValue())}getValue(){return this.__value}setMinValue(t){var r=e.ValueConverter.toNumber(t);null===r&&(r=this.getAttributeDefaultValueInternal("MinValue")),r!==this.__minValue&&(this.__minValue=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinValue"]),this.__processValue())}getMinValue(){return this.__minValue}setMaxValue(t){var r=e.ValueConverter.toNumber(t);null===r&&(r=this.getAttributeDefaultValueInternal("MaxValue")),r!==this.__maxValue&&(this.__maxValue=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMaxValue"]),this.__processValue())}getMaxValue(){return this.__maxValue}setShowValue(t){let r=e.ValueConverter.toBoolean(t);null===r&&(r=this.getAttributeDefaultValueInternal("ShowValue")),r!==this.__showValue&&(this.__showValue=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowValue"]),this.__processShowValue())}getShowValue(){return this.__showValue}__processShowValue(){this.__show(this.__elValueAlias,this.__showValue),this.__show(this.__elValue,this.__showValue),e.EventProvider.raise(`${this.__id}.onResized`,null)}setUnit(t){var r=e.ValueConverter.toString(t);null===r&&(r=this.getAttributeDefaultValueInternal("Unit")),r!==this.__unit&&(this.__unit=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getUnit"]),this.__processValue())}getUnit(){return this.__unit}setValueAlias(t){let r=e.ValueConverter.toString(t);null===r&&(r=this.getAttributeDefaultValueInternal("ValueAlias")),r!==this.__valueAlias&&(this.__valueAlias=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getValueAlias"]),this.__processValueAlias())}getValueAlias(){return this.__valueAlias}__processValueAlias(){this.__elValueAlias.html(this.__valueAlias)}setThermometerColor(t){let r=e.ValueConverter.toObject(t);null===r&&(r=this.getAttributeDefaultValueInternal("ThermometerColor")),r!==this.__thermometerColor&&(this.__thermometerColor=r,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getThermometerColor"]),this.__processThermometerColor())}getThermometerColor(){return this.__thermometerColor}__processThermometerColor(){this.__processColor()}__processValue(){this.__elValue.html(this.getTrimmedNumberWithUnit(this.__value,this.__unit)),this.__drawThermometer()}__drawThermometer(){if(null!=this.__value&&null!=this.__amountDecimals&&null!=this.__unit&&null!=this.__maxValue&&null!=this.__minValue){var e=this.__maxValue,t=this.__minValue;this.__value<this.__minValue&&(t=(this.__value-9)/10*10),this.__value>this.__maxValue&&(e=10*Math.round((this.__value+9)/10));var r=190-190*((this.__value-t)/(e-t))+20,i=1;if(r<100)for(var s=100;s>=r;)i+=1,s-=10;var l="M55,211 a25,25 0 1, 1 -20,0 L35 "+(r+i)+" "+function(e,t,r){var i=_(t,r),s=_(r,e),l=_(e,t),h=Math.acos((i*i-s*s+l*l)/(2*i*l)),o=.5*i*l*Math.sin(h),n=i*s*l/4/o;n=Math.round(1e3*n)/1e3;var m=+(Math.PI/2>h),a=+((t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])<0);return["M",e,"A",n,n,0,m,a,r].join(" ")}([35,r+i],[45,r],[55,r+i])+" L55,211z";function _(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}this.__elementThermometerTemperature.attr("d",l),this.__elementThermometerUnit[0].innerHTML=this.__unit;let o=136,n=30;for(;o>50;){var h=document.createElement("canvas").getContext("2d");h.font="bold "+n.toString()+"px sans-serif",o=h.measureText(this.__unit).width,n-=2}this.__elementThermometerUnit.css("font-size",n+"px"),this.__elementThermometerText=this.__elementTemplateRoot.find(".tchmi-thermometer-text");const m=this.__elementThermometerText.length,a=e-t,u=Math.max(this.getTrimmedNumber(e).length,this.getTrimmedNumber(t).length);let c;c=u>=8?6:u>=6?8:u>=5?10:u>=4?12:14,this.__elementThermometerText.css("font-size",`${c}px`);for(let t=0;t<m;t++){const r=this.getTrimmedNumber(e-t/(m-1)*a);this.__elementThermometerText[t].innerHTML=r}}}__processAmountDecimals(){super.__processAmountDecimals(),this.__processValue()}__processColorGradient(){this.__processColor()}__processColor(){this.__elementThermometerSvgDefs[0].innerHTML="",null!=this.__colorGradient&&null!=this.__thermometerColor&&this.CreateLinearGradient(this.__thermometerColor.color,this.__elementThermometerSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId),this.__elementThermometerTemperature.css("fill","url(#"+this.__linearGrad+this.__secureId+")"),this.__elementThermometerSvgOuterRect.css("fill",this.__controlColorMiddle),this.__elementThermometerSvgOuterCircle.css("fill",this.__controlColorMiddle),this.__elementThermometerSvgWhiteRect.css("fill",this.__controlChartColor),this.__elementThermometerSvgWhiteCircle.css("fill",this.__controlChartColor),this.__elementThermometerSvgInnerRect.css("fill",this.__controlColorLight),this.__elementThermometerUnit.css("fill",this.__fontColor),this.__elementThermometerScala.css("stroke",this.__fontColor),this.__elementThermometerText.css("fill",this.__fontColor)}}t.Thermometer=r}(r=t.Analytics||(t.Analytics={})),e.Controls.registerEx("Thermometer","TcHmi.Controls.Analytics",r.Thermometer)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));