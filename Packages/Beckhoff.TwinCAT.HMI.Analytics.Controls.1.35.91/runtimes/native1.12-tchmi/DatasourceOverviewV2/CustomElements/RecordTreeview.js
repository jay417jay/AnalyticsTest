var CustomElements;!function(e){class t extends e.AnalyticsBaseCustomElement{constructor(){super(),this.__htmlCodeTv1='<li>\n                                                        <span class="tv-caret text component-1">\n                                                            <svg class="tv-arrow tv-arrow-active svg-mask" height="8" width="4.5">\n                                                                <line x1="0.5" y1="0.5" x2="3.75" y2="3.75" style="stroke-width:1" />\n                                                                <line x1="3.75" y1="3.25" x2="0.5" y2="6.5" style="stroke-width:1" />\n                                                                >\n                                                            </svg>',this.__htmlCodeTv2='    </span>\n                                                        <div class="tv-box">\n                                                            <div class="tv-collapsible-box tv-collapsible-box-active">',this.__htmlCodeTv3="        </div>\n                                                        </div>\n                                                    </li>",this.__htmlCodeRecordSeparator='<hr style="width:auto;height:1px;margin:0;border-width:0;color:gray;background-color:gray" />',this.__elTvCarets=[],this.__elRecords=[],this.__classTodayAlias="today-alias",this.__classYesterdayAlias="yesterday-alias",this.__classThisWeekAlias="this-week-alias",this.__classLastWeekAlias="last-week-alias",this.__classThisMonthAlias="this-month-alias",this.__classLastMonthAlias="last-month-alias",this.__classLastSixMonthsAlias="last-six-months-alias",this.__classBeforeAlias="before-alias",this.__selectedRecordID=-1,this.__records=[],this.__isActiveConfig=!1,this.__isAnalysing=!1,this.__monthAlias=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.__todayAlias="Today",this.__yesterdayAlias="Yesterday",this.__thisWeekAlias="This week",this.__lastWeekAlias="Last week",this.__thisMonthAlias="This month",this.__lastMonthAlias="Last month",this.__lastSixMonthsAlias="Last 6 months",this.__beforeAlias="Before",this.__recordTrialAlias="No functionality granted to change a record with trial license!",this.__changeRecordAlertAlias="You cannot change the record while analysing the current record."}__init(){}__attach(){this.style.height="100%",this.__elTreeView=this.__elTemplateRoot.querySelector(".tv-ul")}get selectedRecordID(){return this.__selectedRecordID}set selectedRecordID(e){e!==this.__selectedRecordID&&(this.__selectedRecordID=e,this.__onSelectedRecordIDChanged())}__onSelectedRecordIDChanged(e){if(this.__isAttached){let t=this.__records.find(e=>e.nID===this.selectedRecordID);e&&null==t&&this.selectLastRecord(),this.__setSelectedRecord(t);for(const e of this.__elRecords){const t=e.dataset.recordId==this.__selectedRecordID.toString();e.classList.toggle("record-active",t)}this.__onPropertyChanged("selectedRecordID",this.__selectedRecordID)}}get selectedRecord(){return this.__selectedRecord}__setSelectedRecord(e){this.__isAttached&&(this.__selectedRecord=e,this.__onSelectedRecordChanged())}__onSelectedRecordChanged(){this.__isAttached&&this.__onPropertyChanged("selectedRecord",this.__selectedRecord)}get records(){return this.__records}set records(e){JSON.stringify(this.__records)!==JSON.stringify(e)&&(this.__records=e,this.__onRecordsChanged())}__onRecordsChanged(){this.__initTreeViewRecords(this.records),this.__onSelectedRecordIDChanged(!0),this.__onPropertyChanged("records",this.__records)}get isActiveConfig(){return this.__isActiveConfig}set isActiveConfig(e){e!==this.__isActiveConfig&&(this.__isActiveConfig=e,this.__onIsActiveConfigChanged())}__onIsActiveConfigChanged(){this.__isAttached&&this.__onPropertyChanged("isActiveConfig",this.__isActiveConfig)}get isAnalysing(){return this.__isAnalysing}set isAnalysing(e){e!==this.__isAnalysing&&(this.__isAnalysing=e,this.__onIsAnalysingChanged())}__onIsAnalysingChanged(){this.__isAttached&&this.__onPropertyChanged("isAnalysing",this.__isAnalysing)}__onComponent1ColorChanged(){if(super.__onComponent1ColorChanged(),this.__isAttached)for(const e of this.__elRecords)e.style.borderLeftColor=this.component1Color}get monthAlias(){return this.__monthAlias}set monthAlias(e){e!==this.__monthAlias&&(this.__monthAlias=e,this.__onMonthAliasChanged())}__onMonthAliasChanged(){if(this.__isAttached){const e=this.__elTemplateRoot.querySelectorAll(".tchmi-analytics-month");for(let t=0;t<e.length;++t){const s=parseInt(e[t].dataset.monthIndex);isNaN(s)||(e[t].innerHTML=this.monthAlias[s])}this.__onPropertyChanged("monthAlias",this.__monthAlias)}}get todayAlias(){return this.__todayAlias}set todayAlias(e){e!==this.__todayAlias&&(this.__todayAlias=e,this.__onTodayAliasChanged())}__onTodayAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classTodayAlias}`);null!==e&&(e.innerHTML=this.__todayAlias),this.__onPropertyChanged("todayAlias",this.__todayAlias)}}get yesterdayAlias(){return this.__yesterdayAlias}set yesterdayAlias(e){e!==this.__yesterdayAlias&&(this.__yesterdayAlias=e,this.__onYesterdayAliasChanged())}__onYesterdayAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classYesterdayAlias}`);null!==e&&(e.innerHTML=this.__yesterdayAlias),this.__onPropertyChanged("yesterdayAlias",this.__yesterdayAlias)}}get thisWeekAlias(){return this.__thisWeekAlias}set thisWeekAlias(e){e!==this.__thisWeekAlias&&(this.__thisWeekAlias=e,this.__onThisWeekAliasChanged())}__onThisWeekAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classThisWeekAlias}`);null!==e&&(e.innerHTML=this.__thisWeekAlias),this.__onPropertyChanged("thisWeekAlias",this.__thisWeekAlias)}}get lastWeekAlias(){return this.__lastWeekAlias}set lastWeekAlias(e){e!==this.__lastWeekAlias&&(this.__lastWeekAlias=e,this.__onLastWeekAliasChanged())}__onLastWeekAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classLastWeekAlias}`);null!==e&&(e.innerHTML=this.__lastWeekAlias),this.__onPropertyChanged("lastWeekAlias",this.__lastWeekAlias)}}get thisMonthAlias(){return this.__thisMonthAlias}set thisMonthAlias(e){e!==this.__thisMonthAlias&&(this.__thisMonthAlias=e,this.__onThisMonthAliasChanged())}__onThisMonthAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classThisMonthAlias}`);null!==e&&(e.innerHTML=this.__thisMonthAlias),this.__onPropertyChanged("thisMonthAlias",this.__thisMonthAlias)}}get lastMonthAlias(){return this.__lastMonthAlias}set lastMonthAlias(e){e!==this.__lastMonthAlias&&(this.__lastMonthAlias=e,this.__onLastMonthAliasChanged())}__onLastMonthAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classLastMonthAlias}`);null!==e&&(e.innerHTML=this.__lastMonthAlias),this.__onPropertyChanged("lastMonthAlias",this.__lastMonthAlias)}}get lastSixMonthsAlias(){return this.__lastSixMonthsAlias}set lastSixMonthsAlias(e){e!==this.__lastSixMonthsAlias&&(this.__lastSixMonthsAlias=e,this.__onLastSixMonthsAliasChanged())}__onLastSixMonthsAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classLastSixMonthsAlias}`);null!==e&&(e.innerHTML=this.__lastSixMonthsAlias),this.__onPropertyChanged("lastSixMonthsAlias",this.__lastSixMonthsAlias)}}get beforeAlias(){return this.__beforeAlias}set beforeAlias(e){e!==this.__beforeAlias&&(this.__beforeAlias=e,this.__onBeforeAliasChanged())}__onBeforeAliasChanged(){if(this.__isAttached){const e=this.__elTreeView.querySelector(`.${this.__classBeforeAlias}`);null!==e&&(e.innerHTML=this.__beforeAlias),this.__onPropertyChanged("beforeAlias",this.__beforeAlias)}}get recordTrialAlias(){return this.__recordTrialAlias}set recordTrialAlias(e){e!==this.__recordTrialAlias&&(this.__recordTrialAlias=e,this.__onRecordTrialAliasChanged())}__onRecordTrialAliasChanged(){this.__isAttached&&this.__onPropertyChanged("recordTrialAlias",this.__recordTrialAlias)}get changeRecordAlertAlias(){return this.__changeRecordAlertAlias}set changeRecordAlertAlias(e){e!==this.__changeRecordAlertAlias&&(this.__changeRecordAlertAlias=e,this.__onChangeRecordAlertAliasChanged())}__onChangeRecordAlertAliasChanged(){this.__isAttached&&this.__onPropertyChanged("changeRecordAlertAlias",this.__changeRecordAlertAlias)}selectLastRecord(){if(0===this.__records.length)return;const e=this.__records.reduce((e,t)=>e.dtSelectedRangeEnd.getTime()>t.dtSelectedRangeEnd.getTime()?e:t);void 0!==e&&(this.selectedRecordID=e.nID)}getSelectedRecordIdx(){return this.__records.findIndex(e=>e.nID===this.selectedRecordID)}__initTreeViewRecords(e){const t=new Date,s=t.getFullYear(),i={title:this.__todayAlias,class:this.__classTodayAlias,records:[]},r={title:this.__yesterdayAlias,class:this.__classYesterdayAlias,records:[]},a={title:this.__thisWeekAlias,class:this.__classThisWeekAlias,records:[]},n={title:this.__lastWeekAlias,class:this.__classLastWeekAlias,records:[]},o={title:this.__thisMonthAlias,class:this.__classThisMonthAlias,records:[]},l={title:this.__lastMonthAlias,class:this.__classLastMonthAlias,records:[]},_={title:this.__lastSixMonthsAlias,class:this.__classLastSixMonthsAlias,records:[]},h={title:s.toString(),records:[]},d={title:(s-1).toString(),records:[]},c={title:(s-2).toString(),records:[]},A={title:(s-3).toString(),records:[]},g={title:(s-4).toString(),records:[]},u={title:(s-5).toString(),records:[]},y={title:this.__beforeAlias,class:this.__classBeforeAlias,records:[]};for(let s=0;s<e.length&&this.__validRecord(e[s]);s++){const T=e[s].dtRecordEnd.toDate();this.__isToday(T,t)?i.records.push(e[s]):this.__isYesterday(T,t)?r.records.push(e[s]):this.__isThisWeek(T,t)?a.records.push(e[s]):this.__isLastWeek(T,t)?n.records.push(e[s]):this.__isThisMonth(T,t)?o.records.push(e[s]):this.__isLastMonth(T,t)?l.records.push(e[s]):this.__isLast6Months(T,t)?_.records.push(e[s]):this.__isYearsAgo(0,T,t)?h.records.push(e[s]):this.__isYearsAgo(1,T,t)?d.records.push(e[s]):this.__isYearsAgo(2,T,t)?c.records.push(e[s]):this.__isYearsAgo(3,T,t)?A.records.push(e[s]):this.__isYearsAgo(4,T,t)?g.records.push(e[s]):this.__isYearsAgo(5,T,t)?u.records.push(e[s]):y.records.push(e[s])}const T=[];T.push(this.__addTreeCaretAndRecords(i)),T.push(this.__addTreeCaretAndRecords(r)),T.push(this.__addTreeCaretAndRecords(a)),T.push(this.__addTreeCaretAndRecords(n)),T.push(this.__addTreeCaretAndRecords(o)),T.push(this.__addTreeCaretAndRecords(l)),T.push(this.__addTreeCaretAndRecords(_)),T.push(this.__addTreeCaretAndRecords(h)),T.push(this.__addTreeCaretAndRecords(d)),T.push(this.__addTreeCaretAndRecords(c)),T.push(this.__addTreeCaretAndRecords(A)),T.push(this.__addTreeCaretAndRecords(g)),T.push(this.__addTreeCaretAndRecords(u)),T.push(this.__addTreeCaretAndRecords(y));let C="";for(let e=0;e<T.length;++e)""!==T[e]&&(C+=T[e]);this.__elTreeView.innerHTML=C,this.__elRecords=Array.from(this.__elTreeView.querySelectorAll(".record")),this.__initTreeViewEvents(),this.__processColor()}__addTreeCaretAndRecords(t){if(0===t.records.length)return"";t.records.sort((function(e,t){return t.dtRecordEnd.toDate().getTime()-e.dtRecordEnd.toDate().getTime()}));let s=`${this.__htmlCodeTv1}<span class="${t.class}">${t.title}</span>${this.__htmlCodeTv2}`;for(let i=0;i<t.records.length;++i){0!=i&&(s+=this.__htmlCodeRecordSeparator);const r=t.records[i],a=new e.Record;a.attach(!1),a.recordID=r.nID,a.title=r.sDisplayName,a.startTime=r.dtRecordStart,a.endTime=r.dtRecordEnd,this.__elRecords.push(a),s+=a.innerHTML}return s+=this.__htmlCodeTv3,s}__isToday(e,t){return TcHmi.Controls.Analytics.DateExt.getTotalDays(t.getTime())===TcHmi.Controls.Analytics.DateExt.getTotalDays(e.getTime())}__isYesterday(e,t){return TcHmi.Controls.Analytics.DateExt.getTotalDays(t.getTime())-1===TcHmi.Controls.Analytics.DateExt.getTotalDays(e.getTime())}__isThisWeek(e,t){let s=t.getDay();return 0===s&&(s=7),TcHmi.Controls.Analytics.DateExt.getTotalDays(t.getTime())-TcHmi.Controls.Analytics.DateExt.getTotalDays(e.getTime())<s}__isLastWeek(e,t){let s=t.getDay();return 0===s&&(s=7),TcHmi.Controls.Analytics.DateExt.getTotalDays(t.getTime())-TcHmi.Controls.Analytics.DateExt.getTotalDays(e.getTime())-7<s}__isThisMonth(e,t){return t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()}__isLastMonth(e,t){let s=t.getMonth();return 0===s&&(s=12),TcHmi.Controls.Analytics.DateExt.getTotalDays(t.getTime())-TcHmi.Controls.Analytics.DateExt.getTotalDays(e.getTime())<32&&s-1===e.getMonth()}__isLast6Months(e,t){return t.getMonth()-5<=e.getMonth()&&t.getFullYear()===e.getFullYear()}__isYearsAgo(e,t,s){return s.getFullYear()-e===t.getFullYear()}__validRecord(e){return null!=e&&0!==e.nID}__initTreeViewEvents(){const t=this;for(const e of this.__elRecords)this.__addEventListener(e,"click",s);function s(){if(t.isAnalysing)return void e.PopupManager.createPopup(t.__changeRecordAlertAlias,e.PopupStatus.WARNING);const s=Number.parseInt(this.dataset.recordId);t.selectedRecordID=s}this.__elRecords.length>0&&void 0===this.selectedRecord&&this.__elRecords[0].click(),this.__elTvCarets=Array.from(this.__elTemplateRoot.querySelectorAll(".tv-caret"));for(const e of this.__elTvCarets)this.__eventListenerManager.addEventListener(e,"click",i);function i(){this.parentElement.querySelector(".tv-arrow").classList.toggle("tv-arrow-active");const e=this.parentElement.querySelector(".tv-box"),t=this.parentElement.querySelector(".tv-collapsible-box");t.classList.toggle("tv-collapsible-box-active"),t.classList.contains("tv-collapsible-box-active")?t.style.marginTop="0":t.style.marginTop=`${-e.getBoundingClientRect().height}px`}}__processColor(){this.__onFontColorChanged(),this.__onComponent1ColorChanged()}__getHtml(){return"<style>\n            * {\n                box-sizing: border-box;\n                user-select: none;\n            }\n\n            .root {\n                font-family: RobotoCondensed, 'Microsoft YaHei', '微软雅黑', 'Hiragino Sans GB', '冬青黑体', 'STXihei', '华文细黑', 'WenQuanYi Micro Hei', 'Meiryo', 'メイリオ', 'Hiragino Kaku Gothic Pro', 'ヒラギノ角ゴ ProN', 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Sans CJK JP', 'Noto Sans CJK KR', sans-serif;\n                font-size: 12px;\n                font-style: normal;\n                font-weight: normal;\n            }\n\n            .tv-records-area {\n                width: 320px;\n                border-right: 1px solid lightgray;\n                min-height: 236px;\n                max-height: 1200px;\n                overflow: auto;\n            }\n            \n            .tv-records {\n                height: auto;\n                box-sizing: border-box;\n                height: 100%;\n            }\n            \n            .tv-ul {\n                list-style-type: none;\n                margin: 0px;\n                padding: 0px;\n                margin-left: 0px;\n            }\n            \n            .tv-caret {\n                cursor: pointer;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n                overflow: hidden;\n                background-color: lightgray;\n                width: 100%;\n                display: block;\n                border-bottom: 1px solid gray;\n                padding-left: 5px;\n            }\n            \n            .tv-arrow {\n                display: inline-block;\n                margin-right: 6px;\n                margin-left: 2px;\n                transition-duration: 0.3s;\n                transition-property: transform;\n                transform: scale(1.5);\n            }\n            \n            .tv-arrow-active {\n                transform: scale(1.5) rotate(90deg);\n            }\n\n            .tv-box {\n                overflow: hidden;\n            }\n            \n            .tv-collapsible-box {\n                margin-top: 0;\n                transition-duration: 0.3s;\n            }\n            \n            .tv-collapsible-box-active {\n                margin-top: 0px;\n            }\n            \n            .template hr {\n                margin: 0px;\n            }\n            \n            .refresh-records {\n                position: absolute;\n                width: 25px;\n                height: 25px;\n                left:1px;\n                bottom:1px;\n            \n                cursor:pointer;\n                background-image: url(\"../Images/refresh_black.svg\");\n                background-size: contain;\n                background-repeat: no-repeat;\n            }\n            \n            .refresh-records-dark-theme {\n                background-image: url(\"../Images/refresh_white.svg\");\n            }\n            \n            .refresh-records:hover {\n                background-image: url(\"../Images/refresh_hover.svg\");\n            }\n            </style>\n\n            <div class=\"root tv-records-area minmaximize-trans\">\n                <div class=\"tv-records\">\n                    \x3c!-- Selection of Records--\x3e\n                    <ul class=\"tv-ul\">\n                    </ul>\n\n                </div>\n            </div>\n            "}}e.RecordTreeview=t}(CustomElements||(CustomElements={})),customElements.define("record-treeview",CustomElements.RecordTreeview);