var TcHmi;!function(t){let e;!function(e){let i;!function(e){class i extends t.Controls.Analytics.AnalyticsControl{constructor(e,i,s){super(e,i,s),this.__elInputSources=[],this.__elLiveInputSources=[],this.__elHistInputSources=[],this.__configurationAreaWidth=200,this.__areaColor="white",this.__isMaximized=!0,this.__isMinOrMaximizing=!1,this.__resizeStack=0,this.__transDuration=.6,this.__scopeStarted=!1,this.__onResized=()=>(t,e)=>{super.__getScaleFactor();if(0==this.__hasLicense)return;let i=0;this.__isMinOrMaximizing&&(i=1e3*this.__transDuration),++this.__resizeStack;const s=this.__resizeStack;setTimeout(()=>{if(s<this.__resizeStack&&this.__resizeStack<10)return;const t=this.__elThis[0].getBoundingClientRect(),e=t.width;t.height;this.__isMaximized&&(e>830?(this.__elConfigurationArea.removeClass("tchmi-ds-overview-v2-mobile"),this.__elContent.css("flex-direction","row"),this.__elMainContent.css("padding-left","10px")):(this.__elConfigurationArea.addClass("tchmi-ds-overview-v2-mobile"),this.__elContent.css("flex-direction","column"),this.__elMainContent.css("padding-left","0px")))},i)},this.__dataSources=null,this.__onResolverForDataSourceControllerWatchCallback=e=>{this.__isAttached||this.__suspendObjectResolver("DatasourceController"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__dsc)||(this.__dsc=e.value||null,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDatasourceController"]),this.__processDatasourceController()):t.Log.error(`[Source=Control, Module=TcHmi.Controls.Analytics.DatasourceOverviewV2, Id=${this.getId()}, Attribute=Results] Resolving symbols from object failed with error: ${t.Log.buildMessage(e.details)}`)}}__previnit(){if(super.__previnit(),!1===this.__hasLicense)return;this.__defaultWidth=630,this.__defaultHeight=630,this.__elAreas=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-area"),this.__elContent=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-content"),this.__elMainContent=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-main-content"),this.__elMinimize=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-minimize"),this.__elMaximize=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-maximize"),this.__elRecordButtons=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-record-buttons"),this.__elStartButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-record-button-start"),this.__elLoadIcon=this.__elStartButton.find("loader-icon")[0],this.__elLoadIcon.style.width="15px",this.__elLoadIcon.style.height="15px",this.__elCancelButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-record-button-cancel"),this.__elAnalysisStateText=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-analysis-state-text"),this.__elWrongConfig=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-wrong-config"),this.__elConfigurationArea=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-configurations-area"),this.__elConfigurationBox=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-configuration-box"),this.__elSelectedConfiguration=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-selected-configuration"),this.__elActivateChangesButton=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-activate-changes"),this.__elMainContainer=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-main-container"),this.__elHistData=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-historical-data"),this.__elConfigurations=$(),this.__elMinimizeName=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-minimize-text"),this.__elMaximizeName=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-maximize-text"),this.__elRefreshRecords=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-refresh-records"),this.__elThis.addClass("tchmi-ds-overview-v2-minmaximize-trans");const t=document.createElement("div");t.classList.add("tchmi-ds-overview-v2-selected-configuration-global","tchmi-analytics-text"),document.body.appendChild(t),this.__elSelectedConfigurationGlobal=$(t),this.__config=new l(this.__elActivateChangesButton,this.__elSelectedConfiguration,this.__elSelectedConfigurationGlobal,()=>{this.__refreshRecordsClicked(!0)})}__init(){super.__init()}__attach(){super.__attach(),this.__addEventListeners()}__detach(){super.__detach(),this.__calendarClosedDestroyEvent&&(this.__calendarClosedDestroyEvent(),this.__calendarClosedDestroyEvent=void 0)}destroy(){this.__keepAlive||super.destroy()}__processShowTitle(){}__processColor(){super.__processColor(),this.__elementsText=this.__elementTemplateRoot.find(".tchmi-analytics-text"),this.__elAreas=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-area"),this.__elSelectedConfigurationGlobal.css("color",this.__fontColor),this.__elAreas.css("background-color",this.__areaColor),this.__isDarkTheme?(this.__elRefreshRecords.addClass("tchmi-ds-overview-v2-refresh-records-dark-theme"),this.__elAreas.css("background-color",this.__colorDarkArea),null==this.__borderWidth&&this.__elThis.css("border","1px solid rgba(255,255,255,0.4)")):(this.__elRefreshRecords.removeClass("tchmi-ds-overview-v2-refresh-records-dark-theme"),this.__elAreas.css("background-color",this.__controlChartColor),null==this.__borderWidth&&this.__elThis.css("border","none")),this.__elMaximize.css("stroke",this.__fontColor),this.__elMinimize.css("stroke",this.__fontColor),this.__elementsText.css("color",this.__fontColor)}setWidthInternal(t){this.__widthInternal=t,super.setWidth(t)}__processWidth(t){super.__processWidth(t),this.__width!==this.__widthInternal&&(this.__maximizedWidth=this.__width,this.__isMaximized?this.setWidthInternal(this.__maximizedWidth):this.setWidthInternal(this.__minimizedWidth))}setWidthUnitInternal(t){this.__widthUnitInternal=t,super.setWidthUnit(t)}__processWidthUnit(){super.__processWidthUnit(),this.__widthUnit!==this.__widthUnitInternal&&(this.__maximizedWidthUnit=this.__widthUnit,this.__isMaximized?this.setWidthUnitInternal(this.__maximizedWidthUnit):this.setWidthUnitInternal(this.__minimizedWidthUnit))}setHeightInternal(t){this.__heightInternal=t,super.setHeight(t)}__processHeight(t){super.__processHeight(t),this.__height!==this.__heightInternal&&(this.__maximizedHeight=this.__height,this.__isMaximized?this.setHeightInternal(this.__maximizedHeight):this.setHeightInternal(this.__minimizedHeight))}setHeightUnitInternal(t){this.__heightUnitInternal=t,super.setHeightUnit(t)}__processHeightUnit(){super.__processHeightUnit(),this.__heightUnit!==this.__heightUnitInternal&&(this.__maximizedHeightUnit=this.__heightUnit,this.__isMaximized?this.setHeightUnitInternal(this.__maximizedHeightUnit):this.setHeightUnitInternal(this.__minimizedHeightUnit))}setDataSources(e){let i=t.ValueConverter.toObject(e);if(null===i&&(i=this.getAttributeDefaultValueInternal("DataSources")),i===this.__dataSources)return;const s=this.__dataSources;this.__dataSources=this.__assignDataSourcesTypes(i),t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getDataSources"]),this.__processDataSources(s)}getDataSources(){return this.__dataSources}__processDataSources(t){null==this.__dataSources||0===this.__dataSources.length?(this.__elContent.css("display","none"),this.__elWrongConfig.css("display","flex")):(this.__elWrongConfig.css("display","none"),this.__elContent.css("display","flex"),this.__processConfigurationAreaLength(),this.__significantConfigurationDataChanged(t)?(this.__reinitSideBar(),this.__reinitInputSourcesArea()):this.__updateInputSourceArea(),this.__config.setDataSources(this.__dataSources))}setDataSourceController(e){let i=t.ValueConverter.toObject(e);if(null===i&&(i=this.getAttributeDefaultValueInternal("DatasourceController")),i===this.__rawDsc)return;this.__rawDsc=i,this.__resolveDataSourceControllerSymbols();const s=this.__objectResolvers.get("DatasourceController");s&&(s.watchDestroyer&&s.watchDestroyer(),s.resolver.destroy());const a=new t.Symbol.ObjectResolver(i);this.__objectResolvers.set("DatasourceController",{resolver:a,watchCallback:this.__onResolverForDataSourceControllerWatchCallback,watchDestroyer:a.watch(this.__onResolverForDataSourceControllerWatchCallback)}),this.__processSymbolDatasourceController()}getDataSourceController(){return this.__rawDsc}__resolveDataSourceControllerSymbols(){if(null!=this.__rawDsc){const i=null!=this.__rawDsc.bReset;this.__symbolDsc={},this.__symbolDsc.nActiveConfigurationIdx=new t.Symbol(this.__rawDsc.nActiveConfigurationIdx),this.__symbolDsc.bStart=new t.Symbol(this.__rawDsc.bStart),this.__symbolDsc.bPause=new t.Symbol(this.__rawDsc.bPause),this.__symbolDsc.bCancel=new t.Symbol(this.__rawDsc.bCancel),i&&(this.__symbolDsc.bReset=new t.Symbol(this.__rawDsc.bReset)),this.__symbolDsc.bUpdateRecordList=new t.Symbol(this.__rawDsc.bUpdateRecordList),this.__config.symbolActiveConfigIdx=this.__symbolDsc.nActiveConfigurationIdx,new t.Symbol(this.__rawDsc.aInputSourceCtrls).readEx(s=>{const a=s.value.length;if(e.Utilities.isString(this.__rawDsc.aInputSourceCtrls)){this.__symbolDsc.aInputSourceCtrls=[];for(let e=0;e<a;e++){this.__symbolDsc.aInputSourceCtrls.push({});const s=this.__rawDsc.aInputSourceCtrls,a=`${s.substring(0,s.length-4)}[${e}]::`,n=this.__symbolDsc.aInputSourceCtrls[e];n.bStart=new t.Symbol(`${a}bStart%/s%`),n.bPause=new t.Symbol(`${a}bPause%/s%`),n.bCancel=new t.Symbol(`${a}bCancel%/s%`),i&&(n.bReset=new t.Symbol(`${a}bReset%/s%`)),n.nActiveRecordIdx=new t.Symbol(`${a}nActiveRecordIdx%/s%`),n.dtSelectedRangeStart=new t.Symbol(`${a}dtSelectedRangeStart%/s%`),n.dtSelectedRangeEnd=new t.Symbol(`${a}dtSelectedRangeEnd%/s%`),this.__processSymbolDatasourceController()}}})}}__processSymbolDatasourceController(){}__processDatasourceController(){null!==this.__dsc&&this.__dsc.nActiveConfigurationIdx!==this.__config.activeConfigIdx&&this.setSelectedConfigurationIndex(this.__dsc.nActiveConfigurationIdx,!1)}setMinimizedWidth(e){let i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedWidth")),i!==this.__minimizedWidth&&(this.__minimizedWidth=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMinimizedWidth"]),this.__processMinimizedWidth())}getMinimizedWidth(){return this.__minimizedWidth}__processMinimizedWidth(){this.__isMaximized||this.setWidthInternal(this.__minimizedWidth)}setMinimizedWidthUnit(e){let i=t.ValueConverter.toDimensionUnit(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedWidthUnit")),i!==this.__minimizedWidthUnit&&(this.__minimizedWidthUnit=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMinimizedWidthUnit"]),this.__processMinimizedWidthUnit())}getMinimizedWidthUnit(){return this.__minimizedWidthUnit}__processMinimizedWidthUnit(){this.__isMaximized||this.setWidthUnitInternal(this.__minimizedWidthUnit)}setMinimizedHeight(e){let i=t.ValueConverter.toNumber(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedHeight")),i!==this.__minimizedHeight&&(this.__minimizedHeight=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMinimizedHeight"]),this.__processMinimizedHeight())}getMinimizedHeight(){return this.__minimizedHeight}__processMinimizedHeight(){this.__isMaximized||this.setHeightInternal(this.__minimizedHeight)}setMinimizedHeightUnit(e){let i=t.ValueConverter.toDimensionUnit(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizedHeightUnit")),i!==this.__minimizedHeightUnit&&(this.__minimizedHeightUnit=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMinimizedHeightUnit"]),this.__processMinimizedHeightUnit())}getMinimizedHeightUnit(){return this.__minimizedHeightUnit}__processMinimizedHeightUnit(){this.__isMaximized||this.setHeightUnitInternal(this.__minimizedHeightUnit)}setScopeControls(e){let i=t.ValueConverter.toObject(e);null===i&&(i=this.getAttributeDefaultValueInternal("ScopeControls")),i!==this.__scopeControls&&(this.__scopeControls=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getScopeControls"]),this.__processScopeControls())}getScopeControls(){return this.__scopeControls}__processScopeControls(){}setActivateConfigurationAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ActivateConfigurationAlias")),i!==this.__activateConfigurationAlias&&(this.__activateConfigurationAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getActivateConfigurationAlias"]),this.__processActivateConfigurationAlias())}getActivateConfigurationAlias(){return this.__activateConfigurationAlias}__processActivateConfigurationAlias(){this.__elActivateChangesButton.html(this.__activateConfigurationAlias)}setActivateConfigurationAlertAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ActivateConfigurationAlertAlias")),i!==this.__activateConfigurationAlertAlias&&(this.__activateConfigurationAlertAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getActivateConfigurationAlertAlias"]))}getActivateConfigurationAlertAlias(){return this.__activateConfigurationAlertAlias}setNoRecordsInitAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("NoRecordsInitAlias")),i!==this.__noRecordsInitAlias&&(this.__noRecordsInitAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getNoRecordsInitAlias"]))}getNoRecordsInitAlias(){return this.__noRecordsInitAlias}setStartNotMappedAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("StartNotMappedAlias")),i!==this.__startNotMappedAlias&&(this.__startNotMappedAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStartNotMappedAlias"]))}getStartNotMappedAlias(){return this.__startNotMappedAlias}setTodayAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("TodayAlias")),i!==this.__todayAlias&&(this.__todayAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getTodayAlias"]),this.__processTodayAlias())}getTodayAlias(){return this.__todayAlias}__processTodayAlias(){for(const t of this.__elHistInputSources)t.todayAlias=this.__todayAlias}setYesterdayAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("YesterdayAlias")),i!==this.__yesterdayAlias&&(this.__yesterdayAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getYesterdayAlias"]),this.__processYesterdayAlias())}getYesterdayAlias(){return this.__yesterdayAlias}__processYesterdayAlias(){for(const t of this.__elHistInputSources)t.yesterdayAlias=this.__yesterdayAlias}setThisWeekAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ThisWeekAlias")),i!==this.__thisWeekAlias&&(this.__thisWeekAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getThisWeekAlias"]),this.__processThisWeekAlias())}getThisWeekAlias(){return this.__thisWeekAlias}__processThisWeekAlias(){for(const t of this.__elHistInputSources)t.thisWeekAlias=this.__thisWeekAlias}setLastWeekAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("LastWeekAlias")),i!==this.__lastWeekAlias&&(this.__lastWeekAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLastWeekAlias"]),this.__processLastWeekAlias())}getLastWeekAlias(){return this.__lastWeekAlias}__processLastWeekAlias(){for(const t of this.__elHistInputSources)t.lastWeekAlias=this.__lastWeekAlias}setThisMonthAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ThisMonthAlias")),i!==this.__thisMonthAlias&&(this.__thisMonthAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getThisMonthAlias"]),this.__processThisMonthAlias())}getThisMonthAlias(){return this.__thisMonthAlias}__processThisMonthAlias(){for(const t of this.__elHistInputSources)t.thisMonthAlias=this.__thisMonthAlias}setStartFailedAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("StartFailedAlias")),i!==this.__startFailedAlias&&(this.__startFailedAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStartFailedAlias"]),this.__processStartFailedAlias())}getStartFailedAlias(){return this.__startFailedAlias}__processStartFailedAlias(){}setLastMonthAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("LastMonthAlias")),i!==this.__lastMonthAlias&&(this.__lastMonthAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLastMonthAlias"]),this.__processLastMonthAlias())}getLastMonthAlias(){return this.__lastMonthAlias}__processLastMonthAlias(){for(const t of this.__elHistInputSources)t.lastMonthAlias=this.__lastMonthAlias}setLastSixMonthsAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("LastSixMonthsAlias")),i!==this.__lastSixMonthsAlias&&(this.__lastSixMonthsAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLastSixMonthsAlias"]),this.__processLastSixMonthsAlias())}getLastSixMonthsAlias(){return this.__lastSixMonthsAlias}__processLastSixMonthsAlias(){for(const t of this.__elHistInputSources)t.lastSixMonthsAlias=this.__lastSixMonthsAlias}setBeforeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("BeforeAlias")),i!==this.__beforeAlias&&(this.__beforeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getBeforeAlias"]),this.__processBeforeAlias())}getBeforeAlias(){return this.__beforeAlias}__processBeforeAlias(){for(const t of this.__elHistInputSources)t.beforeAlias=this.__beforeAlias}setRecordTrialAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("RecordTrialAlias")),i!==this.__recordTrialAlias&&(this.__recordTrialAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRecordTrialAlias"]))}getRecordTrialAlias(){return this.__recordTrialAlias}setChangeRecordAlertAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ChangeRecordAlertAlias")),i!==this.__changeRecordAlertAlias&&(this.__changeRecordAlertAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getChangeRecordAlertAlias"]))}getChangeRecordAlertAlias(){return this.__changeRecordAlertAlias}setGetRecordAlertAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("GetRecordAlertAlias")),i!==this.__getRecordAlertAlias&&(this.__getRecordAlertAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getGetRecordAlertAlias"]))}getGetRecordAlertAlias(){return this.__getRecordAlertAlias}setRecListAlertAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("RecListAlertAlias")),i!==this.__recListAlertAlias&&(this.__recListAlertAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRecListAlertAlias"]))}getRecListAlertAlias(){return this.__recListAlertAlias}setRefreshAlertAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("RefreshAlertAlias")),i!==this.__refreshAlertAlias&&(this.__refreshAlertAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRefreshAlertAlias"]))}getRefreshAlertAlias(){return this.__refreshAlertAlias}setActivateTrialAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ActivateTrialAlias")),i!==this.__activateTrialAlias&&(this.__activateTrialAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getActivateTrialAlias"]))}getActivateTrialAlias(){return this.__activateTrialAlias}setNotReadPropAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("NotReadPropAlias")),i!==this.__notReadPropAlias&&(this.__notReadPropAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getNotReadPropAlias"]))}getNotReadPropAlias(){return this.__notReadPropAlias}setFullMonthsAlias(e){let i=e;null===i&&(i=this.getAttributeDefaultValueInternal("FullMonthsAlias")),i!==this.__fullMonthsAlias&&(this.__fullMonthsAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getFullMonthsAlias"]),this.__processFullMonthAlias())}getFullMonthsAlias(){return this.__fullMonthsAlias}__processFullMonthAlias(){this.__fullMonthsAliasSplitted=e.Utilities.splitLocals(this.__fullMonthsAlias);for(const t of this.__elHistInputSources)t.fullMonthsAlias=this.__fullMonthsAliasSplitted}setStartTimeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("StartTimeAlias")),i!==this.__startTimeAlias&&(this.__startTimeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStartTimeAlias"]),this.__processStartTimeAlias())}getStartTimeAlias(){return this.__startTimeAlias}__processStartTimeAlias(){for(const t of this.__elHistInputSources)t.startTimeAlias=this.__startTimeAlias}setStopTimeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("StopTimeAlias")),i!==this.__stopTimeAlias&&(this.__stopTimeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStopTimeAlias"]),this.__processStopTimeAlias())}getStopTimeAlias(){return this.__stopTimeAlias}__processStopTimeAlias(){for(const t of this.__elHistInputSources)t.stopTimeAlias=this.__stopTimeAlias}setCurrentTimeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("CurrentTimeAlias")),i!==this.__currentTimeAlias&&(this.__currentTimeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getCurrentTimeAlias"]),this.__processCurrentTimeAlias())}getCurrentTimeAlias(){return this.__currentTimeAlias}__processCurrentTimeAlias(){for(const t of this.__elInputSources)t.currentTimeAlias=this.__currentTimeAlias}setMaximizeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MaximizeAlias")),i!==this.__maximizeAlias&&(this.__maximizeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMaximizeAlias"]),this.__processMaximizeAlias())}getMaximizeAlias(){return this.__maximizeAlias}__processMaximizeAlias(){this.__elMaximizeName.html(this.__maximizeAlias)}setMinimizeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MinimizeAlias")),i!==this.__minimizeAlias&&(this.__minimizeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMinimizeAlias"]),this.__processMinimizeAlias())}getMinimizeAlias(){return this.__minimizeAlias}__processMinimizeAlias(){this.__elMinimizeName.html(this.__minimizeAlias)}setNotFoundAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("NotFoundAlias")),i!==this.__notFoundAlias&&(this.__notFoundAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getNotFoundAlias"]))}getNotFoundAlias(){return this.__notFoundAlias}setHistAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("HistAlias")),i!==this.__histAlias&&(this.__histAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getHistAlias"]),this.__processHistAlias())}getHistAlias(){return this.__histAlias}__processHistAlias(){}setLiveAlias(e){var i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("LiveAlias")),i!==this.__liveAlias&&(this.__liveAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getLiveAlias"]),this.__processLiveAlias())}getLiveAlias(){return this.__liveAlias}__processLiveAlias(){}setDaysOfWeekAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("DaysOfWeekAlias")),i!==this.__daysOfWeekAlias&&(this.__daysOfWeekAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getDaysOfWeekAlias"]),this.__processDaysOfWeekAlias())}getDaysOfWeekAlias(){return this.__daysOfWeekAlias}__processDaysOfWeekAlias(){this.__daysOfWeekAliasSplitted=e.Utilities.splitLocals(this.__daysOfWeekAlias);for(const t of this.__elHistInputSources)t.daysOfWeekAlias=this.__daysOfWeekAliasSplitted}setIntervalTimeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("IntervalTimeAlias")),i!==this.__intervalTimeAlias&&(this.__intervalTimeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getIntervalTimeAlias"]),this.__processIntervalTimeAlias())}getIntervalTimeAlias(){return this.__intervalTimeAlias}__processIntervalTimeAlias(){for(const t of this.__elHistInputSources)t.intervalTimeAlias=this.__intervalTimeAlias}setStartAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("StartAlias")),i!==this.__startAlias&&(this.__startAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getStartAlias"]),this.__processStartAlias())}getStartAlias(){return this.__startAlias}__processStartAlias(){this.__getGlobalAnalysisState()!==s.RUNNING&&(this.__elStartButton[0].title=this.__startAlias);for(const t of this.__elHistInputSources)t.startAnalysisAlias=this.__startAlias}setPauseAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("PauseAlias")),i!==this.__pauseAlias&&(this.__pauseAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getPauseAlias"]),this.__processPauseAlias())}getPauseAlias(){return this.__pauseAlias}__processPauseAlias(){this.__getGlobalAnalysisState()===s.RUNNING&&(this.__elStartButton[0].title=this.__pauseAlias);for(const t of this.__elHistInputSources)t.pauseAnalysisAlias=this.__pauseAlias}setCancelAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("CancelAlias")),i!==this.__cancelAlias&&(this.__cancelAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getCancelAlias"]),this.__processCancelAlias())}getCancelAlias(){return this.__cancelAlias}__processCancelAlias(){this.__elCancelButton[0].title=this.__cancelAlias;for(const t of this.__elHistInputSources)t.cancelAlias=this.__cancelAlias}setResetAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("ResetAlias")),i!==this.__resetAlias&&(this.__resetAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getResetAlias"]),this.__processResetAlias())}getResetAlias(){return this.__resetAlias}__processResetAlias(){for(const t of this.__elHistInputSources)t.resetIntervalAlias=this.__resetAlias}setRefreshRecordsAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("RefreshRecordsAlias")),i!==this.__refreshRecordsAlias&&(this.__refreshRecordsAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getRefreshRecordsAlias"]),this.__processRefreshRecordsAlias())}getRefreshRecordsAlias(){return this.__refreshRecordsAlias}__processRefreshRecordsAlias(){}setSetTimeAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("SetTimeAlias")),i!==this.__setTimeAlias&&(this.__setTimeAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getSetTimeAlias"]),this.__processSetTimeAlias())}getSetTimeAlias(){return this.__setTimeAlias}__processSetTimeAlias(){for(const t of this.__elHistInputSources)t.setTimeAlias=this.__setTimeAlias}setDayAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("DayAlias")),i!==this.__dayAlias&&(this.__dayAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getDayAlias"]),this.__processDayAlias())}getDayAlias(){return this.__dayAlias}__processDayAlias(){}setMonthAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("MonthAlias")),i!==this.__monthAlias&&(this.__monthAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){e.DCTimestruct.monthAlias=this.__monthAlias;const t=e.Utilities.splitLocals(this.__monthAlias);for(const e of this.__elInputSources)e.monthAlias=t;const i=this.__elementTemplateRoot.find(".tchmi-analytics-month");for(let e=0;e<i.length;++e){const s=parseInt(i[e].dataset.monthIndex);isNaN(s)||(i[e].innerHTML=t[s])}}setCancelRestartAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("CancelRestartAlias")),i!==this.__cancelRestartAlias&&(this.__cancelRestartAlias=i,t.EventProvider.raise(this.__id+".onFunctionResultChanged",["getCancelRestartAlias"]))}getCancelRestartAlias(){return this.__cancelRestartAlias}setAnalysingAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("AnalysingAlias")),i!==this.__analysingAlias&&(this.__analysingAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getAnalysingAlias"]),this.__processAnalysingAlias())}getAnalysingAlias(){return this.__analysingAlias}__processAnalysingAlias(){for(const t of this.__elHistInputSources)t.analysingAlias=this.__analysingAlias}setStartingAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("StartingAlias")),i!==this.__startingAlias&&(this.__startingAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStartingAlias"]),this.__processStartingAlias())}getStartingAlias(){return this.__startingAlias}__processStartingAlias(){}setPausedAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("PausedAlias")),i!==this.__pausedAlias&&(this.__pausedAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getPausedAlias"]),this.__processPausedAlias())}getPausedAlias(){return this.__pausedAlias}__processPausedAlias(){for(const t of this.__elHistInputSources)t.pausedAlias=this.__pausedAlias}setEndedAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("EndedAlias")),i!==this.__endedAlias&&(this.__endedAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getEndedAlias"]),this.__processEndedAlias())}getEndedAlias(){return this.__endedAlias}__processEndedAlias(){}setNotStartedAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("NotStartedAlias")),i!==this.__notStartedAlias&&(this.__notStartedAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getNotStartedAlias"]),this.__processNotStartedAlias())}getNotStartedAlias(){return this.__notStartedAlias}__processNotStartedAlias(){for(const t of this.__elHistInputSources)t.notStartedAlias=this.__notStartedAlias}setNotConnectedAlias(e){let i=t.ValueConverter.toString(e);null===i&&(i=this.getAttributeDefaultValueInternal("NotConnectedAlias")),i!==this.__notConnectedAlias&&(this.__notConnectedAlias=i,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getNotConnectedAlias"]),this.__processNotConnectedAlias())}getNotConnectedAlias(){return this.__notConnectedAlias}__processNotConnectedAlias(){for(const t of this.__elHistInputSources)t.notConnectedAlias=this.__notConnectedAlias}setSelectedConfigurationIndex(t,e=!0){this.__elConfigurations.length>t?(this.__elConfigurations.removeClass("tchmi-ds-overview-v2-configuration-selected"),$(this.__elConfigurations[t]).addClass("tchmi-ds-overview-v2-configuration-selected"),this.setSelectedConfiguration(this.__dataSources[t],e)):this.__config.setActiveConfigurationIndex(t,e)}setSelectedConfiguration(t,e=!0){if(null==this.__selectedConfiguration||this.__selectedConfiguration.nID!=t.nID){if(this.__selectedConfiguration=t,null==t)return void this.__elSelectedConfiguration.html("No configuration selected");this.__elSelectedConfiguration.html(this.__selectedConfiguration.sDisplayName),this.__config.setActiveConfigurationIndex(this.__dataSources.indexOf(t),e),this.__reinitInputSourcesArea(),this.__processColor()}else this.__selectedConfiguration=t}__assignDataSourcesTypes(t){for(let i=0;i<t.length;++i)for(let s=0;s<t[i].aInputSources.length;++s){const a=t[i].aInputSources[s];a.dtTimestamp=Object.assign(new e.DCTimestruct,a.dtTimestamp);for(let t=0;t<a.stHist.aRecords.length;++t){const i=a.stHist.aRecords[t];this.__validRecord(i)&&(i.dtRecordStart=Object.assign(new e.DCTimestruct,i.dtRecordStart),i.dtRecordEnd=Object.assign(new e.DCTimestruct,i.dtRecordEnd),i.dtSelectedRangeStart=Object.assign(new e.DCTimestruct,i.dtSelectedRangeStart),i.dtSelectedRangeEnd=Object.assign(new e.DCTimestruct,i.dtSelectedRangeEnd))}}return t}__significantConfigurationDataChanged(t){if(null==t||this.__dataSources.length!==t.length)return!0;for(let e=0;e<this.__dataSources.length;++e){const i=this.__dataSources[e],s=t[e];if(i.nID!==s.nID||i.aInputSources.length!==s.aInputSources.length)return!0;for(let t=0;t<i.aInputSources.length;++t){const e=i.aInputSources[t],a=s.aInputSources[t];if(e.sStreamSystemID.toString()!==a.sStreamSystemID.toString())return!0}}return!1}__reinitInputSourcesArea(){this.__elHistData.html(""),this.__elInputSources=[],this.__elLiveInputSources=[],this.__elHistInputSources=[],this.__elCustomElements=[],this.removeEventListeners("inputSource");const t=this.__config.isActiveConfig(),i=this.__dataSources[this.__config.configIdx];let s=!1;for(let n=0;n<i.aInputSources.length;n++){const l=i.aInputSources[n],o=this.__symbolDsc.aInputSourceCtrls[n];if(l.eSourceType===a.Live||l.eSourceType===a.HistMqtt||l.eSourceType===a.HistFile){let i;if(l.eSourceType===a.Live){const t=new CustomElements.LiveInputSource;this.addEventListener(t,"onlineStatusChanged",()=>{this.__processGlobalAnalysisStates()},!1,"inputSource"),i=t,this.__elLiveInputSources.push(t)}else{s=!0;const e=new CustomElements.HistInputSourceController;e.symbolInputSourceCtrl=o,e.selectedRecordID=l.stHist.nCurrentRecordID,e.displayName=l.sDisplayName,e.isActiveConfig=t,e.startAnalysisAlias=this.__startAlias,e.pauseAnalysisAlias=this.__pauseAlias,e.resetIntervalAlias=this.__resetAlias,e.setTimeAlias=this.__setTimeAlias,e.cancelAlias=this.__cancelAlias,e.startTimeAlias=this.__startTimeAlias,e.stopTimeAlias=this.__stopTimeAlias,e.intervalTimeAlias=this.__intervalTimeAlias,e.fullMonthsAlias=this.__fullMonthsAliasSplitted,e.daysOfWeekAlias=this.__daysOfWeekAliasSplitted,e.todayAlias=this.__todayAlias,e.yesterdayAlias=this.__yesterdayAlias,e.thisWeekAlias=this.__thisWeekAlias,e.lastWeekAlias=this.__lastWeekAlias,e.thisMonthAlias=this.__thisMonthAlias,e.lastMonthAlias=this.__lastMonthAlias,e.lastSixMonthsAlias=this.__lastSixMonthsAlias,this.addEventListener(e,"analysisStateChanged",()=>{this.__processGlobalAnalysisStates()},!1,"inputSource"),i=e,this.__elHistInputSources.push(e)}i.component1Color=this.__component1Color,i.component2Color=this.__component2Color,i.inputSource=l,i.displayName=l.sDisplayName,i.monthAlias=e.Utilities.splitLocals(this.__monthAlias),i.currentTimeAlias=this.__currentTimeAlias,this.__elInputSources.push(i),this.__elCustomElements.push(i),this.__elHistData[0].appendChild(i)}else this.Log(`Source type "${l.eSourceType}" not supported.`)}this.__config.elHistInputSources=this.__elHistInputSources,this.__elRecordButtons.toggleClass("tchmi-analytics-display-none",!s),this.__elRefreshRecords.toggleClass("tchmi-analytics-display-none",!s),super.__processFontColor()}__updateInputSourceArea(){const t=this.__dataSources[this.__config.configIdx];for(let e=0;e<t.aInputSources.length;e++){const i=t.aInputSources[e];i.eSourceType!==a.Live&&i.eSourceType!==a.HistMqtt&&i.eSourceType!==a.HistFile||(this.__elInputSources[e].inputSource=i)}this.__processGlobalAnalysisStates()}__processConfigurationAreaLength(){let t=0;for(let e=0;e<this.__dataSources.length;++e)t<this.__dataSources[e].sDisplayName.length&&(t=this.__dataSources[e].sDisplayName.length);let e=100+240*t/36;e>340?e=340:e<200&&(e=200),e!=this.__configurationAreaWidth&&(this.__configurationAreaWidth=e,this.__elConfigurationArea[0].style.setProperty("--configuration-area-width",`${this.__configurationAreaWidth}px`))}__validRecord(t){return null!=t&&0!==t.nID}__reinitSideBar(){this.__elConfigurationBox.html("");for(let t=0;t<this.__dataSources.length;++t)this.__elConfigurationBox.append('<hr style="width:auto;height:1px;border-width:0;background-color:rgba(190, 190, 190, 0.5)">'),this.__elConfigurationBox.append('<div class="tchmi-ds-overview-v2-configuration tchmi-analytics-component-1 tchmi-analytics-text">'+this.__dataSources[t].sDisplayName+"</div>");this.__elConfigurationBox.append('<hr style="width:auto;height:1px;border-width:0;background-color:rgba(190, 190, 190, 0.5)">'),this.__elConfigurations=this.__elementTemplateRoot.find(".tchmi-ds-overview-v2-configuration"),this.__config.setElConfigurations(this.__elConfigurations),this.__initConfigurationSideBarEvents(),this.setSelectedConfigurationIndex(this.__config.configIdx,!1),this.__refreshRecordsClicked(!0)}__initConfigurationSideBarEvents(){const t=this;this.__elConfigurations.click((function(){const e=$(this);if(!e.hasClass("tchmi-ds-overview-v2-configuration-selected")){const i=t.__elConfigurations.index(e);t.setSelectedConfigurationIndex(i)}}))}__processGlobalAnalysisStates(t){const i=this.__getGlobalAnalysisStates(t);if(t)for(const t of this.__elHistInputSources)t.analysisState!==e.E_AnalysisState.RUNNING&&(t.analysisState=e.E_AnalysisState.STARTING);let a="";switch(i.running>0&&(a+=`${i.running}/${i.sourcesCount} ${this.__analysingAlias}`),i.starting&&(a+=`, ${i.starting}/${i.sourcesCount} ${this.__startingAlias}`),i.paused&&(a+=`, ${i.paused}/${i.sourcesCount} ${this.__pausedAlias}`),i.ended&&(a+=`, ${i.ended}/${i.sourcesCount} ${this.__endedAlias}`),i.idle&&(a+=`, ${i.idle}/${i.sourcesCount} ${this.__notStartedAlias}`),i.notConnected&&(a+=`, ${i.notConnected}/${i.sourcesCount} ${this.__notConnectedAlias}`),""===a&&(a="-"),a.length>=2&&","===a[0]&&" "===a[1]&&(a=a.substring(2)),1===i.sourcesCount&&(a=a.replace("1/1 ","")),this.__elAnalysisStateText.html(a),this.__getGlobalAnalysisState(t)){case s.ENDED:case s.IDLE:this.__elStartButton.removeClass("tchmi-ds-overview-v2-record-button-start-active"),this.__elStartButton.removeClass("tchmi-ds-overview-v2-record-button-start-starting"),this.__elCancelButton.addClass("tchmi-ds-overview-v2-record-button-disabled");break;case s.STARTING:this.__elStartButton.addClass("tchmi-ds-overview-v2-record-button-start-starting"),this.__elCancelButton.removeClass("tchmi-ds-overview-v2-record-button-disabled"),this.__startScope();break;case s.RUNNING:this.__elStartButton.addClass("tchmi-ds-overview-v2-record-button-start-active"),this.__elStartButton.removeClass("tchmi-ds-overview-v2-record-button-start-starting"),this.__elCancelButton.removeClass("tchmi-ds-overview-v2-record-button-disabled");break;case s.PAUSED:this.__elStartButton.removeClass("tchmi-ds-overview-v2-record-button-start-active"),this.__elStartButton.removeClass("tchmi-ds-overview-v2-record-button-start-starting"),this.__elCancelButton.removeClass("tchmi-ds-overview-v2-record-button-disabled");break;case s.NOT_CONNECTED:this.__createPopup(this.__notConnectedAlias,CustomElements.PopupStatus.ALARM)}}__getGlobalAnalysisState(t){const e=this.__getGlobalAnalysisStates(t);return e.running>0&&this.__elLiveInputSources.length<e.running?s.RUNNING:e.notConnected===e.sourcesCount?s.NOT_CONNECTED:e.idle===e.sourcesCount?s.IDLE:e.ended===e.sourcesCount?s.ENDED:e.starting>0?s.STARTING:e.paused>0?s.PAUSED:s.IDLE}__getGlobalAnalysisStates(t){const i={idle:0,notConnected:0,starting:0,running:0,paused:0,ended:0,sourcesCount:this.__elInputSources.length};if(t)i.starting=this.__elHistInputSources.length;else for(const t of this.__elHistInputSources){switch(t.analysisState){case e.E_AnalysisState.NOT_CONNECTED:i.notConnected++;break;case e.E_AnalysisState.STARTING:i.starting++;break;case e.E_AnalysisState.RUNNING:i.running++;break;case e.E_AnalysisState.PAUSED:i.paused++;break;case e.E_AnalysisState.ENDED:i.ended++;break;case e.E_AnalysisState.IDLE:case e.E_AnalysisState.CANCELED:case e.E_AnalysisState.ENDING:default:i.idle++}}for(const t of this.__elLiveInputSources){t.getOnlineStatus()!==CustomElements.E_OnlineStatus.OFFLINE?i.running++:i.notConnected++}return i}__startScope(){const e=t.Controls.getVersion("TcHmi.Controls.Beckhoff.TcHmiScopeControl.TcHmiScopeControl");if(null===e)return;const i=Date.now();void 0!==this.__scopeStartDate&&i-this.__scopeStartDate<1500||(this.__scopeStartDate=i,this.__scopeStarted=!0,e.major<=1&&e.minor<=12&&e.build<=758&&e.revision<=8?this.__startScope_1_12_758_8():this.__startScope_latest())}__startScope_1_12_758_8(){const e=document.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl");for(const i of e){t.Controls.get(i.id).startRecord()}}__startScope_latest(){for(const t of this.__scopeControls){const e={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:"TcHmiScope.StartRecord",writeValue:{configName:t}}]};this.__requestExtSymbol(e)}}__stopScope(){setTimeout(()=>{if(!this.__scopeStarted)return;const e=t.Controls.getVersion("TcHmi.Controls.Beckhoff.TcHmiScopeControl.TcHmiScopeControl");if(null===e)return;const i=Date.now();void 0!==this.__scopeStartDate&&i-this.__scopeStartDate<500||(this.__scopeStartDate=i,this.__scopeStarted=!1,e.major<=1&&e.minor<=12&&e.build<=758&&e.revision<=8?this.__stopScope_1_12_758_8():this.__stopScope_latest())},1500)}__stopScope_1_12_758_8(){const e=document.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl");for(const i of e){t.Controls.get(i.id).stopRecord()}}__stopScope_latest(){for(const t of this.__scopeControls){const e={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:"TcHmiScope.StopRecord",writeValue:{configName:t,deleteFromScopeServer:!1}}]};this.__requestExtSymbol(e)}}__requestExtSymbol(e){return t.Server.isWebsocketReady()?t.Server.requestEx(e,{parallel:!0},(function(e){let i=e.response;if(!i||null!=i.error)return;let s=i.commands;if(void 0!==s)for(let e=0,i=s.length;e<i;e++){let i=s[e];if(null!=i.error)return;t.Log.debug(i.symbol+"="+i.readValue)}})):console.error("No request send, because websocket connection not ready!"),this}__addEventListeners(){this.addEventListener(this.__elActivateChangesButton[0],"click",()=>{this.__activateConfig()}),this.addEventListener(this.__elMinimize[0],"click",()=>{this.__minimizeClicked()}),this.addEventListener(this.__elMaximize[0],"click",()=>{this.__maximizeClicked()}),this.addEventListener(this.__elStartButton[0],"click",()=>{this.__startButtonClicked()}),this.addEventListener(this.__elCancelButton[0],"click",()=>{this.__cancelButtonClicked()}),this.addEventListener(this.__elRefreshRecords[0],"click",()=>{this.__refreshRecordsClicked()})}__minimizeClicked(){this.__isMaximized=!1,this.__isMinOrMaximizing=!0,this.__hasFullLicense&&this.__activateConfig(),this.__elThis.find(".tchmi-ds-overview-v2-minmaximize-trans").addBack().css("transition-duration",this.__transDuration+"s"),this.__elementTemplateRoot.css("padding","0px"),this.__elMainContainer.addClass("tchmi-ds-overview-v2-transparent"),this.__elConfigurationArea.addClass("tchmi-ds-overview-v2-minimized"),this.__elActivateChangesButton.css("opacity","0"),this.__elMinimize.css("opacity","0"),this.__elMinimize.css("visibility","collapse"),this.__elMaximize.css("opacity","1"),this.__elMaximize.css("visibility","visible"),this.__elMainContent.css("padding-left","0px"),this.__elRefreshRecords.css("opacity","0");for(const t of this.__elInputSources)t.minimize=!0;this.setWidthInternal(this.__minimizedWidth),this.setWidthUnitInternal(this.__minimizedWidthUnit),this.setHeightInternal(this.__minimizedHeight),this.setHeightUnitInternal(this.__minimizedHeightUnit),setTimeout(()=>this.__isMinOrMaximizing=!1,1e3*this.__transDuration)}__maximizeClicked(){this.__isMaximized=!0,this.__isMinOrMaximizing=!0,this.__elThis.find(".tchmi-ds-overview-v2-minmaximize-trans").addBack().css("transition-duration",this.__transDuration+"s"),this.__elementTemplateRoot.css("padding","5px"),this.__elMainContainer.removeClass("tchmi-ds-overview-v2-transparent"),this.__elConfigurationArea.removeClass("tchmi-ds-overview-v2-minimized"),this.__elActivateChangesButton.css("opacity",""),this.__elMinimize.css("opacity","1"),this.__elMinimize.css("visibility","visible"),this.__elMaximize.css("opacity","0"),this.__elMaximize.css("visibility","collapse"),this.__elMainContent.css("padding-left","10px"),this.__elRefreshRecords.css("opacity","1");for(const t of this.__elInputSources)t.minimize=!1;this.setWidthInternal(this.__maximizedWidth),this.setWidthUnitInternal(this.__maximizedWidthUnit),this.setHeightInternal(this.__maximizedHeight),this.setHeightUnitInternal(this.__maximizedHeightUnit),setTimeout(()=>this.__isMinOrMaximizing=!1,1e3*this.__transDuration)}__startButtonClicked(){var t;if(this.__elStartButton.hasClass("tchmi-ds-overview-v2-record-button-disabled"))return;if(!this.__config.isActiveConfig())return void this.__createPopup(this.__activateConfigurationAlertAlias,CustomElements.PopupStatus.WARNING);const e=this.__getGlobalAnalysisState();e===s.RUNNING?this.__symbolDsc.bPause.write(!0,t=>{this.__logIfError(t)}):(e!==s.PAUSED&&(null===(t=this.__symbolDsc.bReset)||void 0===t||t.write(!0,t=>{this.__logIfError(t)})),setTimeout(()=>{this.__processGlobalAnalysisStates(!0)},50),setTimeout(()=>{console.log("start data"),this.__symbolDsc.bStart.write(!0,t=>{this.__logIfError(t)})},750))}__cancelButtonClicked(){if(!this.__elCancelButton.hasClass("tchmi-ds-overview-v2-record-button-disabled"))if(this.__config.isActiveConfig()){this.__symbolDsc.bCancel.write(!0,t=>{this.__logIfError(t)});for(const t of this.__elHistInputSources)t.forceCancel()}else this.__createPopup(this.__activateConfigurationAlertAlias,CustomElements.PopupStatus.WARNING)}__refreshRecordsClicked(t){if(!t){if(!this.__config.isActiveConfig())return void this.__createPopup(this.__recListAlertAlias,CustomElements.PopupStatus.WARNING);if(this.__getGlobalAnalysisState()!==s.IDLE&&this.__getGlobalAnalysisState()!==s.ENDED)return void this.__createPopup(this.__changeRecordAlertAlias,CustomElements.PopupStatus.WARNING)}this.__symbolDsc.bUpdateRecordList.write(!0,t=>{this.__logIfError(t)}),this.__elRefreshRecords.addClass("tchmi-analytics-rotate"),setTimeout(()=>{this.__elRefreshRecords.removeClass("tchmi-analytics-rotate")},1e3)}__activateConfig(){this.__hasFullLicense?this.__config.activateConfig():this.__createPopup(this.__activateTrialAlias,CustomElements.PopupStatus.WARNING)}}let s,a,n;e.DatasourceOverviewV2=i,function(t){t[t.IDLE=0]="IDLE",t[t.NOT_CONNECTED=1]="NOT_CONNECTED",t[t.STARTING=2]="STARTING",t[t.RUNNING=3]="RUNNING",t[t.PAUSED=4]="PAUSED",t[t.ENDED=5]="ENDED"}(s||(s={}));class l{constructor(t,e,i,s){this.elHistInputSources=[],this.symbolActiveConfigIdx=null,this.configIdx=0,this.activeConfigIdx=-1,this.__elActivateButton=t,this.__elSelectedConfiguration=e,this.__elSelectedConfigurationGlobal=i,this.__refreshRecordsFunc=s,this.__elConfigurations=$(),this.activeConfigIdx=-1}isActiveConfig(){return this.activeConfigIdx===this.configIdx}isInitializing(){return-1==this.activeConfigIdx}activateConfig(t=!0){if(null!==this.symbolActiveConfigIdx){this.setConfig(),this.symbolActiveConfigIdx.write(this.activeConfigIdx),this.__refreshRecordsFunc(!0);for(const t of this.elHistInputSources)t.isActiveConfig=!0;const t=this.activeConfigIdx;this.__elConfigurations.length>t&&(this.__elConfigurations.removeClass("tchmi-ds-overview-v2-configuration-active"),$(this.__elConfigurations[t]).addClass("tchmi-ds-overview-v2-configuration-active")),this.processChanges()}}setActiveConfigurationIndex(t,e=!0){if(!e){this.activeConfigIdx=t;const e=this.activeConfigIdx;this.__elConfigurations.length>e&&(this.__elConfigurations.removeClass("tchmi-ds-overview-v2-configuration-active"),$(this.__elConfigurations[e]).addClass("tchmi-ds-overview-v2-configuration-active")),this.highlightGlobalConfiguration(!0)}this.configIdx=t,this.processChanges()}setElConfigurations(t){this.__elConfigurations=t;const e=this.activeConfigIdx;this.__elConfigurations.length>e&&(this.__elConfigurations.removeClass("tchmi-ds-overview-v2-configuration-active"),$(this.__elConfigurations[e]).addClass("tchmi-ds-overview-v2-configuration-active"))}setDataSources(t){this.__dataSources=t,this.highlightGlobalConfiguration(!1)}processChanges(){this.isActiveConfig()?this.__elActivateButton.addClass("tchmi-ds-overview-v2-disabled"):this.__elActivateButton.removeClass("tchmi-ds-overview-v2-disabled"),this.configIdx!==this.activeConfigIdx?this.__elSelectedConfiguration.addClass("tchmi-ds-overview-v2-not-activated"):this.__elSelectedConfiguration.removeClass("tchmi-ds-overview-v2-not-activated")}setConfig(){this.activeConfigIdx!==this.configIdx&&(this.activeConfigIdx=this.configIdx,this.highlightGlobalConfiguration(!0))}highlightGlobalConfiguration(t=!1){if(null!=this.__dataSources&&this.__dataSources.length>this.activeConfigIdx){if(this.__oldActiveConfigName!==this.__dataSources[this.activeConfigIdx].sDisplayName||t){this.__oldActiveConfigName=this.__dataSources[this.activeConfigIdx].sDisplayName,this.__elSelectedConfigurationGlobal.html(this.__dataSources[this.activeConfigIdx].sDisplayName),this.__elSelectedConfigurationGlobal.css("font-size","80px");let t=this.__elSelectedConfigurationGlobal.css("color");this.__elSelectedConfigurationGlobal.css("color","#2ab934");let e=this;setTimeout((function(){e.__elSelectedConfigurationGlobal.css("font-size",""),e.__elSelectedConfigurationGlobal.css("color",t)}),2e3)}}else this.__elSelectedConfigurationGlobal.html("")}}e.DatasourceController=l,function(t){t[t.Live=0]="Live",t[t.HistMqtt=1]="HistMqtt",t[t.HistFile=2]="HistFile"}(a||(a={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_CONNECTED=1]="NOT_CONNECTED",t[t.RECEIVE_DATA=2]="RECEIVE_DATA",t[t.RECEIVE_DATA_CANCEL=3]="RECEIVE_DATA_CANCEL",t[t.RECEIVE_DATA_PAUSE=4]="RECEIVE_DATA_PAUSE",t[t.ERROR=5]="ERROR",t[t.READY=6]="READY",t[t.WAIT_FOR_DATA=7]="WAIT_FOR_DATA"}(n=e.E_DataSourceState||(e.E_DataSourceState={}))}(i=e.Analytics||(e.Analytics={})),e.registerEx("DatasourceOverviewV2","TcHmi.Controls.Analytics",i.DatasourceOverviewV2)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));