var TcHmi;!function(t){let e;!function(e){let s;!function(e){class s extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,s){super(t,e,s),this.__linearGrad="linearGradRainflow",this.__onResized=()=>(t,e)=>{let s=super.__getScaleFactor();0!=this.__hasLicense&&(this.__elementNameAlias.css("margin-bottom",10*s),this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),!0===this.__showTitle?this.__elementSvg.css("height",150*s):this.__elementSvg.css("height",175*s),this.__elementSvg.css("width",290*s),this.__elementSvg.css("left",10*s),"Show Halfcycle Table"===this.__chooseDisplay?(this.__elementMatrix.css("width",290*s),this.__elementMatrix.css("height",110*s),this.__elementMatrix.css("margin-left",5*s)):"Show Miners Rule"===this.__chooseDisplay?(this.__elementMinersRule.css("width",150*s),this.__elementMinersRule.css("height",110*s),this.__elementMinersRule.css("margin-left",75*s)):(this.__elementMatrix.css("width",270*s),this.__elementMatrix.css("height",100*s),this.__elementMatrix.css("margin-left",15*s)),this.__elementSvg.css("margin-bottom",10*s))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=310,this.__defaultHeight=310,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-svg"),this.__elementSvgCoordSystem=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-svg-coord-system"),this.__elementSvgTimeAlias=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-svg-time-alias"),this.__elementSvgStressAlias=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-svg-stress-alias"),this.__elementSvgGraph=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-svg-graph"),this.__elementSvgRaindrops=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-svg-raindrops"),this.__elementMatrix=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix"),this.__elementMatrixFirstCell=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-first-cell"),this.__elementMatrixFirstLine=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-first-line"),this.__elementMatrixStressBinsAlias=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-stress-bins-alias"),this.__elementMatrixHalfCyclesAlias=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-half-cycles-alias"),this.__elementMatrixCells=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-cells"),this.__elementMatrixLines=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-lines"),this.__elementMatrixText=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-text"),this.__elementMatrixDefs=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-defs"),this.__elementMinersRule=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-miners-rule"),this.__elementMinersRuleGraph=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-miners-rule-graph"),this.__elementMinersRuleAliasText=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-miners-rule-text-small-start-bold"),this.__elementMinersRuleText=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-miners-rule-text"),this.__elementMinersRuleTextResult=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-miners-rule-text-result"),this.__elementMinersRuleTextDiv=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-miners-rule-div"))}__init(){super.setEditableProperties([]),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setStressAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("StressAlias")),s!==this.__stressAlias&&(this.__stressAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStressAlias"]),this.__processStressAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getStressAlias(){return this.__stressAlias}__processStressAlias(){this.__elementSvgStressAlias[0].textContent=this.__stressAlias}setTimeAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("TimeAlias")),s!==this.__timeAlias&&(this.__timeAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTimeAlias"]),this.__processTimeAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getTimeAlias(){return this.__timeAlias}__processTimeAlias(){this.__elementSvgTimeAlias[0].textContent=this.__timeAlias}setStressBinsAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("StressBinsAlias")),s!==this.__stressBinsAlias&&(this.__stressBinsAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStressBinsAlias"]),this.__processStressBinsAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getStressBinsAlias(){return this.__stressBinsAlias}__processStressBinsAlias(){this.__elementMatrixStressBinsAlias[0].textContent=this.__stressBinsAlias.split(" ",2)[0],this.__elementMatrixStressBinsAlias[1].textContent=this.__stressBinsAlias.split(" ",2)[1]}setHalfCyclesAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("HalfCyclesAlias")),s!==this.__halfCyclesAlias&&(this.__halfCyclesAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getHalfCyclesAlias"]),this.__processHalfCyclesAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getHalfCyclesAlias(){return this.__halfCyclesAlias}__processHalfCyclesAlias(){this.__elementMatrixHalfCyclesAlias[0].textContent=this.__halfCyclesAlias.split(" ",2)[0],this.__elementMatrixHalfCyclesAlias[1].textContent=this.__halfCyclesAlias.split(" ",2)[1]}setsnAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("snAlias")),s!==this.__snAlias&&(this.__snAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getsnAlias"]),this.__processsnAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getsnAlias(){return this.__snAlias}__processsnAlias(){this.__elementMinersRuleAliasText[0].textContent="n: "+this.__snAlias}setNAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("NAlias")),s!==this.__NAlias&&(this.__NAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getNAlias"]),this.__processNAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getNAlias(){return this.__NAlias}__processNAlias(){this.__elementMinersRuleAliasText[1].textContent="N: "+this.__NAlias}setSAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("SAlias")),s!==this.__sAlias&&(this.__sAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getSAlias"]),this.__processSAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getSAlias(){return this.__sAlias}__processSAlias(){this.__elementMinersRuleAliasText[2].textContent="S: "+this.__sAlias,this.__elementMinersRuleAliasText[2].textContent="S: "+this.__sAlias}getFontsizeTitle(){return this.__fontsizeTitle}getChooseDisplay(){return this.__chooseDisplay}setChooseDisplay(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("ChooseDisplay")),s!==this.__chooseDisplay&&(this.__chooseDisplay=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getChooseDisplay"]),this.__processChooseDisplay())}getStressBins(){return this.__stressBins}setStressBins(e){var s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("StressBins")),s!==this.__stressBins&&(this.__stressBins=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStressBins"]),this.__processStressBins())}__processStressBins(){this.__processChooseDisplay()}getMinersResult(){return this.__minersResult}setMinersResult(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("MinersResult")),s!==this.__minersResult&&(this.__minersResult=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMinersResult"]),this.__processMinersResult())}__processMinersResult(){this.__processChooseDisplay()}setShowOuterBins(e){var s=t.ValueConverter.toBoolean(e);null===s&&(s=this.getAttributeDefaultValueInternal("ShowOuterBins")),s!==this.__showOuterBins&&(this.__showOuterBins=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowTitle"]),this.__processShowOuterBins())}getShowOuterBins(){return this.__showOuterBins}__processShowOuterBins(){this.__processStressBins()}__processColorGradient(){this.__processColor()}__processChooseDisplay(){void 0!==this.__chooseDisplay&&("Show Halfcycle Table"===this.__chooseDisplay?(this.__elementMinersRule.css("display","none"),this.__elementMinersRuleTextDiv.css("display","none"),void 0!==this.__stressBins&&void 0!==this.__showOuterBins&&(this.__elementMatrix.css("display","block"),this.DrawMatrix(this.__stressBins,this.__showOuterBins))):"Show Miners Rule"===this.__chooseDisplay?(this.__elementMatrix.css("display","none"),this.__elementMinersRuleTextDiv.css("display","none"),void 0!==this.__minersResult&&null!==this.__minersResult&&(this.__elementMinersRule.css("display","block"),this.DrawMinersRule(this.__minersResult))):(this.__elementMinersRule.css("display","none"),void 0!==this.__stressBins&&void 0!==this.__showOuterBins&&(this.__elementMatrix.css("display","block"),this.DrawMatrix(this.__stressBins,this.__showOuterBins),this.__elementMinersRuleTextDiv.css("display","block"),this.__elementMinersRuleTextDiv[0].innerHTML="C = "+this.__minersResult)),t.EventProvider.raise(`${this.__id}.onResized`,null))}__processColor(){if(void 0!==this.__colorGradient&&void 0!==this.__controlColorLightPlus){this.__elementMatrixDefs[0].innerHTML="",this.CreateLinearGradient(this.hexToRgbA(this.__controlColorLightPlus),this.__elementMatrixDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId+"LightPlus");for(var t=0;t<1;t++)this.__elementMatrixDefs[0].children[t].setAttribute("x2","0%"),this.__elementMatrixDefs[0].children[t].setAttribute("y2","100%"),this.__elementMatrixDefs[0].children[t].children[1].setAttribute("offset","35%")}this.__elementSvgTimeAlias.css("fill",this.__fontColor),this.__elementSvgStressAlias.css("fill",this.__fontColor),this.__elementSvgCoordSystem.css("stroke",this.__fontColor),this.__elementSvgGraph.css("stroke",this.__controlColorDark),this.__elementSvgRaindrops.css("stroke","#009900"),this.__elementMatrixFirstCell.css("stroke",this.__controlColorDark),this.__elementMatrixFirstCell.css("fill","url(#"+this.__linearGrad+this.__secureId+"LightPlus"),this.__elementMatrixFirstLine.css("stroke",this.__controlColorDark),this.__elementMatrixStressBinsAlias.css("fill",this.__fontColor),this.__elementMatrixHalfCyclesAlias.css("fill",this.__fontColor),this.__elementMatrixCells=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-cells"),this.__elementMatrixCells.css("fill","url(#"+this.__linearGrad+this.__secureId+"LightPlus"),this.__elementMatrixCells.css("stroke",this.__controlColorDark),this.__elementMatrixLines=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-lines"),this.__elementMatrixLines.css("stroke",this.__controlColorDark),this.__elementMatrixText.css("fill",this.__fontColor),this.__elementMinersRuleGraph.css("stroke",this.__controlColorLight),this.__elementMinersRuleGraph.css("fill","none"),this.__elementMinersRuleText.css("fill",this.__controlColorLight)}DrawMatrix(t,e){let s;s=!0===e?t:t.slice(1,t.length-1);let i=250/s.length,l=108;for(s.length>=3&&(l=324/s.length),this.__elementMatrixFirstCell[0].setAttribute("height",l+"px"),this.__elementMatrixFirstLine[0].setAttribute("y1",l/2+1+"px"),this.__elementMatrixFirstLine[0].setAttribute("y2",l/2+1+"px"),this.__elementMatrixStressBinsAlias[0].setAttribute("y",l/6+8+"px"),this.__elementMatrixStressBinsAlias[1].setAttribute("y",l/3+8+"px"),this.__elementMatrixHalfCyclesAlias[0].setAttribute("y",l/3*2+8+"px"),this.__elementMatrixHalfCyclesAlias[1].setAttribute("y",l/6*5+8+"px"),this.__elementMatrixCells=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-cells");this.__elementMatrixCells.length>0;)this.__elementMatrixCells[0].parentNode.removeChild(this.__elementMatrixCells[0]),this.__elementMatrixCells=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-cells");for(this.__elementMatrixLines=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-lines");this.__elementMatrixLines.length>0;)this.__elementMatrixLines[0].parentNode.removeChild(this.__elementMatrixLines[0]),this.__elementMatrixLines=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-lines");for(this.__elementMatrixText=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-text");this.__elementMatrixText.length>0;)this.__elementMatrixText[0].parentNode.removeChild(this.__elementMatrixText[0]),this.__elementMatrixText=this.__elementTemplateRoot.find(".tchmi-rainflow-counting-matrix-text");for(let t=0;t<s.length;t++){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.classList.add("tchmi-rainflow-counting-matrix-cells"),n.setAttribute("x",t*i+41+"px"),n.setAttribute("y","1px"),n.setAttribute("width",i+"px"),n.setAttribute("height",l+"px"),this.__elementMatrix[0].appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","line");r.classList.add("tchmi-rainflow-counting-matrix-lines"),r.setAttribute("x1",t*i+41+"px"),r.setAttribute("y1",l/2+1+"px"),r.setAttribute("x2",(t+1)*i+41+"px"),r.setAttribute("y2",l/2+1+"px"),this.__elementMatrix[0].appendChild(r);var _=document.createElementNS("http://www.w3.org/2000/svg","text");_.classList.add("tchmi-rainflow-counting-matrix-text"),_.setAttribute("x",t*i+i/2+41+"px"),_.setAttribute("y",l/4+8+"px"),!1===e?_.textContent=(t+1).toString():0===t?_.textContent="<":t===s.length-1?_.textContent=">":_.textContent=t.toString(),this.__elementMatrix[0].appendChild(_);var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.classList.add("tchmi-rainflow-counting-matrix-text"),a.setAttribute("x",t*i+i/2+41+"px"),a.setAttribute("y",l/4*3+8+"px"),a.textContent=s[t],this.__elementMatrix[0].appendChild(a),this.__processColor()}}DrawMinersRule(e){var s=20,i=document.createElement("canvas").getContext("2d");i.font="bold "+s.toString()+"px sans-serif";let l="C = "+e,n=i.measureText(t.ValueConverter.toString(l)).width;for(;n>=140;)s-=1,i.font="bold "+t.ValueConverter.toString(s)+"px sans-serif",n=i.measureText(t.ValueConverter.toString(l)).width;this.__elementMinersRuleTextResult[0].textContent="C = "+e,this.__elementMinersRuleTextResult[0].setAttribute("font-size",s+"px")}}e.RainflowCounting=s}(s=e.Analytics||(e.Analytics={})),e.registerEx("RainflowCounting","TcHmi.Controls.Analytics",s.RainflowCounting)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));