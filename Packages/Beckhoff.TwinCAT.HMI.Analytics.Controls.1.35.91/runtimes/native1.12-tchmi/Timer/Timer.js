var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.Analytics.AnalyticsControl{constructor(e,t,i){super(e,t,i),this.__radialGrad="radialGradTimer",this.__onResized=()=>(e,t)=>{let i=super.__getScaleFactor();if(0==this.__hasLicense)return;this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px");let s=140-this.__elementNameAlias[0].clientHeight-this.__elementTime[0].clientHeight/i;this.__elementSvg.css("height",s*i),this.__elementSvg.css("width",s*i),0==this.__showClock?(this.__elementTime.css("font-size",35*i),1==this.__showAMPM&&this.__elementTime.css("font-size",33*i)):this.__elementTime.css("font-size",16*i)}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=150,this.__defaultHeight=150,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-timer-svg"),this.__elementSvgDefs=this.__elementTemplateRoot.find(".tchmi-timer-defs"),this.__elementCircleInner=this.__elementTemplateRoot.find(".tchmi-timer-circle-inner"),this.__elementCircleOuter=this.__elementTemplateRoot.find(".tchmi-timer-circle-outer"),this.__elementMarks=this.__elementTemplateRoot.find(".tchmi-marks"),this.__elementHour=this.__elementTemplateRoot.find(".tchmi-hour"),this.__elementMinute=this.__elementTemplateRoot.find(".tchmi-minute"),this.__elementSecond=this.__elementTemplateRoot.find(".tchmi-seconds"),this.__elementPin=this.__elementTemplateRoot.find(".tchmi-pin"),this.__elementClockText=this.__elementTemplateRoot.find(".tchmi-timer-text"),this.__elementCircleSection=this.__elementTemplateRoot.find(".tchmi-circle-section"),this.__elementTime=this.__elementTemplateRoot.find(".tchmi-timer-time"))}__init(){let e=[new t.Property(this,"ShowTime","ShowTime",t.E_DataType.BOOLEAN),new t.Property(this,"ShowMilliSeconds","Show Milliseconds",t.E_DataType.BOOLEAN),new t.Property(this,"ShowAMPM","Show AM-PM",t.E_DataType.BOOLEAN),new t.Property(this,"ClockColor","Clock Color",t.E_DataType.SOLIDCOLOR)];super.setEditableProperties(e),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setClockColor(t){let i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("ClockColor")),i!==this.__clockColor&&(this.__clockColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getClockColor"]),this.__processTimeType())}getClockColor(){return this.__clockColor}setOutput(t){var i=e.ValueConverter.toBoolean(t);null!==i?i!==this.__output&&(this.__output=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOutput"]),this.__processOutput()):i=this.getAttributeDefaultValueInternal("Output")}getOutput(){return this.__output}__processOutput(){this.__processTimeType()}setTimeType(t){var i=e.ValueConverter.toString(t);null!==i?i!==this.__timeType&&(this.__timeType=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTimeType"]),this.__processTimeType()):i=this.getAttributeDefaultValueInternal("TimeType")}getTimeType(){return this.__timeType}setTimeSpan(t){var i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("TimeSpan")),JSON.stringify(i)!==JSON.stringify(this.__timeSpan)&&(this.__timeSpan=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTimeSpan"]),this.__processTimeType())}getTimeSpan(){return this.__timeSpan}setDateTime(t){var i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("DateTime")),JSON.stringify(i)!==JSON.stringify(this.__dateTime)&&(this.__dateTime=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDateTime"]),this.__processTimeType())}getDateTime(){return this.__dateTime}setShowTime(t){var i=e.ValueConverter.toBoolean(t);null!==i?i!==this.__showTime&&(this.__showTime=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowTime"]),this.__processShowTime()):i=this.getAttributeDefaultValueInternal("ShowTime")}getShowTime(){return this.__showTime}__processShowTime(){!0===this.__showTime?(this.__elementTime.css("display","block"),this.__processTimeType()):this.__elementTime.css("display","none"),e.EventProvider.raise(`${this.__id}.onResized`,null)}setShowClock(t){var i=e.ValueConverter.toBoolean(t);null!==i?i!==this.__showClock&&(this.__showClock=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowClock"]),this.__processShowClock()):i=this.getAttributeDefaultValueInternal("ShowClock")}getShowClock(){return this.__showClock}__processShowClock(){!0===this.__showClock?(this.__elementSvg.css("display","block"),this.__processTimeType()):this.__elementSvg.css("display","none"),e.EventProvider.raise(`${this.__id}.onResized`,null)}__processTimeType(){"Timespan"===this.__timeType?this.__processTimeSpan():this.__processDateTime(),this.__processColor(),e.EventProvider.raise(this.__id+".onResized",null)}setShowMilliSeconds(t){var i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("ShowMilliSeconds")),i!==this.__showMilliSeconds&&(this.__showMilliSeconds=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowMilliSeconds"]),this.__processShowMilliSeconds())}getShowMilliSeconds(){return this.__showMilliSeconds}__processShowMilliSeconds(){this.__processTimeSpan(),this.__processDateTime()}setShowAMPM(t){var i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("ShowAMPM")),i!==this.__showAMPM&&(this.__showAMPM=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowAMPM"]),this.__processShowMilliSeconds())}getShowAMPM(){return this.__showAMPM}__processAMPM(){this.__processDateTime()}setMonthAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("MonthAlias")),i!==this.__monthAlias&&(this.__monthAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){t.DCTimestruct.monthAlias=this.__monthAlias,this.__processTimeSpan(),this.__processDateTime()}setDayAlias(t){var i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("DayAlias")),i!==this.__dayAlias&&(this.__dayAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getDayAlias"]),this.__processDayAlias())}getDayAlias(){return this.__dayAlias}__processDayAlias(){this.__processTimeSpan(),this.__processDateTime()}__processTimeSpan(){"Timespan"===this.__timeType&&(void 0!==this.__timeSpan&&null!==this.__output&&void 0!==this.__output&&null!==this.__dayAlias&&void 0!==this.__dayAlias&&void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds&&void 0!==this.__clockColor&&null!==this.__clockColor&&void 0!==this.__timeType&&void 0!==this.__controlColorDark&&void 0!==this.__controlChartColor&&void 0!==this.__controlColorMiddle&&(this.__elementTime.text(this.TimeSpanConverter(this.__timeSpan,this.__showMilliSeconds,this.__dayAlias,!1)),this.DrawClockTimer(this.__elementCircleSection,this.__elementClockText,this.__elementHour,this.__elementMinute,this.__elementSecond,this.__timeSpan,this.__output,this.__timeType)),e.EventProvider.raise(`${this.__id}.onResized`,null))}__processDateTime(){if("Datetime"===this.__timeType){if(void 0!==this.__dateTime&&void 0!==this.__monthAlias&&null!==this.__monthAlias&&void 0!==this.__output&&null!==this.__output&&void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds&&void 0!==this.__showAMPM&&null!==this.__showAMPM&&void 0!==this.__clockColor&&null!==this.__clockColor&&void 0!==this.__timeType){var t=this.DateTimeConverter(this.__dateTime,this.__monthAlias,this.__showMilliSeconds,this.__showAMPM,!0);this.__elementTime[0].innerHTML=t,this.DrawClockTimer(this.__elementCircleSection,this.__elementClockText,this.__elementHour,this.__elementMinute,this.__elementSecond,this.__dateTime,this.__output,this.__timeType)}e.EventProvider.raise(`${this.__id}.onResized`,null)}}__processColorGradient(){this.__processColor()}__processColor(){if(this.__elementSvgDefs[0].innerHTML="",void 0!==this.__colorGradient&&void 0!==this.__controlColorDark&&void 0!==this.__clockColor&&void 0!==this.__controlColorMiddle)if(this.CreateRadialGradient(this.hexToRgbA(this.__controlColorDark),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId,95),this.CreateRadialGradient(this.hexToRgbA(this.__controlColorDark),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"Pin"),this.CreateRadialGradient(this.__clockColor.color,this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"OutputTrue"),this.CreateRadialGradient(this.hexToRgbA(this.__controlColorMiddle),this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+"OutputFalse"),0!==this.__colorGradient){var e=this.__secureId+"_insetShadowTimer",t="<filter id="+e+'><feGaussianBlur stdDeviation = "2" /> <feComposite operator="in" in2 = "SourceGraphic" /></filter>';this.__elementSvgDefs[0].insertAdjacentHTML("beforeend",t),this.__elementCircleInner.css("filter","url(#"+e+")")}else this.__elementCircleInner.css("filter","none");this.__elementCircleInner.css("fill",this.__controlChartColor),this.__elementCircleInner.css("stroke",this.__controlColorDark),this.__elementCircleOuter.css("stroke","url(#"+this.__radialGrad+this.__secureId+")"),this.__elementMarks.css("stroke",this.__controlColorMiddle),this.__elementHour.css("stroke",this.__controlColorDark),this.__elementMinute.css("stroke",this.__controlColorMiddle),this.__elementSecond.css("stroke",this.__controlColorLight),this.__elementPin.css("fill","url(#"+this.__radialGrad+this.__secureId+"Pin)"),this.__elementClockText.css("fill",this.__fontColor),1==this.__output?this.__elementCircleSection.css("fill","url(#"+this.__radialGrad+this.__secureId+"OutputTrue)"):this.__elementCircleSection.css("fill","url(#"+this.__radialGrad+this.__secureId+"OutputFalse)")}DrawClockTimer(e,t,i,s,_,o,l,r){var n,h,a,c,d;"Datetime"===r?(h=o.wHour,d=o.wMinute,c=o.wSecond,n=this.convertDateTimeTimer(o)):(h=o.wHours,d=o.wMinutes,c=o.wSeconds,n=this.convertTimeSpan(o));var m=6*c,u=6*d+c/60*6,p=30*(a=h%12)+d/60*30;if(n<=60&&"Timespan"===r){this.fillClockTimer(e,30,c,60);for(var T=0;T<t[0].children.length;T++)t[0].children[T].innerHTML=(5*(T+1)).toString();i.css("display","none"),s.css("display","none"),this.drawHandTimer(_,m)}else if(n<=3600&&"Timespan"===r){this.fillClockTimer(e,27,d+c/60,60);for(T=0;T<t[0].children.length;T++)t[0].children[T].innerHTML=(5*(T+1)).toString();i.css("display","none"),s.css("display","block"),this.drawHandTimer(s,u),this.drawHandTimer(_,m)}else{"Timespan"===r?(e.attr("display","block"),this.fillClockTimer(e,20,a+d/60+c/3600,12)):e.attr("display","none");for(T=0;T<t[0].children.length;T++)t[0].children[T].innerHTML=(T+1).toString();i.css("display","block"),s.css("display","block"),this.drawHandTimer(i,p),this.drawHandTimer(s,u),this.drawHandTimer(_,m)}}fillClockTimer(e,t,i,s){var _=i/s*360,o=Math.PI/180*_,l=0;_>=180&&(l=1);var r="M50,50 h"+t+" a"+t+","+t+" 0 "+l+", 1 "+-1*(t-Math.cos(o)*t)+","+Math.sin(o)*t+" z";e.attr("d",r)}drawHandTimer(e,t){var i="translate(50px, 50px) rotate("+t+"deg)";e.css("transform",i)}convertDateTimeTimer(e){return e.wSecond+60*e.wMinute+3600*e.wHour}}t.Timer=i}(i=t.Analytics||(t.Analytics={})),t.registerEx("Timer","TcHmi.Controls.Analytics",i.Timer)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));