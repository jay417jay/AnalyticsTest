var TcHmi;!function(t){let e;!function(e){let s;!function(e){class s extends t.Controls.Analytics.AnalyticsControl{constructor(t,e,s){super(t,e,s),this.__onResized=()=>(t,e)=>{let s=super.__getScaleFactor();if(0==this.__hasLicense)return;this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),this.__elementStateAlias.css("font-size",14*s),this.__elementStateAlias.css("margin-top",3*s);let i=135-this.__elementNameAlias[0].clientHeight-this.__elementStateAlias[0].clientHeight/s;"Circle"===this.__shape?(this.__elementState.css("width",i*s),this.__elementState.css("height",i*s),this.__elementState.css("border-radius",i*s)):(this.__elementState.css("width",120*s),this.__elementState.css("height",i*s),this.__elementState.css("border-radius",0)),this.__elementSvg.css("width",i*s),this.__elementSvg.css("height",i*s),this.__elementState.css("margin-top",3*s),this.__elementContainer.css("height",(135-this.__elementNameAlias[0].clientHeight)*s)}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=150,this.__defaultHeight=150,this.__elementState=this.__elementTemplateRoot.find(".tchmi-multi-state-state"),this.__elementStateAlias=this.__elementTemplateRoot.find(".tchmi-multi-state-state-alias"),this.__elementContainer=this.__elementTemplateRoot.find(".tchmi-multi-state-container"),this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-multi-state-svg"),this.__elementSvgEye=this.__elementTemplateRoot.find(".tchmi-multi-state-svg-eye"),this.__elementSvgMouth=this.__elementTemplateRoot.find(".tchmi-multi-state-svg-mouth"))}__init(){let t=[new e.Property(this,"Shape","Shape",e.E_DataType.COMBOBOX,{comboBoxOptions:[{value:"Circle",displayName:"Circle"},{value:"Rectangle",displayName:"Rectangle"}]}),new e.Property(this,"ShowSmiley","Show Smiley",e.E_DataType.BOOLEAN),new e.Property(this,"ShowText","Show Text",e.E_DataType.BOOLEAN)];super.setEditableProperties(t),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}__processColor(){this.__elementState.css("border-color",this.__controlColorDark),this.__elementSvgEye.css("fill",this.__fontColor),this.__elementSvgMouth.css("stroke",this.__fontColor)}setShape(e){var s=t.ValueConverter.toString(e);null!==s?s!==this.__shape&&(this.__shape=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShape"]),this.__processShape()):s=this.getAttributeDefaultValueInternal("Shape")}getShape(){return this.__shape}__processShape(){"Circle"===this.__shape?(this.__elementState.css("width","100px"),this.__elementState.css("height","100px"),this.__elementState.css("border-radius","100px")):(this.__elementState.css("width","100px"),this.__elementState.css("height","75px"),this.__elementState.css("border-radius",0)),t.EventProvider.raise(`${this.__id}.onResized`,null)}setCurrentState(e){var s=t.ValueConverter.toNumber(e);null===s&&(s=this.getAttributeDefaultValueInternal("CurrentState")),JSON.stringify(s)!==JSON.stringify(this.__currentState)&&(this.__currentState=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getCurrentState"]),this.__processCurrentState())}getCurrentState(){return this.__currentState}setStateColors(e){var s=t.ValueConverter.toObject(e);null===s&&(s=this.getAttributeDefaultValueInternal("StateColors")),JSON.stringify(s)!==JSON.stringify(this.__stateColors)&&(this.__stateColors=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStateColors"]),this.__processStateColors())}getStateColors(){return this.__stateColors}__processStateColors(){this.__processCurrentState()}__processColorGradient(){this.__processColor(),this.__processCurrentState()}__processCurrentState(){if(this.__stateColors&&void 0!==this.__currentState&&null!==this.__currentState){let i=this.getColors();var t=[];let _=i[this.__currentState%15];for(var e=0;e<this.__stateColors.length;e++)null!==this.__stateColors[e].stateColor?"rgba(0, 0, 0, 0)"===this.__stateColors[e].stateColor.color||"#000000"===this.__stateColors[e].stateColor.color||"None"===this.__stateColors[e].stateColor.color||null===this.__stateColors[e].stateColor.color?t[e]=i[e%15]:t[e]=this.rgbaToHex(this.__stateColors[e].stateColor.color):t[e]=i[e%15];for(e=0;e<this.__stateColors.length;e++)this.__currentState===this.__stateColors[e].state&&(_=t[e]);if(void 0!==this.__currentState&&void 0!==this.__colorGradient){var s="radial-gradient(circle at 65% 35%, "+this.GetColorGradientLighter(this.hexToRgbA(_),this.__colorGradient)+","+this.hexToRgbA(_)+"70%)";this.__elementState.css("background",s)}}this.__processShowSmiley()}setShowText(e){var s=t.ValueConverter.toBoolean(e);null!==s?s!==this.__showText&&(this.__showText=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowText"]),this.__processShowText()):s=this.getAttributeDefaultValueInternal("ShowText")}getShowText(){return this.__showText}__processShowText(){!0===this.__showText?this.__elementStateAlias.css("display","block"):this.__elementStateAlias.css("display","none"),t.EventProvider.raise(`${this.__id}.onResized`,null)}setShowSmiley(e){var s=t.ValueConverter.toBoolean(e);null!==s?s!==this.__showSmiley&&(this.__showSmiley=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowSmiley"]),this.__processShowSmiley()):s=this.getAttributeDefaultValueInternal("ShowSmiley")}getShowSmiley(){return this.__showSmiley}__processShowSmiley(){null!=this.__showSmiley&&null!=this.__currentState&&(this.__showSmiley?(this.__elementSvg.css("display","block"),this.DrawSmiley(),this.__processText(),this.__processColor()):this.__elementSvg.css("display","none"))}DrawSmiley(){1==this.__currentState?this.__elementSvgMouth[0].setAttribute("d","M25,60 Q50,90 75,60"):2==this.__currentState?this.__elementSvgMouth[0].setAttribute("d","M25,70 L75,70"):3==this.__currentState?this.__elementSvgMouth[0].setAttribute("d","M25,80 Q50,50 75,80"):this.__elementSvg.css("display","none")}setTextAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("TextAlias")),s!==this.__textAlias&&(this.__textAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTextAlias"]),this.__processText())}getTextAlias(){return this.__textAlias}setTextInfo(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("TextInfo")),s!==this.__textInfo&&(this.__textInfo=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTextInfo"]),this.__processText())}getTextInfo(){return this.__textInfo}setMessageAlias(e){var s=t.ValueConverter.toString(e);null===s&&(s=this.getAttributeDefaultValueInternal("MessageAlias")),s!==this.__messageAlias&&(this.__messageAlias=s,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMessageAlias"]),this.__processMessageAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getMessageAlias(){return this.__messageAlias}__processMessageAlias(){this.__processShowSmiley()}__processText(){if(null!=this.__currentState&&null!=this.__messageAlias&&null!==this.__showSmiley&&void 0!==this.__textAlias&&null!==this.__textInfo&&null!==this.__textAlias&&void 0!==this.__textInfo){let e;if(this.__showSmiley&&this.__currentState<=3){var t=this.__messageAlias.split(",");this.__elementStateAlias.text(t[this.__currentState])}else e=this.__textAlias.length>0?this.__textAlias+" ":this.__textAlias,this.__elementStateAlias.text(e+this.__textInfo)}}}e.MultiState=s}(s=e.Analytics||(e.Analytics={})),e.registerEx("MultiState","TcHmi.Controls.Analytics",s.MultiState)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));