var TcHmi;!function(t){let i;!function(i){let e;!function(i){class e extends t.Controls.Analytics.AnalyticsControl{constructor(t,i,e){super(t,i,e),this.__radialGrad="radialGradTrafficLight",this.__linearGrad="linearGradTrafficLight",this.__onResized=()=>(t,i)=>{let e,s=super.__getScaleFactor();if(0==this.__hasLicense)return;this.__showReset?this.__elementNameAlias.css("padding-right","16px"):this.__elementNameAlias.css("padding-right","5px"),this.__elementMessage.css("font-size",14*s),this.__elementActualValueAlias.css("font-size",14*s),this.__elementValue.css("font-size",14*s),e=!0===this.__showMilliSeconds?10:12,this.__elementAlarm.css("font-size",e*s),this.__elementWarning.css("font-size",e*s);var l=275-1.25*this.__elementNameAlias[0].clientHeight-1.1*this.__elementAlarm[0].clientHeight/s-1.1*this.__elementWarning[0].clientHeight/s-this.__elementValue[0].clientHeight/s-this.__elementMessage[0].clientHeight/s-this.__elementActualValueAlias[0].clientHeight/s;let a=328-this.__elementNameAlias[0].clientHeight,n=this.getRenderedHeight()/a;this.__elementValue.css("margin-bottom",3*n),l/3*n<150?(this.__elementSvg.css("width",l/3*n),this.__elementSvg.css("height",l*n)):(this.__elementSvg.css("width",l/3*s),this.__elementSvg.css("height",l*s)),n>1&&(this.__elementAlarm.css("margin-top",2*n),this.__elementMessage.css("margin-top",2*n),this.__elementActualValueAlias.css("margin-top",2*n))}}__previnit(){super.__previnit(),0!=this.__hasLicense&&(this.__defaultWidth=150,this.__defaultHeight=310,this.__elementSvg=this.__elementTemplateRoot.find(".tchmi-traffic-light-svg"),this.__elementSvgDefs=this.__elementTemplateRoot.find(".tchmi-traffic-light-defs"),this.__elementSvgOuterRect=this.__elementTemplateRoot.find(".tchmi-traffic-light-svg-outer-rect"),this.__elementSvgLamps=this.__elementTemplateRoot.find(".tchmi-traffic-light-svg-lamp"),this.__elementMessage=this.__elementTemplateRoot.find(".tchmi-traffic-light-message"),this.__elementActualValueAlias=this.__elementTemplateRoot.find(".tchmi-traffic-light-value-alias"),this.__elementValue=this.__elementTemplateRoot.find(".tchmi-traffic-light-value"),this.__elementWarning=this.__elementTemplateRoot.find(".tchmi-traffic-light-last-warning"),this.__elementAlarm=this.__elementTemplateRoot.find(".tchmi-traffic-light-last-alarm"))}__init(){let t=[new i.Property(this,"ShowValues","Show Values",i.E_DataType.BOOLEAN),new i.Property(this,"AmountDecimals","Amount Decimals",i.E_DataType.UINTEGER),new i.Property(this,"ShowLastWarning","Show Last Warning",i.E_DataType.BOOLEAN),new i.Property(this,"ShowLastAlarm","Show Last Alarm",i.E_DataType.BOOLEAN),new i.Property(this,"ShowMilliSeconds","Show Milliseconds",i.E_DataType.BOOLEAN)];super.setEditableProperties(t),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setClassification(i){var e=t.ValueConverter.toNumber(i);null===e&&(e=this.getAttributeDefaultValueInternal("Classification")),e!==this.__classification&&(this.__classification=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getClassification"]),this.__processTrafficLightColors())}setTrafficLightColors(i){var e=t.ValueConverter.toObject(i);null===e&&(e=this.getAttributeDefaultValueInternal("TrafficLightColors")),JSON.stringify(e)!==JSON.stringify(this.__trafficLightColors)&&(this.__trafficLightColors=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getTrafficLightColors"]),this.__processTrafficLightColors())}getTrafficLightColors(){return this.__trafficLightColors}__processTrafficLightColors(){this.__processColor(),this.__processClassification()}getClassification(){return this.__classification}setMessageAlias(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("MessageAlias")),e!==this.__messageAlias&&(this.__messageAlias=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMessageAlias"]),this.__processMessageAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getMessageAlias(){return this.__messageAlias}__processMessageAlias(){this.__processClassification()}__processClassification(){if(void 0!==this.__messageAlias&&null!==this.__messageAlias&&void 0!==this.__classification&&null!==this.__classification){var t=this.__messageAlias.split(",");this.__classification>0&&this.__classification<4?this.__elementMessage.text(t[this.__classification]):this.__elementMessage.text(t[0])}void 0!==this.__elementSvgLamps&&void 0!==this.__controlColorLightPlus&&null!==this.__controlColorLightPlus&&void 0!==this.__classification&&null!==this.__classification&&this.DrawTrafficLight(this.__elementSvgLamps,this.__classification,this.__controlColorLightPlus)}setConfigLevel1(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("ConfigLevel1")),JSON.stringify(e)!==JSON.stringify(this.__configLevel1)&&(this.__configLevel1=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getConfigLevel1"]),this.__processStringClassification())}getConfigLevel1(){return this.__configLevel1}setConfigLevel2(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("ConfigLevel2")),JSON.stringify(e)!==JSON.stringify(this.__configLevel2)&&(this.__configLevel2=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getConfigLevel2"]),this.__processStringClassification())}getConfigLevel2(){return this.__configLevel2}setConfigLevel3(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("ConfigLevel3")),JSON.stringify(e)!==JSON.stringify(this.__configLevel3)&&(this.__configLevel3=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getConfigLevel3"]),this.__processStringClassification())}getConfigLevel3(){return this.__configLevel3}setStringClassification(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("StringClassification")),e!==this.__stringClassification&&(this.__stringClassification=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getStringClassification"]),this.__processStringClassification())}getStringClassification(){return this.__stringClassification}__processStringClassification(){void 0!==this.__stringClassification&&""!==this.__stringClassification&&void 0!==this.__configLevel1&&void 0!==this.__configLevel2&&void 0!==this.__configLevel3&&(this.__stringClassification===this.__configLevel1?(this.__classification=1,this.__messageAlias="NotInitialized,"+this.__configLevel1+","+this.__configLevel2+","+this.__configLevel3):this.__stringClassification===this.__configLevel2?(this.__classification=2,this.__messageAlias="NotInitialized,"+this.__configLevel1+","+this.__configLevel2+","+this.__configLevel3):this.__stringClassification===this.__configLevel3?(this.__classification=3,this.__messageAlias="NotInitialized,"+this.__configLevel1+","+this.__configLevel2+","+this.__configLevel3):this.__classification=0,this.__processTrafficLightColors())}setActualValueAlias(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("ActualValueAlias")),e!==this.__actualValueAlias&&(this.__actualValueAlias=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getActualValueAlias"]),this.__processActualValueAlias())}getActualValueAlias(){return this.__actualValueAlias}__processActualValueAlias(){void 0!==this.__actualValueAlias&&null!==this.__actualValueAlias&&this.__elementActualValueAlias.text(this.__actualValueAlias)}setValue(i){var e=t.ValueConverter.toNumber(i);null===e&&(e=this.getAttributeDefaultValueInternal("Value")),e!==this.__value&&(this.__value=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getValue"]),this.__processValue())}getValue(){return this.__value}__processValue(){null!=this.__value&&this.__elementValue.text(this.getTrimmedNumber(this.__value))}setShowValues(i){var e=t.ValueConverter.toBoolean(i);null===e&&(e=this.getAttributeDefaultValueInternal("ShowValues")),e!==this.__showValues&&(this.__showValues=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowValues"]),this.__processShowValues())}getShowValues(){return this.__showValues}__processShowValues(){!0===this.__showValues?(this.__elementMessage.css("display","block"),this.__elementActualValueAlias.css("display","block"),this.__elementValue.css("display","block")):(this.__elementMessage.css("display","none"),this.__elementActualValueAlias.css("display","none"),this.__elementValue.css("display","none")),t.EventProvider.raise(`${this.__id}.onResized`,null)}setShowLastAlarm(i){var e=t.ValueConverter.toBoolean(i);null!==e?e!==this.__showLastAlarm&&(this.__showLastAlarm=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowLastAlarm"]),this.__processShowLastAlarm()):e=this.getAttributeDefaultValueInternal("ShowLastAlarm")}getShowLastAlarm(){return this.__showLastAlarm}setShowLastWarning(i){var e=t.ValueConverter.toBoolean(i);null!==e?e!==this.__showLastWarning&&(this.__showLastWarning=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowLastWarning"]),this.__processShowLastWarning()):e=this.getAttributeDefaultValueInternal("ShowLastWarning")}getShowLastWarning(){return this.__showLastWarning}setLastAlarm(i){var e=t.ValueConverter.toObject(i);null===e&&(e=this.getAttributeDefaultValueInternal("LastAlarm")),JSON.stringify(e)!==JSON.stringify(this.__lastAlarm)&&(this.__lastAlarm=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastAlarm"]),this.__processLastAlarm())}getLastAlarm(){return this.__lastAlarm}setLastWarning(i){var e=t.ValueConverter.toObject(i);null===e&&(e=this.getAttributeDefaultValueInternal("LastWarning")),JSON.stringify(e)!==JSON.stringify(this.__lastWarning)&&(this.__lastWarning=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastWarning"]),this.__processLastWarning())}getLastWarning(){return this.__lastWarning}setLastWarningAlias(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("LastWarningAlias")),e!==this.__lastWarningAlias&&(this.__lastWarningAlias=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastWarningAlias"]),this.__processLastWarningAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getLastWarningAlias(){return this.__lastWarningAlias}__processLastWarningAlias(){this.__processLastWarning()}setLastAlarmAlias(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("LastAlarmAlias")),e!==this.__lastAlarmAlias&&(this.__lastAlarmAlias=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLastAlarmAlias"]),this.__processLastAlarmAlias(),t.EventProvider.raise(`${this.__id}.onResized`,null))}getLastAlarmAlias(){return this.__lastAlarmAlias}__processLastAlarmAlias(){this.__processLastAlarm()}setMonthAlias(i){var e=t.ValueConverter.toString(i);null===e&&(e=this.getAttributeDefaultValueInternal("MonthAlias")),e!==this.__monthAlias&&(this.__monthAlias=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getMonthAlias"]),this.__processMonthAlias())}getMonthAlias(){return this.__monthAlias}__processMonthAlias(){i.DCTimestruct.monthAlias=this.__monthAlias,this.__processLastAlarm(),this.__processLastWarning()}__processShowLastAlarm(){!0===this.__showLastAlarm?this.__elementAlarm.css("display","block"):this.__elementAlarm.css("display","none"),t.EventProvider.raise(`${this.__id}.onResized`,null)}__processShowLastWarning(){!0===this.__showLastWarning?this.__elementWarning.css("display","block"):this.__elementWarning.css("display","none"),t.EventProvider.raise(`${this.__id}.onResized`,null)}setShowMilliSeconds(i){var e=t.ValueConverter.toBoolean(i);null===e&&(e=this.getAttributeDefaultValueInternal("ShowMilliSeconds")),e!==this.__showMilliSeconds&&(this.__showMilliSeconds=e,t.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowMilliSeconds"]),this.__processShowMilliSeconds())}getShowMilliSeconds(){return this.__showMilliSeconds}__processShowMilliSeconds(){this.__processLastAlarm(),this.__processLastWarning(),t.EventProvider.raise(`${this.__id}.onResized`,null)}__processLastAlarm(){void 0!==this.__lastAlarm&&void 0!==this.__monthAlias&&null!==this.__monthAlias&&void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds&&(this.__elementAlarm[0].textContent=this.__lastAlarmAlias+":",this.__elementAlarm[1].textContent=this.DateTimeConverter(this.__lastAlarm,this.__monthAlias,this.__showMilliSeconds))}__processLastWarning(){void 0!==this.__lastWarning&&void 0!==this.__monthAlias&&null!==this.__monthAlias&&void 0!==this.__showMilliSeconds&&null!==this.__showMilliSeconds&&(this.__elementWarning[0].textContent=this.__lastWarningAlias+": ",this.__elementWarning[1].textContent=this.DateTimeConverter(this.__lastWarning,this.__monthAlias,this.__showMilliSeconds))}__processAmountDecimals(){super.__processAmountDecimals(),this.__processValue()}__processColorGradient(){this.__processColor()}__processColor(){if(this.__elementSvgDefs[0].innerHTML="",void 0!==this.__controlColorDark&&void 0!==this.__colorGradient&&this.CreateLinearGradient(this.hexToRgbA(this.__controlColorDark),this.__elementSvgDefs[0],this.__colorGradient,this.__linearGrad+this.__secureId),void 0!==this.__trafficLightColors&&void 0!==this.__colorGradient)for(let t=0;t<=2;t++)this.CreateRadialGradient(this.__trafficLightColors[t].TrafficLightColor.color,this.__elementSvgDefs[0],this.__colorGradient,this.__radialGrad+this.__secureId+t.toString());this.__elementSvgOuterRect.css("fill","url(#"+this.__linearGrad+this.__secureId+")"),this.__elementSvgOuterRect.css("stroke","rgba(102, 102, 102, 1)"),this.__elementSvgLamps.css("fill",this.__controlColorLightPlus),this.__elementSvgLamps.css("stroke","rgba(102, 102, 102, 1)"),this.__processClassification()}DrawTrafficLight(t,i,e){switch(i){case 1:t[2].style.fill="url(#"+this.__radialGrad+this.__secureId+"0)",t[1].style.fill=e,t[0].style.fill=e;break;case 2:t[1].style.fill="url(#"+this.__radialGrad+this.__secureId+"1)",t[2].style.fill=e,t[0].style.fill=e;break;case 3:t[0].style.fill="url(#"+this.__radialGrad+this.__secureId+"2)",t[1].style.fill=e,t[2].style.fill=e;break;default:t[0].style.fill=e,t[1].style.fill=e,t[2].style.fill=e}}}i.TrafficLight=e}(e=i.Analytics||(i.Analytics={})),i.registerEx("TrafficLight","TcHmi.Controls.Analytics",e.TrafficLight)}(i=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));