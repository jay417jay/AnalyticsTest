var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.Analytics.AnalyticsControl{constructor(e,i,r){super(e,i,r),this.__calcTextFontSizeDebounced=CustomElements.Utilities.debounce(()=>{const e=Math.min(this.__elOEEProgressBar.textValueFontSize,this.__elAvailabilityProgressBar.textValueFontSize,this.__elPerformanceProgressBar.textValueFontSize,this.__elQualityProgressBar.textValueFontSize),t=Math.min(this.__elOEEProgressBar.textAliasFontSize,this.__elAvailabilityProgressBar.textAliasFontSize,this.__elPerformanceProgressBar.textAliasFontSize,this.__elQualityProgressBar.textAliasFontSize);this.__textValueFontSizeChanged(null,e),this.__textAliasFontSizeChanged(null,t)},20),this.__onResized=()=>(e,i)=>{const r=super.__onResizedBase(e,i);if(null===r)return;let l;switch(this.__elMultiValue.style.width=t.Str.px(r.vpWidth/2-30),this.__elMultiValue.style.height=t.Str.px(r.vpHeight),this.__elProgressBarContainers.css("min-width",""),this.__oeeDesign){case s.DEFAULT:case s.MULTI_LAYER_RING:l=r.vpWidth/2,r.vpHeight<l&&(l=r.vpHeight),this.__elOEEProgressBar.style.width=t.Str.px(l),this.__elOEEProgressBar.style.height=t.Str.px(l);break;case s.FOUR_RINGS:r.vpHeight>=4*r.vpWidth?l=r.vpWidth:r.vpHeight>=2*r.vpWidth?l=r.vpHeight/4:r.vpWidth>=4*r.vpHeight?l=r.vpHeight:r.vpWidth>=2*r.vpHeight?l=r.vpWidth/4:(l=r.vpDefault/2,this.__elProgressBarContainers.css("min-width","34%")),this.__elOEEProgressBar.style.width=t.Str.px(l),this.__elOEEProgressBar.style.height=t.Str.px(l),this.__elAvailabilityProgressBar.style.width=t.Str.px(l),this.__elAvailabilityProgressBar.style.height=t.Str.px(l),this.__elPerformanceProgressBar.style.width=t.Str.px(l),this.__elPerformanceProgressBar.style.height=t.Str.px(l),this.__elQualityProgressBar.style.width=t.Str.px(l),this.__elQualityProgressBar.style.height=t.Str.px(l)}}}__previnit(){if(super.__previnit(),0==this.__hasLicense)return;this.__defaultWidth=310,this.__defaultHeight=150,this.__elProgressBarContainers=this.__elementTemplateRoot.find(".tchmi-oee-progress-bar-container"),this.__elOEEProgressBar=this.__elementTemplateRoot.find(".tchmi-oee-oee-progress-bar")[0],this.__elOEEProgressBar.amountDecimals=this.__amountDecimals,this.__elOEEProgressBar.showThresholds=!0,this.__elOEEProgressBar.initDataList(3),this.__elAvailabilityProgressBar=this.__elementTemplateRoot.find(".tchmi-oee-availability-progress-bar")[0],this.__elAvailabilityProgressBar.amountDecimals=this.__amountDecimals,this.__elPerformanceProgressBar=this.__elementTemplateRoot.find(".tchmi-oee-performance-progress-bar")[0],this.__elPerformanceProgressBar.amountDecimals=this.__amountDecimals,this.__elQualityProgressBar=this.__elementTemplateRoot.find(".tchmi-oee-quality-progress-bar")[0],this.__elQualityProgressBar.amountDecimals=this.__amountDecimals,this.__elMultiValue=this.__elementTemplateRoot.find("multi-value")[0],this.__elMultiValue.amountDecimals=this.__amountDecimals,this.__elMultiValue.initDataList(4);const e=[new t.EditAreaItem("","Default",'url("/Beckhoff.TwinCAT.HMI.Analytics.Controls/OEE/Images/Default.png")',null,()=>{this.__setOEEDesignPersistent("Default")}),new t.EditAreaItem("","Multi Layer Ring",'url("/Beckhoff.TwinCAT.HMI.Analytics.Controls/OEE/Images/MultiLayer.png")',null,()=>{this.__setOEEDesignPersistent("Multi Layer Ring")}),new t.EditAreaItem("","Four Rings",'url("/Beckhoff.TwinCAT.HMI.Analytics.Controls/OEE/Images/FourRings.png")',null,()=>{this.__setOEEDesignPersistent("Four Rings")})];this.__editAreaItems.push(new t.EditAreaItem("","Design",'url("/Beckhoff.TwinCAT.HMI.Analytics.Controls/OEE/Images/Default.png")',null,null,e)),this.__addEventListeners()}__init(){let e=[new t.Property(this,"OEEColor","OEE Color",t.E_DataType.SOLIDCOLOR),new t.Property(this,"AvailabilityColor","Availability Color",t.E_DataType.SOLIDCOLOR),new t.Property(this,"PerformanceColor","Performance Color",t.E_DataType.SOLIDCOLOR),new t.Property(this,"QualityColor","Quality Color",t.E_DataType.SOLIDCOLOR),new t.Property(this,"OEEDesign","Design",t.E_DataType.COMBOBOX,{comboBoxOptions:[{displayName:"Default",value:"Default"},{displayName:"Multi Layer Ring",value:"Multi Layer Ring"},{displayName:"Four Rings",value:"Four Rings"}]}),new t.Property(this,"ShowLevels","Show Levels",t.E_DataType.BOOLEAN),new t.Property(this,"ShowClassification","Show Classification",t.E_DataType.BOOLEAN),new t.Property(this,"UseThresholdColor","Use Threshold Color",t.E_DataType.BOOLEAN)];super.setEditableProperties(e),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}setOEEDesign(t){let i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("OEEDesign")),i!==this.__oeeDesignInternal&&(this.__oeeDesignInternal=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOEEDesign"]),this.__processOEEDesign())}getOEEDesign(){return this.__oeeDesignInternal}__processOEEDesign(){switch(this.__oeeDesignInternal){case"Default":this.__oeeDesign=s.DEFAULT;break;case"Multi Layer Ring":this.__oeeDesign=s.MULTI_LAYER_RING;break;case"Four Rings":this.__oeeDesign=s.FOUR_RINGS;break;default:this.__oeeDesign=s.DEFAULT}switch(this.__oeeDesign){case s.DEFAULT:this.__elMultiValue.showBullets=!1,this.__elMultiValue.classList.remove("tchmi-analytics-display-none"),this.__elOEEProgressBar.showMultiRing=!1,this.__elAvailabilityProgressBar.classList.add("tchmi-analytics-display-none"),this.__elPerformanceProgressBar.classList.add("tchmi-analytics-display-none"),this.__elQualityProgressBar.classList.add("tchmi-analytics-display-none");break;case s.MULTI_LAYER_RING:this.__elMultiValue.showBullets=!0,this.__elMultiValue.classList.remove("tchmi-analytics-display-none"),this.__elOEEProgressBar.showMultiRing=!0,this.__elAvailabilityProgressBar.classList.add("tchmi-analytics-display-none"),this.__elPerformanceProgressBar.classList.add("tchmi-analytics-display-none"),this.__elQualityProgressBar.classList.add("tchmi-analytics-display-none");break;case s.FOUR_RINGS:this.__elMultiValue.showBullets=!1,this.__elMultiValue.classList.add("tchmi-analytics-display-none"),this.__elOEEProgressBar.showMultiRing=!1,this.__elAvailabilityProgressBar.classList.remove("tchmi-analytics-display-none"),this.__elPerformanceProgressBar.classList.remove("tchmi-analytics-display-none"),this.__elQualityProgressBar.classList.remove("tchmi-analytics-display-none")}this.__processAvailability(),this.__processPerformance(),this.__processQuality(),this.__textValueFontSizeChanged(null,100),this.__textAliasFontSizeChanged(null,50),this.__elOEEProgressBar.resetAutoSize(),this.__elAvailabilityProgressBar.resetAutoSize(),this.__elPerformanceProgressBar.resetAutoSize(),this.__elQualityProgressBar.resetAutoSize(),this.__removeEventListeners_DesignSpecific(),this.__addEventListeners_DesignSpecific(),e.EventProvider.raise(`${this.__id}.onResized`,null)}setOEE(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("OEE")),i!==this.__oee&&(this.__oee=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOEE"]),this.__processOEE())}getOEE(){return this.__oee}__processOEE(){this.__elOEEProgressBar.progress=this.__oee;const e=super.getTrimmedNumberWithUnit(this.__oee,"%","",!0);this.__elMultiValue.setData(0,{value:e})}setAvailability(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("Availability")),i!==this.__availability&&(this.__availability=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getAvailability"]),this.__processAvailability())}getAvailability(){return this.__availability}__processAvailability(){if(this.__oeeDesign!==s.FOUR_RINGS){const e=super.getTrimmedNumberWithUnit(this.__availability,"%","",!0);this.__elMultiValue.setData(1,{value:e})}switch(this.__oeeDesign){case s.MULTI_LAYER_RING:this.__elOEEProgressBar.setData(0,{progress:this.__availability});break;case s.FOUR_RINGS:this.__elAvailabilityProgressBar.progress=this.__availability}}setPerformance(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("Performance")),i!==this.__performance&&(this.__performance=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getPerformance"]),this.__processPerformance())}getPerformance(){return this.__performance}__processPerformance(){if(this.__oeeDesign!==s.FOUR_RINGS){const e=super.getTrimmedNumberWithUnit(this.__performance,"%","",!0);this.__elMultiValue.setData(2,{value:e})}switch(this.__oeeDesign){case s.MULTI_LAYER_RING:this.__elOEEProgressBar.setData(1,{progress:this.__performance});break;case s.FOUR_RINGS:this.__elPerformanceProgressBar.progress=this.__performance}}setQuality(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("Quality")),i!==this.__quality&&(this.__quality=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getQuality"]),this.__processQuality())}getQuality(){return this.__quality}__processQuality(){if(this.__oeeDesign!==s.FOUR_RINGS){const e=super.getTrimmedNumberWithUnit(this.__quality,"%","",!0);this.__elMultiValue.setData(3,{value:e})}switch(this.__oeeDesign){case s.MULTI_LAYER_RING:this.__elOEEProgressBar.setData(2,{progress:this.__quality});break;case s.FOUR_RINGS:this.__elQualityProgressBar.progress=this.__quality}}setLevelOkWarning(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("LevelOkWarning")),i!==this.__levelOkWarning&&(this.__levelOkWarning=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLevelOkWarning"]),this.__processLevelOkWarning())}getLevelOkWarning(){return this.__levelOkWarning}__processLevelOkWarning(){this.__elOEEProgressBar.thresholdOkWarning=this.__levelOkWarning}setLevelWarningAlarm(t){let i=e.ValueConverter.toNumber(t);null===i&&(i=this.getAttributeDefaultValueInternal("LevelWarningAlarm")),i!==this.__levelWarningAlarm&&(this.__levelWarningAlarm=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getLevelWarningAlarm"]),this.__processLevelWarningAlarm())}getLevelWarningAlarm(){return this.__levelWarningAlarm}__processLevelWarningAlarm(){this.__elOEEProgressBar.thresholdWarningAlarm=this.__levelWarningAlarm}setClassification(i){let s=e.ValueConverter.toEnum(i,t.ClassificationState);null===s&&(s=this.getAttributeDefaultValueInternal("Classification")),s!==this.__classification&&(this.__classification=s,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getClassification"]),this.__processClassification())}getClassification(){return this.__classification}__processClassification(){this.__elOEEProgressBar.classification=this.__classification,this.__processOEEColor()}setUseThresholdColor(t){let i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("UseThresholdColor")),i!==this.__useThresholdColor&&(this.__useThresholdColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getUseThresholdColor"]),this.__processUseThresholdColor())}getUseThresholdColor(){return this.__useThresholdColor}__processUseThresholdColor(){this.__processOEEColor()}setShowLevels(t){let i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("ShowLevels")),i!==this.__showLevels&&(this.__showLevels=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowLevels"]),this.__processShowLevels())}getShowLevels(){return this.__showLevels}__processShowLevels(){this.__elOEEProgressBar.showThresholds=this.__showLevels}setShowClassification(t){let i=e.ValueConverter.toBoolean(t);null===i&&(i=this.getAttributeDefaultValueInternal("ShowClassification")),i!==this.__showClassification&&(this.__showClassification=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getShowClassification"]),this.__processShowClassification())}getShowClassification(){return this.__showClassification}__processShowClassification(){this.__elOEEProgressBar.showClassification=this.__showClassification}setOEEColor(t){let i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("OEEColor")),i!==this.__oeeColor&&(this.__oeeColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOEEColor"]),this.__processOEEColor())}getOEEColor(){return this.__oeeColor}__processOEEColor(){let e=this.__oeeColor.color;if(this.__useThresholdColor)switch(this.__classification){case t.ClassificationState.OK:e=this.__elOEEProgressBar.colorOk;break;case t.ClassificationState.WARNING:e=this.__elOEEProgressBar.colorWarning;break;case t.ClassificationState.ALARM:e=this.__elOEEProgressBar.colorAlarm}this.__elOEEProgressBar.ringColor=e,this.__elMultiValue.setData(0,{bulletColor:e})}setAvailabilityColor(t){let i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("AvailabilityColor")),i!==this.__availabilityColor&&(this.__availabilityColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getAvailabilityColor"]),this.__processAvailabilityColor())}getAvailabilityColor(){return this.__availabilityColor}__processAvailabilityColor(){this.__elAvailabilityProgressBar.ringColor=this.__availabilityColor.color,this.__elOEEProgressBar.setData(0,{color:this.__availabilityColor.color}),this.__elMultiValue.setData(1,{bulletColor:this.__availabilityColor.color})}setPerformanceColor(t){let i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("PerformanceColor")),i!==this.__performanceColor&&(this.__performanceColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getPerformanceColor"]),this.__processPerformanceColor())}getPerformanceColor(){return this.__performanceColor}__processPerformanceColor(){this.__elPerformanceProgressBar.ringColor=this.__performanceColor.color,this.__elOEEProgressBar.setData(1,{color:this.__performanceColor.color}),this.__elMultiValue.setData(2,{bulletColor:this.__performanceColor.color})}setQualityColor(t){let i=e.ValueConverter.toObject(t);null===i&&(i=this.getAttributeDefaultValueInternal("QualityColor")),i!==this.__qualityColor&&(this.__qualityColor=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getQualityColor"]),this.__processQualityColor())}getQualityColor(){return this.__qualityColor}__processQualityColor(){this.__elQualityProgressBar.ringColor=this.__qualityColor.color,this.__elOEEProgressBar.setData(2,{color:this.__qualityColor.color}),this.__elMultiValue.setData(3,{bulletColor:this.__qualityColor.color})}setOEEAlias(t){let i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("OEEAlias")),i!==this.__oeeAlias&&(this.__oeeAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOEEAlias"]),this.__processOEEAlias())}getOEEAlias(){return this.__oeeAlias}__processOEEAlias(){this.__elMultiValue.setData(0,{alias:this.__oeeAlias})}setOEEShortAlias(t){let i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("OEEShortAlias")),i!==this.__oeeShortAlias&&(this.__oeeShortAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getOEEShortAlias"]),this.__processOEEShortAlias())}getOEEShortAlias(){return this.__oeeShortAlias}__processOEEShortAlias(){this.__elOEEProgressBar.ringAlias=this.__oeeShortAlias}setAvailabilityAlias(t){let i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("AvailabilityAlias")),i!==this.__availabilityAlias&&(this.__availabilityAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getAvailabilityAlias"]),this.__processAvailabilityAlias())}getAvailabilityAlias(){return this.__availabilityAlias}__processAvailabilityAlias(){this.__elMultiValue.setData(1,{alias:this.__availabilityAlias}),this.__elAvailabilityProgressBar.ringAlias=this.__availabilityAlias}setPerformanceAlias(t){let i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("PerformanceAlias")),i!==this.__performanceAlias&&(this.__performanceAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getPerformanceAlias"]),this.__processPerformanceAlias())}getPerformanceAlias(){return this.__performanceAlias}__processPerformanceAlias(){this.__elMultiValue.setData(2,{alias:this.__performanceAlias}),this.__elPerformanceProgressBar.ringAlias=this.__performanceAlias}setQualityAlias(t){let i=e.ValueConverter.toString(t);null===i&&(i=this.getAttributeDefaultValueInternal("QualityAlias")),i!==this.__qualityAlias&&(this.__qualityAlias=i,e.EventProvider.raise(`${this.__id}.onFunctionResultChanged`,["getQualityAlias"]),this.__processQualityAlias())}getQualityAlias(){return this.__qualityAlias}__processQualityAlias(){this.__elMultiValue.setData(3,{alias:this.__qualityAlias}),this.__elQualityProgressBar.ringAlias=this.__qualityAlias}__setOEEDesignPersistent(e){const i=new t.Property(this,"OEEDesign","Design",t.E_DataType.STRING);this.__setPropertyPersistent(i,e)}__processColor(){super.__processColor(),this.__elOEEProgressBar.fontColor=this.__fontColor,this.__elAvailabilityProgressBar.fontColor=this.__fontColor,this.__elPerformanceProgressBar.fontColor=this.__fontColor,this.__elQualityProgressBar.fontColor=this.__fontColor,this.__elMultiValue.fontColor=this.__fontColor}__addEventListeners(){this.__addEventListeners_DesignSpecific()}__addEventListeners_DesignSpecific(){if(this.__oeeDesign!==s.FOUR_RINGS)return;const e=[this.__elOEEProgressBar,this.__elAvailabilityProgressBar,this.__elPerformanceProgressBar,this.__elQualityProgressBar];for(const t of e)this.addEventListener(t,"textValueFontSizeChanged",e=>{this.__textValueFontSizeChanged(t,e.detail.newValue)},void 0,"resetOnDesignSwitched"),this.addEventListener(t,"textAliasFontSizeChanged",e=>{this.__textAliasFontSizeChanged(t,e.detail.newValue)},void 0,"resetOnDesignSwitched"),this.addEventListener(t,"sizeChanged",e=>{this.__progressBarSizeChanged()},void 0,"resetOnDesignSwitched")}__removeEventListeners_DesignSpecific(){this.removeEventListeners("resetOnDesignSwitched")}__textValueFontSizeChanged(e,t){null!=e&&e.maxTextValueFontSize===t||(this.__elOEEProgressBar.maxTextValueFontSize=t,this.__elAvailabilityProgressBar.maxTextValueFontSize=t,this.__elPerformanceProgressBar.maxTextValueFontSize=t,this.__elQualityProgressBar.maxTextValueFontSize=t)}__textAliasFontSizeChanged(e,t){null!=e&&e.maxTextAliasFontSize===t||(this.__elOEEProgressBar.maxTextAliasFontSize=t,this.__elAvailabilityProgressBar.maxTextAliasFontSize=t,this.__elPerformanceProgressBar.maxTextAliasFontSize=t,this.__elQualityProgressBar.maxTextAliasFontSize=t)}__progressBarSizeChanged(){this.__calcTextFontSizeDebounced()}}let s;t.OEE=i,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.MULTI_LAYER_RING=1]="MULTI_LAYER_RING",e[e.FOUR_RINGS=2]="FOUR_RINGS"}(s||(s={}))}(i=t.Analytics||(t.Analytics={}))}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("OEE","TcHmi.Controls.Analytics",TcHmi.Controls.Analytics.OEE);