var TcHmi;!function(t){!function(e){!function(e){class o extends e.LayoutGenerator{constructor(t,e){super(t,e)}createLayout(){this.__prepareLayout();try{this.__positionSmartphoneCtrls(),this.__layoutProps.isUserSpecificLayout||""!=this.editedLayout||(this.__layoutProps.generatedFullSmartphoneLayout=JSON.stringify(this.__layout.getCurrentLayout()))}catch(t){console.error("Positioning of controls on the smartphone grid failed.")}}__positionSmartphoneCtrls(){for(let t=0;t<this.__layoutProps.ElElementTemplateRoot.children().length;t++){let e,o;if([e,o]=this.__getGridElements(e,o,t),"grid-buffer-cell-id"===e.id)continue;let i=this.__getStoredCtrlDim(o);null==i&&(i=this.__positionNewSmartphoneGridEl(o)),this.__layout.setGridElStyle(e,i),this.__layoutProps.layoutInitialized?this.__setCtrlStyle(o):this.__convertCtrlToGridEl(o,e,t)}this.__layout.calcCurrentLayout(),""==this.generatedLayout&&""!=this.editedLayout&&(this.generatedLayout=JSON.stringify(this.__layout.getCurrentLayout())),this.__layoutProps.mobileLayoutInitialized=!0}addControl(t){let e=t.getElement()[0],o=document.createElement("div");o.className="tchmi-layout-manager-grid-cell";const i={},r=Math.round(e.getBoundingClientRect().height/this.__layoutProps.rowHeightPx);i.cS=1,i.cE=3;const l=this.__layout.getNumberOfRows(this.__layout.getCurrentLayoutWithoutBuffer());i.rS=l,i.rE=l+r,0==i.rS&&(i.rS++,i.rE++),i.vis=!0,this.__layout.changeRowNumber(r),i.vis=!0,this.__convertCtrlToGridEl(e,o,0,!0,!1),this.__setCtrlStyle(e),this.__layout.setGridElStyle(o,i),this.__layout.calcCurrentLayout()}__positionNewSmartphoneGridEl(t){const e={};let o=this.__getCtrlHeight(t);return null==o&&(o=Math.round(t.getBoundingClientRect().height/this.__layoutProps.rowHeightPx)),this.__layout.changeRowNumber(this.__layoutProps.numberOfRows>0?o:o+1),e.cS=1,e.cE=3,e.rS=this.__layoutProps.numberOfRows-o,e.rE=this.__layoutProps.numberOfRows,e.vis=!0,e}__getCtrlHeight(e){let o=this.__layoutProps.defaultCtrlStyle[e.id];if(null==o&&(o=this.__layoutProps.defaultCtrlStyle[String(e.id+"_GridElement")]),null==o)return null;const i=o.split("; ");let r={};for(let t=0;t<i.length;t++){let e=i[t].split(": ");r[e[0]]=e[1]}let l,s=0;if(-1==r.width.indexOf("%"))l=t.ValueConverter.toNumber(r.width.split("px")[0]),s=t.ValueConverter.toNumber(r.height.split("px")[0]);else{let e=t.ValueConverter.toNumber(this.__layoutProps.ElCtrlElement[0].getAttribute("data-tchmi-default-viewport-width")),o=t.ValueConverter.toNumber(this.__layoutProps.ElCtrlElement[0].getAttribute("data-tchmi-default-viewport-height"));null==e||null==o?(l=t.ValueConverter.toNumber(r.width.split("%")[0])*screen.width,s=t.ValueConverter.toNumber(r.height.split("%")[0])*screen.height):(l=t.ValueConverter.toNumber(r.width.split("%")[0])*e,s=t.ValueConverter.toNumber(r.height.split("%")[0])*o)}const u=s/l*(2*this.__layoutProps.columnWidthPx+this.__layoutProps.gridGapPx);let a=Math.ceil(u/(this.__layoutProps.rowHeightPx+this.__layoutProps.gridGapPx));const n=t.Controls.get(e.id.replace("_GridElement",""))["data-tchmi-default-min-height"];if(null==n||0==n){const t=window.innerHeight;a*this.__layoutProps.rowHeightPx+this.__layoutProps.gridGapPx*(a-1)>t/2&&(a=Math.floor(t/2/(this.__layoutProps.rowHeightPx+this.__layoutProps.gridGapPx)))}return a}}e.MobileLayoutGenerator=o}(e.Analytics||(e.Analytics={}))}(t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));